"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[865],{7347:function(e,t,n){let i;n.r(t),n.d(t,{BackLink:function(){return eB},ChildLink:function(){return eF},ComponentBuilder:function(){return ov},ComponentViewBuilder:function(){return oC},ConfirmDeleteDialogContainer:function(){return e9},DEFAULT_INTENT_HANDLER:function(){return oN},DocumentBuilder:function(){return oD},DocumentInspectorHeader:function(){return nh},DocumentListBuilder:function(){return oW},DocumentListItemBuilder:function(){return o2},DocumentPane:function(){return rg},DocumentPaneProvider:function(){return rx},DocumentTypeListBuilder:function(){return o4},FormViewBuilder:function(){return oS},GenericListBuilder:function(){return oq},GenericViewBuilder:function(){return o_},HELP_URL:function(){return oc},InitialValueTemplateItemBuilder:function(){return oL},LOADING_PANE:function(){return nt},ListBuilder:function(){return oJ},ListItemBuilder:function(){return o0},LoadingPane:function(){return t5},MenuItemBuilder:function(){return om},MenuItemGroupBuilder:function(){return og},Pane:function(){return tr},PaneContainer:function(){return os},PaneContent:function(){return ts},PaneHeader:function(){return tC},PaneHeaderActions:function(){return tK},PaneItem:function(){return tQ},PaneLayout:function(){return tR},ParameterizedLink:function(){return eG},ReferenceChildLink:function(){return eW},SerializeError:function(){return oa},StructureToolProvider:function(){return si},_DEBUG:function(){return t9},component:function(){return oT},createStructureBuilder:function(){return o9},defaultInitialValueTemplateItems:function(){return oA},defaultIntentChecker:function(){return oU},documentFromEditor:function(){return oP},documentFromEditorWithInitialValue:function(){return oR},form:function(){return oE},getOrderingMenuItem:function(){return oh},getOrderingMenuItemsForSchemaType:function(){return of},getTypeNamesFromFilter:function(){return oK},isDocumentListItem:function(){return o3},maybeSerializeInitialValueTemplateItem:function(){return oM},maybeSerializeMenuItem:function(){return op},maybeSerializeMenuItemGroup:function(){return ox},maybeSerializeView:function(){return ok},menuItemsFromInitialValueTemplateItems:function(){return oO},pane:function(){return sr},pane$1:function(){return so},setActivePanes:function(){return ln},shallowIntentChecker:function(){return oB},structureLocaleNamespace:function(){return eP},structureTool:function(){return sn},useDocumentPane:function(){return t6},useDocumentTitle:function(){return nc},usePane:function(){return tl},usePaneLayout:function(){return eq},usePaneRouter:function(){return eK},useStructureTool:function(){return ni}});var r,o=n(9115),l=n(57437),s=n(83238),a=n(74487),c=n(2265),d=n(60593),u=n(71033),p=n(27795),m=n(18788),h=n(7633),f=n(17975),x=n(74819),g=n(61485),y=n(51779),b=n(42798),j=n(84173),v=n(57685),w=n(60036),_=n(92840),k=n(33385),I=n(46075),C=n(48634),S=n(51187),E=n(85078),T=n(61514),z=n(66692),$=n(87935),D=n(36381),P=n(7449),R=n(36940),L=n(17482),A=n(87477),M=n(30783),O=n(44465),N=n(71947),U=n(28419),H=n(68851),V=n(85315),B=n(38214),q=n(71064),F=n(27817),G=n(60033),W=n(99578),K=n(46593),X=n(30867),Y=n(61160),Z=n(28887),Q=n(73600),J=n(89155),ee=n(49930),et=n(50658),en=n(36551),ei=n(7688),er=n(89634),eo=n(45609),el=n(70421),es=n(43949),ea=n(97114),ec=n(51936),ed=n(85258),eu=n(49524),ep=n(92728),em=n(79664),eh=n(10082),ef=n(71878),ex=n(67603),eg=n(52141),ey=n(40521),eb=n(69953),ej=n(37065),ev=n(8727),ew=n(21652),e_=n(15655),ek=n(22345),eI=n(42715),eC=n(47230),eS=n(94686),eE=n(82734),eT=n(97863),ez=n(36029),e$=n(71594),eD=n(24525);let eP="structure",eR=(0,x.CVH)({locale:"en-US",namespace:eP,resources:()=>n.e(640).then(n.bind(n,86640))});function eL(e){let t,n,i,r;let o=(0,s.c)(21),{document:a}=e,c=(0,x.I_y)();o[0]!==a._type||o[1]!==c?(t=c.get(a._type),o[0]=a._type,o[1]=c,o[2]=t):t=o[2];let d=t,{t:u}=(0,x.$G7)(eP);o[3]!==a||o[4]!==d?(n={schemaType:d,value:a},o[3]=a,o[4]=d,o[5]=n):n=o[5];let{error:p,value:m}=(0,x._2T)(n);if(!d){let e,t;return o[6]!==a._type||o[7]!==u?(e=u("doc-title.unknown-schema-type.text",{schemaType:a._type}),o[6]=a._type,o[7]=u,o[8]=e):e=o[8],o[9]!==e?(t=(0,l.jsx)("code",{children:e}),o[9]=e,o[10]=t):t=o[10],t}if(p){let e,t;return o[11]!==p.message||o[12]!==u?(e=u("doc-title.error.text",{errorMessage:p.message}),o[11]=p.message,o[12]=u,o[13]=e):e=o[13],o[14]!==e?(t=(0,l.jsx)(l.Fragment,{children:e}),o[14]=e,o[15]=t):t=o[15],t}return o[16]!==u||o[17]!==m?.title?(i=m?.title||(0,l.jsx)("span",{style:{color:"var(--card-muted-fg-color)"},children:u("doc-title.fallback.text")}),o[16]=u,o[17]=m?.title,o[18]=i):i=o[18],o[19]!==i?(r=(0,l.jsx)(l.Fragment,{children:i}),o[19]=i,o[20]=r):r=o[20],r}let eA=(0,_.zo)(a.xu)`
  margin-left: auto;
`,eM=_.zo.details`
  flex: none;

  &[open] ${eA} {
    transform: rotate(180deg);
  }
`,eO=_.zo.summary`
  list-style: none;

  &::-webkit-details-marker {
    display: none;
  }
`,eN=_.zo.table`
  width: 100%;
  text-align: left;
  padding: 0 ${({theme:e})=>(0,a.hO)(e.sanity.space[2])};
  border-collapse: collapse;

  th {
    padding: ${({theme:e})=>(0,a.hO)(e.sanity.space[1])};
  }

  td {
    padding: 0 ${({theme:e})=>(0,a.hO)(e.sanity.space[1])};
  }

  tr > *:last-child {
    text-align: right;
  }
`,eU=(0,_.zo)(a.kC)`
  min-height: 33px;
`,eH=e=>{let t,n,i,r,c,d;let p=(0,s.c)(13),{t:m}=(0,x.$G7)(eP),h=e.totalCount-e.references.length;return h?(p[0]!==h||p[1]!==m?(t=m("confirm-delete-dialog.other-reference-count.title",{count:h}),p[0]=h,p[1]=m,p[2]=t):t=p[2],p[3]!==t?(n=(0,l.jsx)(a.xv,{size:1,muted:!0,children:t}),p[3]=t,p[4]=n):n=p[4],p[5]!==m?(i=m("confirm-delete-dialog.other-reference-count.tooltip"),p[5]=m,p[6]=i):i=p[6],p[7]===Symbol.for("react.memo_cache_sentinel")?(r=(0,l.jsx)(a.xv,{size:1,muted:!0,children:(0,l.jsx)(u.hQ6,{})}),p[7]=r):r=p[7],p[8]!==i?(c=(0,l.jsx)(o.u,{portal:!0,placement:"top",content:i,children:r}),p[8]=i,p[9]=c):c=p[9],p[10]!==n||p[11]!==c?(d=(0,l.jsx)(a.xu,{padding:2,children:(0,l.jsxs)(a.gF,{space:2,children:[n,c]})}),p[10]=n,p[11]=c,p[12]=d):d=p[12],d):null};function eV(e){let t,n,i,r,d,u,p;let m=(0,s.c)(25),{icon:h,layout:f,presence:g,schemaType:y,value:b}=e,j=(0,x.Uy$)(b.title)&&(0,c.isValidElement)(b.title)||eI(b.title)||ek(b.title)?b.title:null;m[0]!==e.documentPreviewStore||m[1]!==y||m[2]!==j||m[3]!==b._id?(n=(0,x.eLL)(e.documentPreviewStore,y,b._id,j),m[0]=e.documentPreviewStore,m[1]=y,m[2]=j,m[3]=b._id,m[4]=n):n=m[4],t=n,m[5]===Symbol.for("react.memo_cache_sentinel")?(i={draft:null,isLoading:!0,published:null},m[5]=i):i=m[5];let{draft:v,published:w,isLoading:_}=(0,eu.m)(t,i);m[6]!==v||m[7]!==_||m[8]!==g||m[9]!==w?(r=_?null:(0,l.jsx)(o.uE,{children:(0,l.jsxs)(a.kC,{align:"center",gap:3,children:[g&&g.length>0&&(0,l.jsx)(x.mEJ,{presence:g}),(0,l.jsx)(x.aAo,{draft:v,published:w})]})}),m[6]=v,m[7]=_,m[8]=g,m[9]=w,m[10]=r):r=m[10];let k=r;m[11]!==v||m[12]!==w?(d=(0,l.jsx)(x._mO,{draft:v,published:w}),m[11]=v,m[12]=w,m[13]=d):d=m[13];let I=d;return m[14]!==v||m[15]!==w||m[16]!==b?(u=(0,x.L_b)({value:b,draft:v,published:w}),m[14]=v,m[15]=w,m[16]=b,m[17]=u):u=m[17],m[18]!==h||m[19]!==_||m[20]!==f||m[21]!==k||m[22]!==u||m[23]!==I?(p=(0,l.jsx)(x.ogX,{...u,isPlaceholder:_,icon:h,layout:f,status:k,tooltip:I}),m[18]=h,m[19]=_,m[20]=f,m[21]=k,m[22]=u,m[23]=I,m[24]=p):p=m[24],p}let eB=(0,c.forwardRef)(function(e,t){let n,i,r,o,a;let u=(0,s.c)(9),{routerPanesState:p,groupIndex:m}=(0,c.useContext)(d.ud);return u[0]!==m||u[1]!==p?(i=p.slice(0,m),u[0]=m,u[1]=p,u[2]=i):i=u[2],n=i,u[3]!==n?(o={panes:n},u[3]=n,u[4]=o):o=u[4],r=o,u[5]!==e||u[6]!==t||u[7]!==r?(a=(0,l.jsx)(C.Px,{...e,ref:t,state:r}),u[5]=e,u[6]=t,u[7]=r,u[8]=a):a=u[8],a});function eq(){let e=(0,c.useContext)(d.yq);if(!e)throw Error("PaneLayout: missing context value");return e}let eF=(0,c.forwardRef)(function(e,t){let n,i,r,o,a,u,p,m;let h=(0,s.c)(19);h[0]!==e?({childId:n,childPayload:r,childParameters:i,...o}=e,h[0]=e,h[1]=n,h[2]=i,h[3]=r,h[4]=o):(n=h[1],i=h[2],r=h[3],o=h[4]);let{routerPanesState:f,groupIndex:x}=(0,c.useContext)(d.ud);return h[5]!==x||h[6]!==f?(a=f.slice(0,x+1),h[5]=x,h[6]=f,h[7]=a):a=h[7],h[8]!==n||h[9]!==i||h[10]!==r?(u=[{id:n,params:i,payload:r}],h[8]=n,h[9]=i,h[10]=r,h[11]=u):u=h[11],h[12]!==a||h[13]!==u?(p={panes:[...a,u]},h[12]=a,h[13]=u,h[14]=p):p=h[14],h[15]!==t||h[16]!==o||h[17]!==p?(m=(0,l.jsx)(C.Px,{...o,ref:t,state:p}),h[15]=t,h[16]=o,h[17]=p,h[18]=m):m=h[18],m}),eG=(0,c.forwardRef)(function(e,t){let n,i,r,o,a,u,p,m,h,f,g,y,b;let j=(0,s.c)(34),{routerPanesState:v,groupIndex:w,siblingIndex:_}=(0,c.useContext)(d.ud);j[0]!==e?({params:n,payload:i,...r}=e,j[0]=e,j[1]=n,j[2]=i,j[3]=r):(n=j[1],i=j[2],r=j[3]);let k=(0,x.BoV)(n),I=(0,x.BoV)(i),S=v[w],E=S[_],T=k??E.params,z=I??E.payload;j[4]!==E||j[5]!==T||j[6]!==z?(a={...E,params:T,payload:z},j[4]=E,j[5]=T,j[6]=z,j[7]=a):a=j[7];let $=a;j[8]!==S||j[9]!==_?(u=S.slice(0,_),j[8]=S,j[9]=_,j[10]=u):u=j[10],j[11]!==S||j[12]!==_?(p=S.slice(_+1),j[11]=S,j[12]=_,j[13]=p):p=j[13],j[14]!==$||j[15]!==u||j[16]!==p?(m=[...u,$,...p],j[14]=$,j[15]=u,j[16]=p,j[17]=m):m=j[17];let D=m;j[18]!==v||j[19]!==w?(h=v.slice(0,w),j[18]=v,j[19]=w,j[20]=h):h=j[20],j[21]!==v||j[22]!==w?(f=v.slice(w+1),j[21]=v,j[22]=w,j[23]=f):f=j[23],j[24]!==D||j[25]!==h||j[26]!==f?(g=[...h,D,...f],j[24]=D,j[25]=h,j[26]=f,j[27]=g):g=j[27];let P=g;return j[28]!==P?(y={panes:P},j[28]=P,j[29]=y):y=j[29],o=y,j[30]!==o||j[31]!==t||j[32]!==r?(b=(0,l.jsx)(C.Px,{ref:t,...r,state:o}),j[30]=o,j[31]=t,j[32]=r,j[33]=b):b=j[33],b}),eW=(0,c.forwardRef)(function(e,t){let n,i,r,o,a,c,d,u,p,m;let h=(0,s.c)(22);h[0]!==e?({documentId:i,documentType:r,parentRefPath:o,children:n,template:c,...a}=e,h[0]=e,h[1]=n,h[2]=i,h[3]=r,h[4]=o,h[5]=a,h[6]=c):(n=h[1],i=h[2],r=h[3],o=h[4],a=h[5],c=h[6]);let f=c?.params;return h[7]!==o?(d=(0,S.BB)(o),h[7]=o,h[8]=d):d=h[8],h[9]!==c?(u=c&&{template:c?.id},h[9]=c,h[10]=u):u=h[10],h[11]!==r||h[12]!==d||h[13]!==u?(p={type:r,parentRefPath:d,...u},h[11]=r,h[12]=d,h[13]=u,h[14]=p):p=h[14],h[15]!==n||h[16]!==i||h[17]!==t||h[18]!==a||h[19]!==f||h[20]!==p?(m=(0,l.jsx)(eF,{...a,ref:t,childId:i,childPayload:f,childParameters:p,children:n}),h[15]=n,h[16]=i,h[17]=t,h[18]=a,h[19]=f,h[20]=p,h[21]=m):m=h[21],m});function eK(){return(0,c.useContext)(d.ud)}let eX=[];function eY(e){let t,n,i,r;let o=(0,s.c)(16),{onClick:a,type:c,value:d}=e,u=d?._id;o[0]!==u?(t=(0,x.vsM)(u),o[0]=u,o[1]=t):t=o[1];let p=(0,x.Dqo)(t),m=(0,x.rq_)(),{ReferenceChildLink:h}=eK();o[2]!==h||o[3]!==c?.name||o[4]!==d?._id?(n=function(e){return(0,l.jsx)(h,{documentId:d?._id,documentType:c?.name,parentRefPath:eX,...e})},o[2]=h,o[3]=c?.name,o[4]=d?._id,o[5]=n):n=o[5];let f=n,g=c?.icon,y=p?.length>0?p:eX;return o[6]!==m||o[7]!==g||o[8]!==y||o[9]!==c||o[10]!==d?(i=(0,l.jsx)(eV,{documentPreviewStore:m,icon:g,layout:"compact",presence:y,schemaType:c,value:d}),o[6]=m,o[7]=g,o[8]=y,o[9]=c,o[10]=d,o[11]=i):i=o[11],o[12]!==a||o[13]!==f||o[14]!==i?(r=(0,l.jsx)(x.oUE,{__unstable_focusRing:!0,as:f,"data-as":"a",onClick:a,radius:2,children:i}),o[12]=a,o[13]=f,o[14]=i,o[15]=r):r=o[15],r}function eZ(e){let t,n,i,r,c,d,p,m,h,f,g,y,b,j,v,w,_,k,I,C;let S=(0,s.c)(78),{crossDatasetReferences:E,internalReferences:T,documentTitle:z,totalCount:$,action:D,datasetNames:P,hasUnknownDatasetNames:R,onReferenceLinkClick:L}=e,A=(0,x.I_y)(),M=(0,a.pm)(),{t:O}=(0,x.$G7)(eP);S[0]!==L||S[1]!==A||S[2]!==O?(t=e=>{let t=A.get(e._type);return t?(0,l.jsx)(eY,{type:t,value:e,onClick:L}):(0,l.jsx)(a.xu,{padding:2,children:(0,l.jsx)(x.ogX,{icon:u.Tzq,title:O("confirm-delete-dialog.preview-item.preview-unavailable.title"),subtitle:O("confirm-delete-dialog.preview-item.preview-unavailable.subtitle",{documentId:e._id}),layout:"default"})})},S[0]=L,S[1]=A,S[2]=O,S[3]=t):t=S[3];let N=t;if(T?.totalCount===0&&E?.totalCount===0){let e,t;return S[4]!==z?(e={DocumentTitle:()=>(0,l.jsx)("strong",{children:z})},S[4]=z,S[5]=e):e=S[5],S[6]!==D||S[7]!==O||S[8]!==e?(t=(0,l.jsx)(a.xv,{as:"p",size:1,children:(0,l.jsx)(x.vNl,{t:O,i18nKey:"confirm-delete-dialog.confirmation.text",context:D,components:e})}),S[6]=D,S[7]=O,S[8]=e,S[9]=t):t=S[9],t}if(S[10]!==D||S[11]!==E||S[12]!==P||S[13]!==z||S[14]!==R||S[15]!==T||S[16]!==N||S[17]!==O||S[18]!==M||S[19]!==$){let e,t,s,w;let _=[...P,...R?["unavailable"]:[]],k=O("confirm-delete-dialog.cdr-summary.subtitle",{count:_.length,datasets:_.join(", "),context:R&&_.length?"unavailable":""});r=a.kC,v="column",c=4,S[34]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)(a.xv,{"aria-hidden":"true",size:1,children:(0,l.jsx)(u.foC,{})}),S[34]=e):e=S[34],S[35]!==z?(t={DocumentTitle:()=>z},S[35]=z,S[36]=t):t=S[36],S[37]!==$?(s={count:$},S[37]=$,S[38]=s):s=S[38],S[39]!==O||S[40]!==t||S[41]!==s?(d=(0,l.jsx)(a.Zb,{padding:3,radius:2,tone:"caution",flex:"none",children:(0,l.jsxs)(a.kC,{children:[e,(0,l.jsx)(a.xu,{flex:1,marginLeft:3,children:(0,l.jsx)(a.xv,{size:1,children:(0,l.jsx)(x.vNl,{i18nKey:"confirm-delete-dialog.referring-document-count.text",components:t,t:O,values:s})})})]})}),S[39]=O,S[40]=t,S[41]=s,S[42]=d):d=S[42],S[43]!==z?(w={DocumentTitle:()=>z},S[43]=z,S[44]=w):w=S[44],S[45]!==D||S[46]!==O||S[47]!==w?(p=(0,l.jsx)(a.xu,{flex:"none",children:(0,l.jsx)(a.xv,{size:1,children:(0,l.jsx)(x.vNl,{i18nKey:"confirm-delete-dialog.referring-documents-descriptor.text",t:O,context:D,components:w})})}),S[45]=D,S[46]=O,S[47]=w,S[48]=p):p=S[48],i=a.Zb,g=2,y=1,b="auto",j=2,n=a.kC,m="column",S[49]!==T||S[50]!==N?(h=T.totalCount>0&&(0,l.jsxs)(a.Kq,{as:"ul",marginBottom:2,space:2,"data-testid":"internal-references",children:[T?.references.map(e=>l.jsx(a.xu,{as:"li",children:N(e)},e._id)),T.totalCount>T.references.length&&(0,l.jsx)(a.xu,{as:"li",padding:3,children:(0,l.jsx)(eH,{...T})})]}),S[49]=T,S[50]=N,S[51]=h):h=S[51],f=E.totalCount>0&&(0,l.jsxs)(eM,{"data-testid":"cross-dataset-references",style:{borderTop:T.totalCount>0?"1px solid var(--card-shadow-outline-color)":void 0},children:[(0,l.jsx)(eO,{children:(0,l.jsx)(a.Zb,{as:"a",marginTop:T.totalCount>0?2:0,radius:2,shadow:1,paddingY:1,children:(0,l.jsxs)(a.kC,{align:"center",gap:3,paddingX:3,paddingY:1,children:[(0,l.jsx)(a.xv,{size:1,children:(0,l.jsx)(u.TAM,{})}),(0,l.jsxs)(a.Kq,{space:2,children:[(0,l.jsx)(a.xv,{textOverflow:"ellipsis",size:1,children:O("confirm-delete-dialog.cdr-summary.title",{count:_.length,documentCount:O("confirm-delete-dialog.cdr-summary.document-count",{count:E.totalCount})})}),(0,l.jsx)(a.xv,{title:k,textOverflow:"ellipsis",size:1,muted:!0,children:k})]}),(0,l.jsx)(eA,{children:(0,l.jsx)(a.xv,{muted:!0,size:1,children:(0,l.jsx)(u.v4q,{})})})]})})}),(0,l.jsxs)(a.xu,{overflow:"auto",paddingTop:2,children:[(0,l.jsxs)(eN,{children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:(0,l.jsx)(a.xv,{muted:!0,size:1,style:{minWidth:"5rem"},weight:"medium",children:O("confirm-delete-dialog.cdr-table.project-id.label")})}),(0,l.jsx)("th",{children:(0,l.jsx)(a.xv,{muted:!0,size:1,weight:"medium",children:O("confirm-delete-dialog.cdr-table.dataset.label")})}),(0,l.jsx)("th",{children:(0,l.jsx)(a.xv,{muted:!0,size:1,weight:"medium",children:O("confirm-delete-dialog.cdr-table.document-id.label")})})]})}),(0,l.jsx)("tbody",{children:E.references.filter(eQ).map((e,t)=>{let{projectId:n,datasetName:i,documentId:r}=e;return(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:(0,l.jsx)(a.xv,{size:1,children:n})}),(0,l.jsx)("td",{children:(0,l.jsx)(a.xv,{size:1,children:i||"unavailable"})}),(0,l.jsx)("td",{children:(0,l.jsxs)(eU,{align:"center",gap:2,justify:"flex-end",children:[(0,l.jsx)(a.xv,{textOverflow:"ellipsis",size:1,children:r||"unavailable"}),r&&(0,l.jsx)(o.zx,{mode:"bleed",icon:u.TIy,tooltipProps:{content:O("confirm-delete-dialog.cdr-table.copy-id-button.tooltip")},onClick:()=>{navigator.clipboard.writeText(r).then(()=>{M.push({status:"success",title:O("confirm-delete-dialog.cdr-table.id-copied-toast.title")})}).catch(()=>{M.push({status:"error",title:O("confirm-delete-dialog.cdr-table.id-copied-toast.title-failed")})})}})]})})]},`${r}-${t}`)})})]}),(0,l.jsx)(eH,{...E})]})]}),S[10]=D,S[11]=E,S[12]=P,S[13]=z,S[14]=R,S[15]=T,S[16]=N,S[17]=O,S[18]=M,S[19]=$,S[20]=n,S[21]=i,S[22]=r,S[23]=c,S[24]=d,S[25]=p,S[26]=m,S[27]=h,S[28]=f,S[29]=g,S[30]=y,S[31]=b,S[32]=j,S[33]=v}else n=S[20],i=S[21],r=S[22],c=S[23],d=S[24],p=S[25],m=S[26],h=S[27],f=S[28],g=S[29],y=S[30],b=S[31],j=S[32],v=S[33];return S[52]!==n||S[53]!==m||S[54]!==h||S[55]!==f?(w=(0,l.jsxs)(n,{direction:m,children:[h,f]}),S[52]=n,S[53]=m,S[54]=h,S[55]=f,S[56]=w):w=S[56],S[57]!==i||S[58]!==w||S[59]!==g||S[60]!==y||S[61]!==b||S[62]!==j?(_=(0,l.jsx)(i,{radius:g,shadow:y,flex:b,padding:j,children:w}),S[57]=i,S[58]=w,S[59]=g,S[60]=y,S[61]=b,S[62]=j,S[63]=_):_=S[63],S[64]!==z?(k={DocumentTitle:()=>z},S[64]=z,S[65]=k):k=S[65],S[66]!==D||S[67]!==O||S[68]!==k?(I=(0,l.jsx)(a.xu,{flex:"none",children:(0,l.jsx)(a.xv,{size:1,children:(0,l.jsx)(x.vNl,{i18nKey:"confirm-delete-dialog.referential-integrity-disclaimer.text",t:O,context:D,components:k})})}),S[66]=D,S[67]=O,S[68]=k,S[69]=I):I=S[69],S[70]!==r||S[71]!==c||S[72]!==d||S[73]!==p||S[74]!==_||S[75]!==I||S[76]!==v?(C=(0,l.jsxs)(r,{direction:v,gap:c,children:[d,p,_,I]}),S[70]=r,S[71]=c,S[72]=d,S[73]=p,S[74]=_,S[75]=I,S[76]=v,S[77]=C):C=S[77],C}function eQ(e){return"projectId"in e}let eJ=()=>(i||(i=(0,E.R)(document,"visibilitychange").pipe((0,R.O)(null),(0,P.U)(()=>"visible"===document.visibilityState),(0,Z.x)(),(0,Q.w)(e=>e?(0,T.H)(0,5e3):z.E),(0,J.d)({refCount:!0,bufferSize:1}))),i),e0=(0,x.ek8)(([e,t])=>t.listenQuery({fetch:'{"references":*[references($documentId)][0...100]{_id,_type},"totalCount":count(*[references($documentId)])}',listen:"*[references($documentId)]"},{documentId:e},{tag:"use-referring-documents",transitions:["appear","disappear"],throttleTime:5e3})),e1=(0,x.ek8)(([e,t])=>eJ().pipe((0,Q.w)(()=>(function(e,t){let{versionedClient:n}=t;return eJ().pipe((0,Q.w)(()=>(function(e,{versionedClient:t}){let n=(0,x.qyu)(e),i=(0,x.vsM)(e),r={uri:t.getDataUrl("doc",`${n},${i}`),json:!0,query:{excludeContent:"true"},tag:"use-referring-documents.document-existence"};return t.observable.request(r).pipe((0,P.U)(({omitted:e})=>{let t=e.filter(e=>"existence"===e.reason);if(2!==t.length)return 0===t.length||t.some(e=>e.id===n)?i:n}))})(e,t)),(0,Q.w)(e=>{if(!e)return(0,$.of)({totalCount:0,references:[]});let t=n.config().dataset;return n.observable.request({url:`/data/references/${t}/documents/${e}/to?excludeInternalReferences=true&excludePaths=true`,tag:"use-referring-documents.external"}).pipe((0,L.K)(e=>{if("object"==typeof e&&e&&"statusCode"in e&&"response"in e&&404===e.statusCode)return(0,$.of)({totalCount:0,references:[]});throw e}))}))})(e,{versionedClient:t}))));function e2(e){return"string"!=typeof e.datasetName}function e3(e){return!!e&&""!==e}function e4(e){return e?.datasetName||""}function e5(e){return e.projectId}let e6=(0,_.zo)(a.xu)`
  box-sizing: border-box;
`,e8=(0,_.zo)(a.kC).attrs({align:"center",direction:"column",justify:"center"})`
  height: 110px;
`;function e7(e){let t,n,i,r,a,d,u,p,m,h;let f=(0,s.c)(40),{id:g,type:y,action:b,onCancel:j,onConfirm:v}=e,w=void 0===b?"delete":b,{t:_}=(0,x.$G7)(eP),k=`deletion-confirmation-${(0,c.useId)()}`,{internalReferences:I,crossDatasetReferences:C,isLoading:S,totalCount:E,projectIds:T,datasetNames:z,hasUnknownDatasetNames:$}=function(e){let t,n,i,r,o,l,a,c,d;let u=(0,s.c)(24),p=(0,x.m85)(x.Dr7),m=(0,x.H__)();u[0]!==e?(t=(0,x.vsM)(e),u[0]=e,u[1]=t):t=u[1];let h=t;u[2]!==m||u[3]!==h?(n=[h,m],u[2]=m,u[3]=h,u[4]=n):n=u[4];let[f,g]=e0(n);u[5]!==h||u[6]!==p?(i=[h,p],u[5]=h,u[6]=p,u[7]=i):i=u[7];let[y,b]=e1(i);u[8]!==y?.references?(r=()=>Array.from(new Set(y?.references.map(e5).filter(Boolean))).sort(),u[8]=y?.references,u[9]=r):r=u[9],u[10]!==r?(o=r(),u[10]=r,u[11]=o):o=u[11];let j=o;u[12]!==y?.references?(a=Array.from(new Set(y?.references.map(e4).filter(e3))).sort(),u[12]=y?.references,u[13]=a):a=u[13],l=a,u[14]!==y?.references?(c=()=>!!y?.references.some(e2),u[14]=y?.references,u[15]=c):c=u[15];let v=c(),w=(f?.totalCount||0)+(y?.totalCount||0),_=g||b;return u[16]!==y||u[17]!==l||u[18]!==v||u[19]!==f||u[20]!==j||u[21]!==w||u[22]!==_?(d={totalCount:w,projectIds:j,datasetNames:l,hasUnknownDatasetNames:v,internalReferences:f,crossDatasetReferences:y,isLoading:_},u[16]=y,u[17]=l,u[18]=v,u[19]=f,u[20]=j,u[21]=w,u[22]=_,u[23]=d):d=u[23],d}(g);f[0]!==g||f[1]!==y?(n={_id:g,_type:y},f[0]=g,f[1]=y,f[2]=n):n=f[2],t=n,f[3]!==t?(i=(0,l.jsx)(eL,{document:t}),f[3]=t,f[4]=i):i=f[4];let D=i,P=!S;return f[5]!==w||f[6]!==_?(r=_("confirm-delete-dialog.header.text",{context:w}),f[5]=w,f[6]=_,f[7]=r):r=f[7],f[8]!==_?(a=_("confirm-delete-dialog.cancel-button.text"),f[8]=_,f[9]=a):a=f[9],f[10]!==j||f[11]!==a?(d={onClick:j,text:a},f[10]=j,f[11]=a,f[12]=d):d=f[12],f[13]!==w||f[14]!==v||f[15]!==P||f[16]!==_||f[17]!==E?(u=P?{text:_(E>0?"confirm-delete-dialog.confirm-anyway-button.text":"confirm-delete-dialog.confirm-button.text",{context:w}),onClick:v}:void 0,f[13]=w,f[14]=v,f[15]=P,f[16]=_,f[17]=E,f[18]=u):u=f[18],f[19]!==d||f[20]!==u?(p={cancelButton:d,confirmButton:u},f[19]=d,f[20]=u,f[21]=p):p=f[21],f[22]!==w||f[23]!==C||f[24]!==z||f[25]!==D||f[26]!==$||f[27]!==I||f[28]!==S||f[29]!==j||f[30]!==T||f[31]!==_||f[32]!==E?(m=(0,l.jsx)(e6,{children:C&&I&&!S?(0,l.jsx)(eZ,{crossDatasetReferences:C,internalReferences:I,documentTitle:D,isLoading:S,totalCount:E,action:w,projectIds:T,datasetNames:z,hasUnknownDatasetNames:$,onReferenceLinkClick:j}):(0,l.jsx)(e8,{"data-testid":"loading-container",children:(0,l.jsx)(x.Bwn,{showText:!0,title:_("confirm-delete-dialog.loading.text")})})}),f[22]=w,f[23]=C,f[24]=z,f[25]=D,f[26]=$,f[27]=I,f[28]=S,f[29]=j,f[30]=T,f[31]=_,f[32]=E,f[33]=m):m=f[33],f[34]!==k||f[35]!==j||f[36]!==m||f[37]!==r||f[38]!==p?(h=(0,l.jsx)(o.Vq,{width:1,id:k,header:r,footer:p,onClose:j,onClickOutside:j,children:m}),f[34]=k,f[35]=j,f[36]=m,f[37]=r,f[38]=p,f[39]=h):h=f[39],h}function e9(e){let t,n;let i=(0,s.c)(6),{t:r}=(0,x.$G7)(eP),d=(0,c.useId)(),[u,p]=(0,c.useState)(null);i[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>p(null),i[0]=t):t=i[0];let m=t;return i[1]!==u||i[2]!==d||i[3]!==e||i[4]!==r?(n=u?(0,l.jsx)(o.Vq,{id:`dialog-error-${d}`,"data-testid":"confirm-delete-error-dialog",header:r("confirm-delete-dialog.error.title.text"),footer:{confirmButton:{text:r("confirm-delete-dialog.error.retry-button.text"),onClick:m,tone:"default"}},onClose:e.onCancel,children:(0,l.jsx)(a.xu,{padding:4,children:(0,l.jsx)(a.xv,{size:1,children:r("confirm-delete-dialog.error.message.text")})})}):(0,l.jsx)(o.SV,{onCatch:p,children:(0,l.jsx)(e7,{...e})}),i[1]=u,i[2]=d,i[3]=e,i[4]=r,i[5]=n):n=i[5],n}function te(e){let t,n,i;let r=(0,s.c)(6),{children:o,ms:a}=e,d=void 0===a?0:a,[u,p]=(0,c.useState)(d<=0);if(r[0]!==d?(t=()=>{if(d<=0)return;let e=setTimeout(()=>p(!0),d);return()=>{clearTimeout(e)}},n=[d],r[0]=d,r[1]=t,r[2]=n):(t=r[1],n=r[2]),(0,c.useEffect)(t,n),!u||!o){let e;return r[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)(l.Fragment,{}),r[3]=e):e=r[3],e}return r[4]!==o?(i="function"==typeof o?o():o,r[4]=o,r[5]=i):i=r[5],i}let tt=(0,_.zo)(a.mh)`
  position: relative;
  width: 1px;
  min-width: 1px;

  &:before {
    content: '';
    display: block;
    position: absolute;
    top: 0;
    left: 0;
    bottom: 0;
    width: 1px;
    background-color: var(--card-border-color);
  }

  &:not([data-disabled]) {
    cursor: ew-resize;
    width: 9px;
    min-width: 9px;
    margin: 0 -4px;

    &:before {
      left: 4px;
    }

    &:after {
      content: '';
      display: block;
      position: absolute;
      top: 0;
      left: 0;
      width: 9px;
      bottom: 0;
      background-color: var(--card-border-color);
      opacity: 0;
      transition: opacity 150ms;
    }

    &[data-dragging]:after,
    &:hover:after {
      opacity: 0.2;
    }
  }
`;function tn(e){let t,n;let i=(0,s.c)(7),{disabled:r,element:o}=e,{resize:a}=eq(),[d,u]=(0,c.useState)(!1);i[0]!==o||i[1]!==a?(t=e=>{if(!o)return;u(!0),e.preventDefault();let t=e.pageX;a("start",o,0);let n=e=>{e.preventDefault(),a("move",o,e.pageX-t)},i=e=>{e.preventDefault(),u(!1),window.removeEventListener("mousemove",n),window.removeEventListener("mouseup",i),a("end",o,0)};window.addEventListener("mousemove",n),window.addEventListener("mouseup",i)},i[0]=o,i[1]=a,i[2]=t):t=i[2];let p=t,m=r?"":void 0,h=d?"":void 0;return i[3]!==p||i[4]!==m||i[5]!==h?(n=(0,l.jsx)(tt,{"data-disabled":m,"data-dragging":h,onMouseDown:p}),i[3]=p,i[4]=m,i[5]=h,i[6]=n):n=i[6],n}let ti=(0,_.zo)(a.Zb)`
  outline: none;

  // NOTE: This will render a border to the right side of each pane
  // without taking up physical space.
  box-shadow: 1px 0 0 var(--card-border-color);
`,tr=(0,c.forwardRef)(function(e,t){let n,i,r,o,u,p,m,h,f,g,y,b,j,v,w,_,k,I,C,S,E,T,z,$,D,P,R,L,A,M,O,N;let U=(0,s.c)(86);U[0]!==e?({children:n,currentMinWidth:r,currentMaxWidth:i,flex:h,id:o,minWidth:p,maxWidth:u,selected:f,...m}=e,U[0]=e,U[1]=n,U[2]=i,U[3]=r,U[4]=o,U[5]=u,U[6]=p,U[7]=m,U[8]=h,U[9]=f):(n=U[1],i=U[2],r=U[3],o=U[4],u=U[5],p=U[6],m=U[7],h=U[8],f=U[9]);let H=void 0===h?1:h,V=void 0!==f&&f,[B,q]=(0,c.useState)(null),{collapse:F,collapsed:G,expand:W,expandedElement:K,mount:X,panes:Y}=eq();if(U[10]!==Y||U[11]!==B){let e;U[14]!==B?(e=e=>e.element===B,U[14]=B,U[15]=e):e=U[15],y=(g=Y.find(e))&&Y.indexOf(g),U[10]=Y,U[11]=B,U[12]=g,U[13]=y}else g=U[12],y=U[13];let Z=y,Q="number"==typeof Z?Y[Z+1]:void 0,J=Z===Y.length-1,ee=K===B,et=!G&&(g?.collapsed||!1),en=Q?.collapsed||!1,ei=(0,c.useRef)(null),er=g?.flex??H,eo=g?.currentMinWidth??r,el=g?.currentMaxWidth??i;U[16]===Symbol.for("react.memo_cache_sentinel")?(b=()=>ei.current,U[16]=b):b=U[16],(0,c.useImperativeHandle)(t,b),U[17]===Symbol.for("react.memo_cache_sentinel")?(j=e=>{q(e),ei.current=e},U[17]=j):j=U[17];let es=j;U[18]!==i||U[19]!==r||U[20]!==H||U[21]!==o||U[22]!==u||U[23]!==p||U[24]!==X||U[25]!==B?(v=()=>{if(B)return X(B,{currentMinWidth:r,currentMaxWidth:i,flex:H,id:o,minWidth:p,maxWidth:u})},w=[r,i,H,o,p,u,X,B],U[18]=i,U[19]=r,U[20]=H,U[21]=o,U[22]=u,U[23]=p,U[24]=X,U[25]=B,U[26]=v,U[27]=w):(v=U[26],w=U[27]),(0,c.useLayoutEffect)(v,w),U[28]!==F||U[29]!==B?(_=()=>{B&&F(B)},U[28]=F,U[29]=B,U[30]=_):_=U[30];let ea=_;U[31]!==W||U[32]!==B?(k=()=>{B&&W(B)},U[31]=W,U[32]=B,U[33]=k):k=U[33];let ec=k,ed=!G&&et;U[34]!==ea||U[35]!==ec||U[36]!==J||U[37]!==Z||U[38]!==B||U[39]!==ed?(C={collapse:ea,collapsed:ed,expand:ec,index:Z,isLast:J,rootElement:B},U[34]=ea,U[35]=ec,U[36]=J,U[37]=Z,U[38]=B,U[39]=ed,U[40]=C):C=U[40],I=C;e:{if(G){S=void 0;break e}if(et){S=51;break e}if(0===eo||J){S=p||204;break e}S=eo||p||204}let eu=S;t:{if(et){E=51;break t}if(G&&J){E=void 0;break t}if(J){if(u){E=el??u;break t}E=void 0;break t}E=el??u}let ep=E,em=G&&!J;U[41]!==et||U[42]!==J||U[43]!==G||U[44]!==en||U[45]!==B?(z=!J&&!G&&(0,l.jsx)(x.jr5,{zOffset:"paneResizer",children:(0,l.jsx)(tn,{disabled:et||en,element:B})}),U[41]=et,U[42]=J,U[43]=G,U[44]=en,U[45]=B,U[46]=z):z=U[46],T=z;let eh=ep===1/0?void 0:ep;U[47]!==er||U[48]!==eu||U[49]!==eh?(D={flex:er,minWidth:eu,maxWidth:eh},U[47]=er,U[48]=eu,U[49]=eh,U[50]=D):D=U[50],$=D;let ef=G?void 0:"hidden",ex=et?"":void 0,eg=V?"":void 0;return U[51]!==et||U[52]!==el||U[53]!==eo||U[54]!==ee||U[55]!==er||U[56]!==ep||U[57]!==eu||U[58]!==Z?(P=!1,U[51]=et,U[52]=el,U[53]=eo,U[54]=ee,U[55]=er,U[56]=ep,U[57]=eu,U[58]=Z,U[59]=P):P=U[59],U[60]!==n||U[61]!==em?(R=!em&&(0,l.jsx)(a.kC,{direction:"column",height:"fill",children:n}),U[60]=n,U[61]=em,U[62]=R):R=U[62],U[63]!==B||U[64]!==R?(L=(0,l.jsx)(a.NM,{element:B,children:R}),U[63]=B,U[64]=R,U[65]=L):L=U[65],U[66]!==em||U[67]!==o||U[68]!==Z||U[69]!==m||U[70]!==$||U[71]!==ef||U[72]!==ex||U[73]!==eg||U[74]!==P||U[75]!==L?(A=(0,l.jsxs)(ti,{"data-testid":"pane","data-ui":"Pane",tone:"inherit",hidden:em,id:o,overflow:ef,...m,"data-pane-collapsed":ex,"data-pane-index":Z,"data-pane-selected":eg,ref:es,style:$,children:[P,L]}),U[66]=em,U[67]=o,U[68]=Z,U[69]=m,U[70]=$,U[71]=ef,U[72]=ex,U[73]=eg,U[74]=P,U[75]=L,U[76]=A):A=U[76],U[77]!==J||U[78]!==A?(M=(0,l.jsx)(x.K4Y,{isLastPane:J,children:A}),U[77]=J,U[78]=A,U[79]=M):M=U[79],U[80]!==I||U[81]!==M?(O=(0,l.jsx)(x.jr5,{zOffset:"pane",children:(0,l.jsx)(d.tc.Provider,{value:I,children:M})}),U[80]=I,U[81]=M,U[82]=O):O=U[82],U[83]!==T||U[84]!==O?(N=(0,l.jsxs)(l.Fragment,{children:[O,T]}),U[83]=T,U[84]=O,U[85]=N):N=U[85],N}),to=(0,_.zo)(a.Zb)`
  position: relative;
  outline: none;
`;function tl(){let e=(0,c.useContext)(d.tc);if(!e)throw Error("Pane: missing context value");return e}to.displayName="PaneContent__root";let ts=(0,c.forwardRef)(function(e,t){let n,i,r,o,a,c;let d=(0,s.c)(14);d[0]!==e?({as:n,children:i,overflow:r,padding:o,...a}=e,d[0]=e,d[1]=n,d[2]=i,d[3]=r,d[4]=o,d[5]=a):(n=d[1],i=d[2],r=d[3],o=d[4],a=d[5]);let{collapsed:u}=tl(),{collapsed:p}=eq(),m=p?void 0:r;return d[6]!==n||d[7]!==i||d[8]!==u||d[9]!==o||d[10]!==t||d[11]!==a||d[12]!==m?(c=(0,l.jsx)(to,{"data-testid":"pane-content",forwardedAs:n,...a,flex:1,hidden:u,overflow:m,padding:o,ref:t,tone:"inherit",children:i}),d[6]=n,d[7]=i,d[8]=u,d[9]=o,d[10]=t,d[11]=a,d[12]=m,d[13]=c):c=d[13],c});function ta(e){return e?e.toLocaleLowerCase().replaceAll(" ",""):""}let tc={constrainSize:!0,placement:"left-start",portal:!0};function td(e){let t,n,i,r;let c=(0,s.c)(35),{disabled:d,isAfterGroup:u,node:p}=e,m=(0,x.sr_)("i18n"in p?p:void 0);if("divider"===p.type){let e;return c[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)(a.R,{}),c[0]=e):e=c[0],e}c[1]!==m||c[2]!==p?(t=m(p),c[1]=m,c[2]=p,c[3]=t):t=c[3];let{title:h}=t;if("group"===p.type){let e,t,n,i;if(0===p.children.length)return null;if(p.expanded){let e,t,n;return c[4]!==u?(e=u&&(0,l.jsx)(a.R,{}),c[4]=u,c[5]=e):e=c[5],c[6]!==d||c[7]!==p.children||c[8]!==p.disabled?(t=p.children.map((e,t)=>(0,l.jsx)(td,{disabled:d||!!p.disabled,isAfterGroup:p.children[t-1]?.type==="group",node:e},e.key)),c[6]=d,c[7]=p.children,c[8]=p.disabled,c[9]=t):t=c[9],c[10]!==e||c[11]!==t?(n=(0,l.jsxs)(l.Fragment,{children:[e,t]}),c[10]=e,c[11]=t,c[12]=n):n=c[12],n}c[13]!==u?(e=u&&(0,l.jsx)(a.R,{}),c[13]=u,c[14]=e):e=c[14];let r=p.icon;return c[15]!==d||c[16]!==p.children||c[17]!==p.disabled?(t=p.children.map((e,t)=>(0,l.jsx)(td,{disabled:d||!!p.disabled,isAfterGroup:p.children[t-1]?.type==="group",node:e},e.key)),c[15]=d,c[16]=p.children,c[17]=p.disabled,c[18]=t):t=c[18],c[19]!==d||c[20]!==p.icon||c[21]!==t||c[22]!==h?(n=(0,l.jsx)(o.kS,{disabled:d,icon:r,popover:tc,text:h,children:t}),c[19]=d,c[20]=p.icon,c[21]=t,c[22]=h,c[23]=n):n=c[23],c[24]!==e||c[25]!==n?(i=(0,l.jsxs)(l.Fragment,{children:[e,n]}),c[24]=e,c[25]=n,c[26]=i):i=c[26],i}return c[27]!==u?(n=u&&(0,l.jsx)(a.R,{}),c[27]=u,c[28]=n):n=c[28],c[29]!==d||c[30]!==p?(i=(0,l.jsx)(tu,{disabled:d,node:p}),c[29]=d,c[30]=p,c[31]=i):i=c[31],c[32]!==n||c[33]!==i?(r=(0,l.jsxs)(l.Fragment,{children:[n,i]}),c[32]=n,c[33]=i,c[34]=r):r=c[34],r}function tu(e){let t;let n=(0,s.c)(5),{node:i}=e;if(i.intent){let t;return n[0]!==i.intent||n[1]!==e?(t=(0,l.jsx)(tm,{...e,intent:i.intent}),n[0]=i.intent,n[1]=e,n[2]=t):t=n[2],t}return n[3]!==e?(t=(0,l.jsx)(tp,{...e}),n[3]=e,n[4]=t):t=n[4],t}function tp(e){let t,n,i,r;let c=(0,s.c)(17),{disabled:d,node:p}=e;c[0]!==p.disabled?(t="object"==typeof p.disabled&&(0,l.jsx)(a.xv,{size:1,children:p.disabled.reason}),c[0]=p.disabled,c[1]=t):t=c[1];let m=t,{title:h}=(0,x.v0Z)(p),f=d||!!p.disabled;c[2]!==p.hotkey?(n=p.hotkey?.split("+"),c[2]=p.hotkey,c[3]=n):n=c[3];let g=p.iconRight||p.selected&&u.KML,y=`action-${ta(p.title)}`;return c[4]!==p.icon||c[5]!==p.onAction||c[6]!==p.selected||c[7]!==p.tone||c[8]!==f||c[9]!==n||c[10]!==g||c[11]!==y||c[12]!==h?(i=(0,l.jsx)(o.sN,{disabled:f,hotkeys:n,icon:p.icon,iconRight:g,onClick:p.onAction,pressed:p.selected,text:h,tone:p.tone,"data-testid":y}),c[4]=p.icon,c[5]=p.onAction,c[6]=p.selected,c[7]=p.tone,c[8]=f,c[9]=n,c[10]=g,c[11]=y,c[12]=h,c[13]=i):i=c[13],c[14]!==i||c[15]!==m?(r=(0,l.jsx)(x.xMr,{content:m,placement:"left",children:i}),c[14]=i,c[15]=m,c[16]=r):r=c[16],r}function tm(e){let t,n,i,r,c,d;let p=(0,s.c)(23),{disabled:m,intent:h,node:f}=e;p[0]!==f.disabled?(t="object"==typeof f.disabled&&(0,l.jsx)(a.xv,{size:1,children:f.disabled.reason}),p[0]=f.disabled,p[1]=t):t=p[1];let g=t;p[2]!==h.params||p[3]!==h.type?(n={intent:h.type,params:h.params},p[2]=h.params,p[3]=h.type,p[4]=n):n=p[4];let y=(0,C.PM)(n);p[5]!==y||p[6]!==f?(i=e=>{y.onClick(e),f.onAction()},p[5]=y,p[6]=f,p[7]=i):i=p[7];let b=i,{title:j}=(0,x.v0Z)(f),v=m||!!f.disabled;p[8]!==f.hotkey?(r=f.hotkey?.split("+"),p[8]=f.hotkey,p[9]=r):r=p[9];let w=f.selected?u.KML:void 0;return p[10]!==b||p[11]!==y.href||p[12]!==f.icon||p[13]!==f.selected||p[14]!==f.tone||p[15]!==v||p[16]!==r||p[17]!==w||p[18]!==j?(c=(0,l.jsx)(o.sN,{as:"a",disabled:v,hotkeys:r,href:y.href,icon:f.icon,iconRight:w,onClick:b,pressed:f.selected,text:j,tone:f.tone}),p[10]=b,p[11]=y.href,p[12]=f.icon,p[13]=f.selected,p[14]=f.tone,p[15]=v,p[16]=r,p[17]=w,p[18]=j,p[19]=c):c=p[19],p[20]!==c||p[21]!==g?(d=(0,l.jsx)(x.xMr,{content:g,placement:"left",children:c}),p[20]=c,p[21]=g,p[22]=d):d=p[22],d}let th={constrainSize:!0,placement:"bottom",portal:!0};function tf(e,t){return e.some(e=>"item"===e.type&&e.tone===t||"group"===e.type&&tf(e.children,t))}function tx(e){let t,n,i,r,d;let u=(0,s.c)(13),{nodes:p,actionsNodes:m}=e,h=(0,c.useId)(),f=tf(p,"critical"),g=tf(p,"caution"),y=f?"critical":g?"caution":void 0;return u[0]!==y?(t=(0,l.jsx)(x.lXN,{tone:y,"data-testid":"pane-context-menu-button"}),u[0]=y,u[1]=t):t=u[1],u[2]!==m?(n=m&&(0,l.jsxs)(l.Fragment,{children:[m,(0,l.jsx)(a.R,{})]}),u[2]=m,u[3]=n):n=u[3],u[4]!==p?(i=p.map((e,t)=>{let n=p[t-1]?.type==="group";return(0,l.jsx)(td,{isAfterGroup:n,node:e},e.key)}),u[4]=p,u[5]=i):i=u[5],u[6]!==n||u[7]!==i?(r=(0,l.jsxs)(a.v2,{children:[n,i]}),u[6]=n,u[7]=i,u[8]=r):r=u[8],u[9]!==h||u[10]!==t||u[11]!==r?(d=(0,l.jsx)(o.j2,{button:t,id:h,menu:r,popover:th}),u[9]=h,u[10]=t,u[11]=r,u[12]=d):d=u[12],d}let tg=(0,_.zo)(a.mh)`
  position: sticky;
  bottom: 0;

  &:before {
    content: '';
    display: block;
    position: absolute;
    left: 0;
    right: 0;
    top: -1px;
    border-bottom: 1px solid var(--card-border-color);
  }
`,ty=(0,_.zo)(a.Zb)`
  padding-bottom: env(safe-area-inset-bottom);
`,tb=(0,c.forwardRef)(function(e,t){let n,i;let r=(0,s.c)(7),{children:o,padding:c}=e,{collapsed:d}=tl();return r[0]!==o||r[1]!==c?(n=(0,l.jsx)(ty,{tone:"inherit",children:(0,l.jsx)(a.xu,{padding:c,children:o})}),r[0]=o,r[1]=c,r[2]=n):n=r[2],r[3]!==d||r[4]!==t||r[5]!==n?(i=(0,l.jsx)(x.jr5,{zOffset:"paneFooter",children:(0,l.jsx)(tg,{"data-testid":"pane-footer",hidden:d,ref:t,children:n})}),r[3]=d,r[4]=t,r[5]=n,r[6]=i):i=r[6],i}),tj=(0,_.zo)(a.mh)(({$border:e})=>(0,_.iv)`
    line-height: 0;
    position: sticky;
    top: 0;

    &:not([data-collapsed]):after {
      content: '';
      display: block;
      position: absolute;
      left: 0;
      right: 0;
      bottom: -1px;
      border-bottom: 1px solid ${e?"var(--card-border-color)":"transparent"};
      opacity: 1;
    }
  `),tv=(0,_.zo)(a.kC)`
  transform-origin: calc(51px / 2);

  [data-collapsed] > div > & {
    transform: rotate(90deg);
  }
`,tw=(0,_.zo)(a.Zb)(({theme:e})=>{let{fg:t,bg:n}=e.sanity.color.card.enabled;return(0,_.iv)`
    background-color: ${n};

    [data-ui='Text'] {
      color: ${t};
    }
  `}),t_=(0,_.zo)(a.Qr)`
  width: 66%;
  max-width: 175px;
`,tk=(0,_.zo)(a.xv)`
  cursor: default;
  outline: none;
`,tI=(0,_.zo)(a.xu)(({theme:e})=>{let{color:t,space:n}=e.sanity;return(0,_.iv)`
    overflow: hidden;
    overflow: clip;
    position: relative;

    & > div {
      white-space: nowrap;
      overflow: auto;
      /* Hide scrollbars */
      scrollbar-width: none;
      &::-webkit-scrollbar {
        width: 0;
        height: 0;
      }
    }

    /* right padding */
    & > div:after {
      content: '';
      display: inline-block;
      top: 0;
      right: 0;
      bottom: 0;
      width: ${n[3]}px;
      height: 1px;
    }

    /* Gradient that makes it look like tabs disappear into nothing (looks nicer) */
    &:after {
      content: '';
      display: block;
      position: absolute;
      top: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(to right, ${(0,a.m4)(t.base.bg,0)}, var(--card-bg-color));
      width: ${n[3]}px;
      pointer-events: none;
    }
  `}),tC=(0,c.forwardRef)(function(e,t){let n,i,r,o,c,d,u,p,m,h,f,g,y;let b=(0,s.c)(46),{actions:j,backButton:v,border:w,contentAfter:_,loading:k,subActions:I,tabs:C,tabIndex:S,title:E}=e,{collapse:T,collapsed:z,expand:$,rootElement:D}=tl(),P=(0,a.XL)(D||null),R=z?P?.height||window.innerHeight:void 0;b[0]!==R?(i={width:R},b[0]=R,b[1]=i):i=b[1],n=i,b[2]!==T||b[3]!==z?(r=()=>{z||T()},b[2]=T,b[3]=z,b[4]=r):r=b[4];let L=r;b[5]!==z||b[6]!==$?(o=()=>{z&&$()},b[5]=z,b[6]=$,b[7]=o):o=b[7];let A=o,M=!!(!z&&(C||I)),O=z?"":void 0,N=z?"":void 0,U=z||!M?3:2;b[8]!==v?(c=v&&(0,l.jsx)(a.xu,{flex:"none",children:v}),b[8]=v,b[9]=c):c=b[9];let H=v?1:2;b[10]!==k?(d=k&&(0,l.jsx)(t_,{animated:!0,radius:1,size:1}),b[10]=k,b[11]=d):d=b[11],b[12]!==k||b[13]!==E?(u=!k&&(0,l.jsx)(tk,{size:1,textOverflow:"ellipsis",weight:"semibold",children:E}),b[12]=k,b[13]=E,b[14]=u):u=b[14],b[15]!==L||b[16]!==d||b[17]!==u||b[18]!==H||b[19]!==S?(p=(0,l.jsxs)(tw,{__unstable_focusRing:!0,flex:1,forwardedAs:"button",onClick:L,paddingLeft:H,padding:2,tabIndex:S,children:[d,u]}),b[15]=L,b[16]=d,b[17]=u,b[18]=H,b[19]=S,b[20]=p):p=b[20],b[21]!==j||b[22]!==z?(m=j&&(0,l.jsx)(a.kC,{align:"center",hidden:z,children:(0,l.jsx)(x.jr5,{zOffset:"paneHeader",children:j})}),b[21]=j,b[22]=z,b[23]=m):m=b[23],b[24]!==A||b[25]!==n||b[26]!==p||b[27]!==m||b[28]!==U||b[29]!==c?(h=(0,l.jsxs)(tv,{gap:1,onClick:A,padding:3,paddingBottom:U,sizing:"border",style:n,children:[c,p,m]}),b[24]=A,b[25]=n,b[26]=p,b[27]=m,b[28]=U,b[29]=c,b[30]=h):h=b[30],b[31]!==z||b[32]!==M||b[33]!==I||b[34]!==C?(f=M&&(0,l.jsxs)(a.kC,{align:"center",hidden:z,overflow:"auto",paddingBottom:3,paddingX:3,children:[(0,l.jsx)(tI,{flex:1,marginRight:I?3:0,children:C}),I&&I]}),b[31]=z,b[32]=M,b[33]=I,b[34]=C,b[35]=f):f=b[35];let V=!z&&_&&_;return b[36]!==h||b[37]!==f||b[38]!==V||b[39]!==N?(g=(0,l.jsx)(x.jr5,{zOffset:"paneHeader",children:(0,l.jsxs)(a.Zb,{"data-collapsed":N,tone:"inherit",children:[h,f,V]})}),b[36]=h,b[37]=f,b[38]=V,b[39]=N,b[40]=g):g=b[40],b[41]!==w||b[42]!==t||b[43]!==g||b[44]!==O?(y=(0,l.jsx)(a.li,{zOffset:100,children:(0,l.jsx)(tj,{$border:w,"data-collapsed":O,"data-testid":"pane-header",ref:t,children:g})}),b[41]=w,b[42]=t,b[43]=g,b[44]=O,b[45]=y):y=b[45],y});function tS(e){return e.disabled?{disabledReason:"object"==typeof e.disabled?e.disabled.reason:void 0,ariaLabel:"object"==typeof e.disabled&&"string"==typeof e.disabled?.reason?e.disabled.reason:"This is disabled",isDisabled:!!e.disabled}:{disabledReason:void 0,ariaLabel:void 0,isDisabled:!1}}function tE(e){let t=(0,s.c)(4),{node:n}=e;if("item"===n.type){let e;return t[0]!==n?(e=(0,l.jsx)(tT,{node:n}),t[0]=n,t[1]=e):e=t[1],e}if("group"===n.type){let e;return t[2]!==n?(e=(0,l.jsx)(t$,{node:n}),t[2]=n,t[3]=e):e=t[3],e}return console.warn('unknown menu node (expected `type: "item" | "group"`):',n),null}function tT(e){let t,n,i,r,o;let a=(0,s.c)(23),{node:c}=e,{title:d}=(0,x.v0Z)(c),{t:u}=(0,x.$G7)();if(c.intent){let t;return a[0]!==c.intent||a[1]!==e?(t=(0,l.jsx)(tz,{...e,intent:c.intent}),a[0]=c.intent,a[1]=e,a[2]=t):t=a[2],t}a[3]!==c?(t=tS(c),a[3]=c,a[4]=t):t=a[4];let{disabledReason:p,ariaLabel:m,isDisabled:h}=t;a[5]!==m||a[6]!==u||a[7]!==d?(n=m||d||u("status-button.aria-label"),a[5]=m,a[6]=u,a[7]=d,a[8]=n):n=a[8],a[9]!==h||a[10]!==c.hotkey?(i=!h&&c.hotkey?c.hotkey.split("+"):void 0,a[9]=h,a[10]=c.hotkey,a[11]=i):i=a[11];let f=h?p:d;return a[12]!==i||a[13]!==f?(r={hotkeys:i,content:f},a[12]=i,a[13]=f,a[14]=r):r=a[14],a[15]!==h||a[16]!==c.icon||a[17]!==c.onAction||a[18]!==c.selected||a[19]!==c.tone||a[20]!==n||a[21]!==r?(o=(0,l.jsx)(x.YG6,{disabled:h,icon:c.icon,onClick:c.onAction,selected:c.selected,tone:c.tone,"aria-label":n,tooltipProps:r}),a[15]=h,a[16]=c.icon,a[17]=c.onAction,a[18]=c.selected,a[19]=c.tone,a[20]=n,a[21]=r,a[22]=o):o=a[22],o}function tz(e){let t,n,i,r,o,a,c;let d=(0,s.c)(27),{intent:u,node:p}=e;d[0]!==u.params||d[1]!==u.type?(t={intent:u.type,params:u.params},d[0]=u.params,d[1]=u.type,d[2]=t):t=d[2];let m=(0,C.PM)(t),{t:h}=(0,x.$G7)();d[3]!==m||d[4]!==p?(n=e=>{m.onClick(e),p.onAction()},d[3]=m,d[4]=p,d[5]=n):n=d[5];let f=n;d[6]!==p?(i=tS(p),d[6]=p,d[7]=i):i=d[7];let{disabledReason:g,ariaLabel:y,isDisabled:b}=i;d[8]!==y||d[9]!==p.title||d[10]!==h?(r=y||p.title||h("status-button.aria-label"),d[8]=y,d[9]=p.title,d[10]=h,d[11]=r):r=d[11],d[12]!==b||d[13]!==p.hotkey?(o=!b&&p.hotkey?p.hotkey.split("+"):void 0,d[12]=b,d[13]=p.hotkey,d[14]=o):o=d[14];let j=b?g:p.title;return d[15]!==o||d[16]!==j?(a={hotkeys:o,content:j,placement:"bottom",portal:!0},d[15]=o,d[16]=j,d[17]=a):a=d[17],d[18]!==f||d[19]!==m.href||d[20]!==b||d[21]!==p.icon||d[22]!==p.selected||d[23]!==p.tone||d[24]!==r||d[25]!==a?(c=(0,l.jsx)(x.YG6,{forwardedAs:"a",disabled:b,href:m.href,icon:p.icon,onClick:f,selected:p.selected,tone:p.tone,"aria-label":r,tooltipProps:a}),d[18]=f,d[19]=m.href,d[20]=b,d[21]=p.icon,d[22]=p.selected,d[23]=p.tone,d[24]=r,d[25]=a,d[26]=c):c=d[26],c}function t$(e){let t,n,i,r,d;let p=(0,s.c)(16),{node:m}=e,{title:h}=(0,x.v0Z)(m),f=!!m.disabled,g=m.icon??u.Tzq;p[0]!==m.title?(t={content:m.title,portal:!0},p[0]=m.title,p[1]=t):t=p[1],p[2]!==f||p[3]!==g||p[4]!==t||p[5]!==h?(n=(0,l.jsx)(o.zx,{disabled:f,icon:g,label:h,mode:"bleed",tooltipProps:t}),p[2]=f,p[3]=g,p[4]=t,p[5]=h,p[6]=n):n=p[6];let y=(0,c.useId)();return p[7]!==m.children||p[8]!==m.disabled?(i=m.children.map((e,t)=>(0,l.jsx)(td,{disabled:!!m.disabled,isAfterGroup:m.children[t-1]?.type==="group",node:e},e.key)),p[7]=m.children,p[8]=m.disabled,p[9]=i):i=p[9],p[10]!==i?(r=(0,l.jsx)(a.v2,{children:i}),p[10]=i,p[11]=r):r=p[11],p[12]!==n||p[13]!==y||p[14]!==r?(d=(0,l.jsx)(o.j2,{button:n,id:y,menu:r}),p[12]=n,p[13]=y,p[14]=r,p[15]=d):d=p[15],d}let tD=(0,_.zo)(a.Zb)`
  transition: opacity 200ms;
  position: relative;
  z-index: 1;
  padding-left: env(safe-area-inset-left);
  padding-right: env(safe-area-inset-right);
  opacity: 0;

  &:not([hidden]) {
    display: flex;
  }

  &:not([data-collapsed]) {
    overflow: auto;
  }

  &[data-mounted] {
    opacity: 1;
  }

  &[data-resizing] {
    pointer-events: none;
  }
`,tP=[];function tR(e){let t,n,i,r,o,u,p,m,h,f,x,g,y,b,j,v,w,_;let k=(0,s.c)(41);k[0]!==e?({children:t,minWidth:n,onCollapse:i,onExpand:r,...o}=e,k[0]=e,k[1]=t,k[2]=n,k[3]=i,k[4]=r,k[5]=o):(t=k[1],n=k[2],i=k[3],r=k[4],o=k[5]);let[I]=(0,c.useState)(tL),[C,S]=(0,c.useState)(null),E=a.XL(C)?.width||0,T=void 0!==E&&n?E<n:void 0;k[6]===Symbol.for("react.memo_cache_sentinel")?(u={expandedElement:null,panes:[],resizing:!1},k[6]=u):u=k[6];let[z,$]=(0,c.useState)(u);k[7]!==I||k[8]!==C?(p=()=>I.setRootElement(C),m=[I,C],k[7]=I,k[8]=C,k[9]=p,k[10]=m):(p=k[9],m=k[10]),(0,c.useEffect)(p,m),k[11]!==I||k[12]!==E?(h=()=>I.setRootWidth(E),f=[I,E],k[11]=I,k[12]=E,k[13]=h,k[14]=f):(h=k[13],f=k[14]),(0,c.useEffect)(h,f),k[15]!==I?(x=()=>I.subscribe($),g=[I],k[15]=I,k[16]=x,k[17]=g):(x=k[16],g=k[17]),(0,c.useEffect)(x,g),k[18]!==T||k[19]!==i||k[20]!==r?(y=()=>{void 0!==T&&(T&&i&&i(),!T&&r&&r())},b=[T,i,r],k[18]=T,k[19]=i,k[20]=r,k[21]=y,k[22]=b):(y=k[21],b=k[22]),(0,c.useEffect)(y,b),k[23]!==T||k[24]!==I.collapse||k[25]!==I.expand||k[26]!==I.mount||k[27]!==I.resize||k[28]!==z.expandedElement||k[29]!==z.panes||k[30]!==z.resizing?(v={collapse:I.collapse,collapsed:T,expand:I.expand,expandedElement:z.expandedElement,mount:I.mount,panes:z.panes,resize:I.resize,resizing:z.resizing},k[23]=T,k[24]=I.collapse,k[25]=I.expand,k[26]=I.mount,k[27]=I.resize,k[28]=z.expandedElement,k[29]=z.panes,k[30]=z.resizing,k[31]=v):v=k[31],j=v;let D=T?"":void 0,P=z.resizing?"":void 0,R=E?"":void 0;return k[32]!==t||k[33]!==o||k[34]!==D||k[35]!==P||k[36]!==R?(w=(0,l.jsx)(tD,{"data-ui":"PaneLayout",...o,"data-collapsed":D,"data-resizing":P,"data-mounted":R,ref:S,children:t}),k[32]=t,k[33]=o,k[34]=D,k[35]=P,k[36]=R,k[37]=w):w=k[37],k[38]!==j||k[39]!==w?(_=(0,l.jsx)(d.yq.Provider,{value:j,children:w}),k[38]=j,k[39]=w,k[40]=_):_=k[40],_}function tL(){return function(){let e=[],t=[],n=new WeakMap,i=new Set,r={},o=null,l=0,s=null,a=new Map,c=!1;function d(e){i.delete(e),s=e,u()}return{collapse:function(e){i.add(e),s===e&&(s=null),u()},expand:d,mount:function(e,i){return n.set(e,{...i,original:i}),t.push(e),o&&function(e,t){let n=new WeakMap;for(let i of t)n.set(i,function(e,t){let n=[],i=t;for(;i!==e;){let t=i.parentElement;if(!t)break;let r=Array.from(t.childNodes).indexOf(i);if(n.unshift(r),t===e)break;i=t}return n}(e,i));t.sort((e,t)=>{let i=n.get(e)||tP,r=n.get(t)||tP,o=Math.max(i.length,r.length);for(let e=0;e<o;e+=1){let t=i[e]||-1,n=r[e]||-1;if(t!==n)return t-n}return 0})}(o,t),d(e),()=>{let i=t.indexOf(e);i>-1&&t.splice(i,1),n.delete(e),u()}},resize:function(e,i,o){let l=t.indexOf(i),s=n.get(i);if(!s)return;let d=t[l+1],p=n.get(d);if(p){if("start"===e&&(c=!0,r.left={element:i,flex:s.flex||1,width:i.offsetWidth},r.right={element:d,flex:p.flex||1,width:d.offsetWidth},u()),"move"===e&&r.left&&r.right){a=new Map;let{leftW:e,rightW:t,leftFlex:n,rightFlex:l}=function(e,t,n,i){let r={flex:e.left.flex+e.right.flex,width:e.left.width+e.right.width},o=t.minWidth??204,l=n.minWidth??204,s=Math.min(t.maxWidth||1/0,r.width-l),a=Math.min(n.maxWidth||1/0,r.width-o),c=o-e.left.width,d=e.right.width-a;c<d&&(c=d);let u=e.right.width-l,p=s-e.left.width;u>p&&(u=p);let m=Math.min(Math.max(i,c),u),h=e.left.width+m,f=e.right.width-m;return{leftFlex:h/r.width*r.flex,leftW:h,rightFlex:f/r.width*r.flex,rightW:f}}(r,s,p,o);a.set(i,{flex:n,width:e}),a.set(d,{flex:l,width:t}),u()}if("end"===e){c=!1;let e=a.get(i),t=a.get(d);n.set(i,{...s,currentMinWidth:0,currentMaxWidth:s.maxWidth??1/0,flex:e?.flex??s.flex}),n.set(d,{...p,currentMinWidth:0,currentMaxWidth:s.maxWidth??1/0,flex:t?.flex??p.flex}),a=new Map,delete r.left,delete r.right,u()}}},setRootElement:function(e){o=e},setRootWidth:function(e){l=e,u()},subscribe:function(t){return e.push(t),()=>{let n=e.push(t);n>-1&&e.splice(n,1)}}};function u(){if(!l)return;let r=[];for(let e of t)e!==s&&r.unshift(e);s&&r.unshift(s);let o=new WeakMap,d=r.length,u=r[0],p=l-(d-1)*51;for(let e of r){let t=n.get(e);if(!t)continue;let r=t.currentMinWidth||t.minWidth||204,l=e===u,s=i.has(e),c=r>p,d=!l&&(s||c),m=a.get(e);o.set(e,{element:e,collapsed:d,currentMinWidth:m?.width??t.currentMinWidth,currentMaxWidth:m?.width??t.currentMaxWidth,flex:m?.flex??t.flex??1}),d?p-=51:p-=r-51}let m=[];for(let e of t){let t=o.get(e);t&&m.push(t)}for(let n of e)n({expandedElement:s||t[t.length-1]||null,panes:m,resizing:c})}}()}function tA(e){return("item"===e.type||"group"===e.type)&&e.renderAsButton}let tM=eS(tA);function tO(e){let{fieldActions:t=[],menuItems:n,menuItemGroups:i}=e,r=[],o=0;for(let e=0;e<t.length;e+=1){let n=t[e];r.push(function e(t,n){return"divider"===t.type?{type:"divider",key:n}:"group"===t.type?{type:"group",key:n,children:t.children.map((t,i)=>e(t,`${n}-${i}-${t.type}`)),disabled:t.disabled,expanded:t.expanded??!0,icon:t.icon,title:t.title,i18n:t.i18n,renderAsButton:t.renderAsButton??!1}:{type:"item",key:n,intent:t.intent,disabled:t.disabled,icon:t.icon,iconRight:t.iconRight,onAction:t.onAction,renderAsButton:t.renderAsButton??!1,selected:t.selected,title:t.title,i18n:t.i18n,tone:t.tone}}(n,`${e}-${n.type}`))}o+=r.length;let l=[];for(let e of i)l.find(t=>t.key===e.id)||l.push({type:"group",key:e.id,children:[],expanded:!0,renderAsButton:!1,title:e.title,i18n:e.i18n});let s=[];for(let t=0;t<n.length;t+=1){let i=n[t],r=i.group&&l.find(e=>e.key===i.group);i.group&&!r&&(r={type:"group",key:i.group,expanded:!0,icon:i.icon,title:i.group,children:[],renderAsButton:!1},l.push(r)),r?r.children.push({type:"item",key:`${o+t}-item`,hotkey:i.shortcut,icon:i.icon,intent:i.intent,onAction:()=>e.actionHandler(i),renderAsButton:i.showAsAction??!1,selected:i.selected,title:i.title,i18n:i.i18n,tone:i.tone}):s.push({type:"item",key:`${o+t}-item`,hotkey:i.shortcut,icon:i.icon,intent:i.intent,onAction:()=>e.actionHandler(i),renderAsButton:i.showAsAction??!1,selected:i.selected,title:i.title,i18n:i.i18n,tone:i.tone})}return[...s,...l,...r]}let tN=(0,c.forwardRef)(function(e,t){let n,i,r,a,d;let u=(0,s.c)(11);return u[0]!==e?({intent:n,...i}=e,u[0]=e,u[1]=n,u[2]=i):(n=u[1],i=u[2]),u[3]!==n.params||u[4]!==n.type?(a=(0,c.forwardRef)(function(e,t){return(0,l.jsx)(C.nR,{...e,intent:n.type,params:n.params,ref:t})}),u[3]=n.params,u[4]=n.type,u[5]=a):a=u[5],r=a,u[6]!==r||u[7]!==e.disabled||u[8]!==t||u[9]!==i?(d=e.disabled?(0,l.jsx)(o.zx,{...i,as:"a",role:"link","aria-disabled":"true"}):(0,l.jsx)(o.zx,{...i,as:r,"data-as":"a",ref:t}),u[6]=r,u[7]=e.disabled,u[8]=t,u[9]=i,u[10]=d):d=u[10],d});function tU(e){let t,n,i;let r=(0,s.c)(12),{reveal:a,context:c,loading:d,children:u}=e,p=(0,x.xJ)(),{t:m}=(0,x.$G7)(eP);if(!a){let e;return r[0]!==u?(e=(0,l.jsx)(l.Fragment,{children:u}),r[0]=u,r[1]=e):e=r[1],e}return r[2]!==c||r[3]!==p||r[4]!==d||r[5]!==m?(t=d?m("insufficient-permissions-message-tooltip.loading-text"):(0,l.jsx)(x.FMn,{context:c,currentUser:p}),r[2]=c,r[3]=p,r[4]=d,r[5]=m,r[6]=t):t=r[6],r[7]!==u?(n=(0,l.jsx)("div",{children:u}),r[7]=u,r[8]=n):n=r[8],r[9]!==t||r[10]!==n?(i=(0,l.jsx)(o.u,{content:t,portal:!0,children:n}),r[9]=t,r[10]=n,r[11]=i):i=r[11],i}let tH={constrainSize:!0,placement:"bottom",portal:!0},tV=(e,t,n)=>{let i=t.find(e=>e.id===n.templateId)?.schemaType;if(!i)return null;let r={template:n.templateId,type:i,id:n.initialDocumentId};return{type:"create",params:n.parameters?[r,n.parameters]:r}};function tB(e){let t,n,i,r,d,p,m,h,f;let g=(0,s.c)(59),{templateItems:y}=e,b=(0,x.I_y)(),j=(0,x.zEW)(),{t:v}=(0,x.$G7)(eP);g[0]!==y||g[1]!==j?(t=[...y,...j],g[0]=y,g[1]=j,g[2]=t):t=g[2];let w=(0,x.sr_)(t);g[3]!==y?(n={templateItems:y},g[3]=y,g[4]=n):n=g[4];let[_,k]=(0,x.UMU)(n);i=!k&&_?.every(tF);e:{let e;if(!_){let e;g[5]===Symbol.for("react.memo_cache_sentinel")?(e={},g[5]=e):e=g[5],r=e;break e}g[6]!==_?(e=_.reduce(tq,{}),g[6]=_,g[7]=e):e=g[7],r=e}let I=r;if(i){let e,t,n;return g[8]!==v?(e=v("pane-header.disabled-created-button.aria-label"),g[8]=v,g[9]=e):e=g[9],g[10]!==e?(t=(0,l.jsx)(o.zx,{"aria-label":e,icon:u.dtP,"data-testid":"action-intent-button",disabled:!0,mode:"bleed",tooltipProps:null}),g[10]=e,g[11]=t):t=g[11],g[12]!==k||g[13]!==t?(n=(0,l.jsx)(tU,{context:"create-document-type",reveal:!0,loading:k,children:t}),g[12]=k,g[13]=t,g[14]=n):n=g[14],n}if(1===y.length){let e,t,n,i,r;let o=y[0],s=!I[o.id]?.granted;g[15]!==o||g[16]!==b||g[17]!==j?(e=tV(b,j,o),g[15]=o,g[16]=b,g[17]=j,g[18]=e):e=g[18];let a=e;if(!a)return null;g[19]!==o||g[20]!==w?(t=w(o),g[19]=o,g[20]=w,g[21]=t):t=g[21];let c=o.icon||u.dtP;return g[22]!==s||g[23]!==v?(n=s?null:{content:v("pane-header.create-new-button.tooltip")},g[22]=s,g[23]=v,g[24]=n):n=g[24],g[25]!==s||g[26]!==a||g[27]!==t.title||g[28]!==c||g[29]!==n?(i=(0,l.jsx)(tN,{"aria-label":t.title,icon:c,intent:a,mode:"bleed",disabled:s,"data-testid":"action-intent-button",tooltipProps:n}),g[25]=s,g[26]=a,g[27]=t.title,g[28]=c,g[29]=n,g[30]=i):i=g[30],g[31]!==s||g[32]!==k||g[33]!==i?(r=(0,l.jsx)(tU,{reveal:s,loading:k,context:"create-document-type",children:i}),g[31]=s,g[32]=k,g[33]=i,g[34]=r):r=g[34],r}if(g[35]!==v?(d=v("pane-header.create-new-button.tooltip"),g[35]=v,g[36]=d):d=g[36],g[37]!==d?(p=(0,l.jsx)(o.zx,{icon:u.dtP,mode:"bleed","data-testid":"multi-action-intent-button",tooltipProps:{content:d}}),g[37]=d,g[38]=p):p=g[38],g[39]!==w||g[40]!==k||g[41]!==I||g[42]!==b||g[43]!==v||g[44]!==y||g[45]!==j){let e;g[47]!==w||g[48]!==k||g[49]!==I||g[50]!==b||g[51]!==v||g[52]!==j?(e=(e,t)=>{let n=!I[e.id]?.granted,i=tV(b,j,e),r=j.find(t=>t.id===e.templateId);if(!r||!i)return null;let s=(0,c.forwardRef)((e,t)=>n?(0,l.jsx)("button",{type:"button",disabled:!0,...e,ref:t}):(0,l.jsx)(C.nR,{...e,intent:i.type,params:i.params,ref:t}));s.displayName="Link";let{title:a}=w({...e,title:e.title||w(r).title});return(0,l.jsx)(tU,{context:"create-document-type",reveal:n,loading:k,children:(0,l.jsx)(o.sN,{as:s,"data-as":n?"button":"a",text:a,"aria-label":n?v("pane-header.disabled-created-button.aria-label"):a,disabled:n,"data-testid":`action-intent-button-${t}`})},e.id)},g[47]=w,g[48]=k,g[49]=I,g[50]=b,g[51]=v,g[52]=j,g[53]=e):e=g[53],m=y.map(e),g[39]=w,g[40]=k,g[41]=I,g[42]=b,g[43]=v,g[44]=y,g[45]=j,g[46]=m}else m=g[46];return g[54]!==m?(h=(0,l.jsx)(a.v2,{children:m}),g[54]=m,g[55]=h):h=g[55],g[56]!==p||g[57]!==h?(f=(0,l.jsx)(o.j2,{button:p,id:"create-menu",menu:h,popover:tH}),g[56]=p,g[57]=h,g[58]=f):f=g[58],f}function tq(e,t){return e[t.id]=t,e}function tF(e){return!e.granted}function tG(e){return null!=e}let tW=e=>{let t=e=>"object"==typeof e&&e?Array.isArray(e)?e.map(t):Object.entries(e).sort(([e],[t])=>e.localeCompare(t,"en")):e;return JSON.stringify(t(JSON.parse(JSON.stringify(e))))},tK=(0,c.memo)(function(e){let{initialValueTemplateItems:t=x.LZ8,menuItems:n=x.LZ8,menuItemGroups:i=x.LZ8,actionHandlers:r=x.NuZ}=e,o=(0,x.zEW)(),s=(0,c.useCallback)(e=>{if("string"==typeof e.action&&!(e.action in r))return console.warn("No handler for action:",e.action),!1;let t="function"==typeof e.action?e.action:"string"==typeof e.action?r[e.action]:null;return!!t&&(t(e.params),!0)},[r]),d=(0,c.useMemo)(()=>tO({actionHandler:s,menuItemGroups:i,menuItems:n.filter(e=>e.intent?.type!=="create")}),[s,i,n]),u=(0,c.useMemo)(()=>d.filter(tA),[d]),p=(0,c.useMemo)(()=>d.filter(tM),[d]),m=(0,c.useMemo)(()=>n.map((e,t)=>{if(e.intent?.type!=="create")return null;let{params:n}=e.intent;if(!n)return null;let i=Array.isArray(n)?n[0]:n,r=Array.isArray(n)?n[1]:void 0,l=i.template||i.type;if(!l)return null;let s=o.find(e=>e.id===l);return s?{item:e,template:s,templateParams:r,menuItemIndex:t,initialDocumentId:i.id}:null}).filter(tG).map(({initialDocumentId:e,item:t,template:n,menuItemIndex:i,templateParams:r})=>({id:`menuItem${i}`,initialDocumentId:e,templateId:n.id,type:"initialValueTemplateItem",title:t.title||n.title,i18n:t.i18n||n.i18n,icon:t.icon,description:n.description,parameters:r,schemaType:n.schemaType})),[n,o]),h=(0,c.useMemo)(()=>eC([...m,...t],e=>tW([e.initialDocumentId,e.templateId,e.parameters])),[m,t]);return(0,l.jsxs)(a.kC,{gap:1,children:[h.length>0&&(0,l.jsx)(tB,{templateItems:h}),u.map(e=>(0,l.jsx)(tE,{node:e},e.key)),p.length>0&&(0,l.jsx)(tx,{nodes:p})]})});function tX(e){let t,n,i,r,o,a,c;let d=(0,s.c)(16),{t:u}=(0,x.$G7)(eP),{layout:p,value:m}=e;return d[0]===Symbol.for("react.memo_cache_sentinel")?(t={Code:"code"},d[0]=t):t=d[0],d[1]!==m._type?(n={documentType:m._type},d[1]=m._type,d[2]=n):n=d[2],d[3]!==u||d[4]!==n?(i=(0,l.jsx)("em",{children:(0,l.jsx)(x.vNl,{t:u,i18nKey:"pane-item.missing-schema-type.title",components:t,values:n})}),d[3]=u,d[4]=n,d[5]=i):i=d[5],d[6]===Symbol.for("react.memo_cache_sentinel")?(r={Code:"code"},d[6]=r):r=d[6],d[7]!==m._id?(o={documentId:m._id},d[7]=m._id,d[8]=o):o=d[8],d[9]!==u||d[10]!==o?(a=(0,l.jsx)(x.vNl,{t:u,i18nKey:"pane-item.missing-schema-type.subtitle",components:r,values:o}),d[9]=u,d[10]=o,d[11]=a):a=d[11],d[12]!==p||d[13]!==i||d[14]!==a?(c=(0,l.jsx)(x.ogX,{title:i,subtitle:a,media:tY,layout:p}),d[12]=p,d[13]=i,d[14]=a,d[15]=c):c=d[15],c}function tY(){return(0,l.jsx)(u.foC,{})}function tZ(e,t,n){return!1!==e&&(e||t&&t.icon||n||!1)}function tQ(e){let t,n,i,r,o,d,p,m;let h=(0,s.c)(42),{icon:f,id:y,layout:b,pressed:j,schemaType:v,selected:w,title:_,value:k,margin:I,marginBottom:C,marginTop:S}=e,E=void 0===b?"default":b,T=(0,x.I_y)(),z=(0,x.rq_)(),{ChildLink:$}=eK(),D=(0,x.Dqo)(y),P=!!(v&&v.name&&T.get(v.name)),[R,L]=(0,c.useState)(!1);e:{let e,n,i,r;if(k&&(0,g.Si)(k)){let e,n;if(!v||!P){let e;h[0]!==k?(e=(0,l.jsx)(tX,{value:k}),h[0]=k,h[1]=e):e=h[1],t=e;break e}h[2]!==f||h[3]!==v?(e=tZ(f,v,u.$lS),h[2]=f,h[3]=v,h[4]=e):e=h[4],h[5]!==D||h[6]!==z||h[7]!==E||h[8]!==v||h[9]!==e||h[10]!==k?(n=(0,l.jsx)(eV,{documentPreviewStore:z,icon:e,layout:E,schemaType:v,value:k,presence:D}),h[5]=D,h[6]=z,h[7]=E,h[8]=v,h[9]=e,h[10]=k,h[11]=n):n=h[11],t=n;break e}h[12]===Symbol.for("react.memo_cache_sentinel")?(e={opacity:.5},h[12]=e):e=h[12],h[13]===Symbol.for("react.memo_cache_sentinel")?(n=(0,l.jsx)(a.xu,{style:e,children:(0,l.jsx)(a.xv,{muted:!0,size:1,children:(0,l.jsx)(u.XCv,{})})}),h[13]=n):n=h[13],h[14]!==f||h[15]!==v?(i=tZ(f,v,u.ROc),h[14]=f,h[15]=v,h[16]=i):i=h[16],h[17]!==i||h[18]!==_?(r=(0,l.jsx)(x.ogX,{status:n,icon:i,layout:"compact",title:_}),h[17]=i,h[18]=_,h[19]=r):r=h[19],t=r}let A=t;h[20]===Symbol.for("react.memo_cache_sentinel")?(n=e=>{if(e.metaKey){L(!1);return}L(!0)},h[20]=n):n=h[20];let M=n;h[21]===Symbol.for("react.memo_cache_sentinel")?(i=()=>L(!1),h[21]=i):i=h[21],h[22]!==w?(r=[w],h[22]=w,h[23]=r):r=h[23],(0,c.useEffect)(i,r);let[O,N]=(0,c.useState)(!1),U=(0,c.useRef)(null);h[24]===Symbol.for("react.memo_cache_sentinel")?(o=()=>{U.current=setTimeout(()=>(0,c.startTransition)(()=>N(!0)),400)},h[24]=o):o=h[24];let H=o;h[25]===Symbol.for("react.memo_cache_sentinel")?(d=()=>{U.current&&clearTimeout(U.current),(0,c.startTransition)(()=>N(!1))},h[25]=d):d=h[25];let V=d,B=`pane-item-${_}`,q=w||R;return h[26]!==y||h[27]!==O||h[28]!==v||h[29]!==k?(p=O&&v?.name&&k&&(0,g.Si)(k)&&(0,l.jsx)(tJ,{documentId:y,documentType:v.name}),h[26]=y,h[27]=O,h[28]=v,h[29]=k,h[30]=p):p=h[30],h[31]!==y||h[32]!==I||h[33]!==C||h[34]!==S||h[35]!==j||h[36]!==A||h[37]!==p||h[38]!==B||h[39]!==$||h[40]!==q?(m=(0,l.jsxs)(x.oUE,{"data-testid":B,__unstable_focusRing:!0,as:$,childId:y,"data-as":"a",margin:I,marginBottom:C,marginTop:S,onClick:M,onMouseEnter:H,onMouseLeave:V,pressed:j,radius:2,selected:q,sizing:"border",tabIndex:-1,tone:"inherit",children:[A,p]}),h[31]=y,h[32]=I,h[33]=C,h[34]=S,h[35]=j,h[36]=A,h[37]=p,h[38]=B,h[39]=$,h[40]=q,h[41]=m):m=h[41],m}function tJ(e){let{documentId:t,documentType:n}=e;return(0,x.iav)(t,n),null}tJ.displayName="PreloadDocumentPane";let t0=(0,c.memo)(e=>{let t;let n=(0,s.c)(6),{actions:i,children:r,actionProps:o,onActionComplete:a,group:c}=e;return n[0]!==o||n[1]!==i||n[2]!==r||n[3]!==c||n[4]!==a?(t=(0,l.jsx)(x.duV,{onReset:a,hooks:i,args:o,group:c,children:r}),n[0]=o,n[1]=i,n[2]=r,n[3]=c,n[4]=a,n[5]=t):t=n[5],t});t0.displayName="Memo(RenderActionCollectionState)";let t1=(0,c.memo)(e=>{let t;let n=(0,s.c)(4),{badges:i,children:r,badgeProps:o}=e;return n[0]!==o||n[1]!==i||n[2]!==r?(t=(0,l.jsx)(x.duV,{hooks:i,args:o,children:r}),n[0]=o,n[1]=i,n[2]=r,n[3]=t):t=n[3],t});function t2(e){let t,n,i;let r=(0,s.c)(12),{children:o,currentMinWidth:c,flex:d,minWidth:u,paneKey:p,title:m,tone:h}=e,f=void 0===m?"Error":m,x=void 0===h?"critical":h;return r[0]!==f?(t=(0,l.jsx)(tC,{title:f}),r[0]=f,r[1]=t):t=r[1],r[2]!==o?(n=(0,l.jsx)(ts,{overflow:"auto",children:(0,l.jsx)(a.xu,{paddingX:4,paddingY:5,children:o})}),r[2]=o,r[3]=n):n=r[3],r[4]!==c||r[5]!==d||r[6]!==u||r[7]!==p||r[8]!==t||r[9]!==n||r[10]!==x?(i=(0,l.jsxs)(tr,{currentMinWidth:c,flex:d,id:p,minWidth:u,tone:x,children:[t,n]}),r[4]=c,r[5]=d,r[6]=u,r[7]=p,r[8]=t,r[9]=n,r[10]=x,r[11]=i):i=r[11],i}function t3(e){let t=[{ms:300,messageKey:"panes.resolving.default-message"},{ms:5e3,messageKey:"panes.resolving.slow-resolve-message"}];if(x.r8Q){let n=["Check console for errors?","Is your observable/promise resolving?",e.length>0?`Structure path: ${e.join("  ")}`:""];t.push({ms:1e4,message:n.join(`
`)})}let n=(0,$.of)(null);return(0,D.T)(...t.map(e=>n.pipe((0,ee.h)("messageKey"in e?{messageKey:e.messageKey}:{message:e.message}),(0,et.g)(e.ms))))}t1.displayName="Memo(RenderBadgeCollectionState)";let t4=(0,_.zo)(a.kC)`
  opacity: 0;
  transition: opacity 200ms;

  &[data-mounted] {
    opacity: 1;
  }
`,t5=(0,c.memo)(e=>{let t,n,i,r,o,d,u,p,m,h;let f=(0,s.c)(28),{delay:g,flex:y,message:b,minWidth:j,paneKey:v,path:w,selected:_,title:k,tone:I}=e,C=void 0===g?300:g,S=void 0===b?t3:b,{t:E}=(0,x.$G7)(eP);e:{if("function"==typeof S){let e;f[0]!==S||f[1]!==w?(e=S(w?w.split(";"):[]),f[0]=S,f[1]=w,f[2]=e):e=f[2],t=e;break e}t=S}let T=t;f[3]!==T||f[4]!==E?(n=()=>"string"==typeof T?T:E("panes.resolving.default-message"),f[3]=T,f[4]=E,f[5]=n):n=f[5];let[z,$]=(0,c.useState)(n);f[6]!==T||f[7]!==E?(i=()=>{if("object"!=typeof T||"function"!=typeof T.subscribe)return;let e=T.subscribe(e=>{$("messageKey"in e?E(e.messageKey):e.message)});return()=>e.unsubscribe()},r=[T,E],f[6]=T,f[7]=E,f[8]=i,f[9]=r):(i=f[8],r=f[9]),(0,c.useEffect)(i,r);let[D,P]=(0,c.useState)(null),[R,L]=(0,c.useState)(!1);f[10]!==D?(o=()=>{if(D)return(0,a.RE)(()=>L(!0))},d=[D],f[10]=D,f[11]=o,f[12]=d):(o=f[11],d=f[12]),(0,c.useEffect)(o,d);let A=R?"":void 0,M=k||z;f[13]!==M?(u=(0,l.jsx)(x.Bwn,{showText:!0,title:M}),f[13]=M,f[14]=u):u=f[14],f[15]!==u||f[16]!==A?(p=(0,l.jsx)(t4,{align:"center","data-mounted":A,direction:"column",height:"fill",justify:"center",ref:P,children:u}),f[15]=u,f[16]=A,f[17]=p):p=f[17];let O=p;return f[18]!==O||f[19]!==C?(m=(0,l.jsx)(ts,{children:O}),f[18]=O,f[19]=C,f[20]=m):m=f[20],f[21]!==y||f[22]!==j||f[23]!==v||f[24]!==_||f[25]!==m||f[26]!==I?(h=(0,l.jsx)(tr,{flex:y,id:v,minWidth:j,selected:_,tone:I,children:m}),f[21]=y,f[22]=j,f[23]=v,f[24]=_,f[25]=m,f[26]=I,f[27]=h):h=f[27],h});function t6(){let e=(0,c.useContext)(d.cO);if(!e)throw Error("DocumentPane: missing context value");return e}function t8(e){let t,n;let i=(0,s.c)(8),{children:r,documentId:o,documentType:a}=e;return i[0]!==r||i[1]!==o||i[2]!==a?(t=(0,l.jsx)(t7,{documentId:o,documentType:a,children:r}),i[0]=r,i[1]=o,i[2]=a,i[3]=t):t=i[3],i[4]!==o||i[5]!==a||i[6]!==t?(n=(0,l.jsx)(x.EM1,{documentId:o,documentType:a,children:t}),i[4]=o,i[5]=a,i[6]=t,i[7]=n):n=i[7],n}function t7(e){let t,n,i,r,o,a;let d=(0,s.c)(23),{children:u,documentId:p,documentType:m}=e,{enabled:h}=(0,x.g7N)(),{connectionState:f,onPathOpen:g,inspector:y,openInspector:b}=t6(),{params:j,setParams:v,createPathWithParams:w}=eK(),_=j?.comment,k=(0,c.useRef)(j);d[0]!==j?(t=()=>{k.current=j},n=[j],d[0]=j,d[1]=t,d[2]=n):(t=d[1],n=d[2]),(0,c.useLayoutEffect)(t,n),d[3]!==w?(i=e=>{let t=w({...k.current,comment:e,inspect:x.q$K});return`${window.location.origin}${t}`},d[3]=w,d[4]=i):i=d[4];let I=i;d[5]!==v?(r=()=>{v({...k.current,comment:void 0})},d[5]=v,d[6]=r):r=d[6];let C=r;d[7]!==y?.name||d[8]!==b?(o=()=>{y?.name!==x.q$K&&b(x.q$K)},d[7]=y?.name,d[8]=b,d[9]=o):o=d[9];let S=o;if(!h){let e;return d[10]!==u?(e=(0,l.jsx)(l.Fragment,{children:u}),d[10]=u,d[11]=e):e=d[11],e}let E=y?.name===x.q$K,T="connecting"===f;return d[12]!==u||d[13]!==p||d[14]!==m||d[15]!==I||d[16]!==C||d[17]!==S||d[18]!==g||d[19]!==_||d[20]!==E||d[21]!==T?(a=(0,l.jsx)(x.Cr6,{documentId:p,documentType:m,getCommentLink:I,isCommentsOpen:E,isConnecting:T,onClearSelectedComment:C,onCommentsOpen:S,onPathOpen:g,selectedCommentId:_,sortOrder:"desc",type:"field",children:u}),d[12]=u,d[13]=p,d[14]=m,d[15]=I,d[16]=C,d[17]=S,d[18]=g,d[19]=_,d[20]=E,d[21]=T,d[22]=a):a=d[22],a}t5.displayName="Memo(LoadingPane)";let t9=!1,ne={},nt=Symbol("LOADING_PANE"),nn="documentPanelPortalElement";function ni(){let e=(0,c.useContext)(d.r1);if(!e)throw Error("StructureTool: missing context value");return e}let nr={},no="inspect:",nl=[{id:"inspectors"},{id:"links"}],ns="sanity/structure/history";function na(e){let{documentId:t,documentType:n,inspectors:i,onMenuItems:r}=e,o=i.length,[a,d]=(0,c.useState)(()=>Array.from(Array(o)));(0,c.useEffect)(()=>{if(a.length!==o){let e=Array.from(Array(o));for(let t=0;t<o;t++)e[t]=a[t];d(e)}},[o,a]);let u=(0,c.useCallback)((e,t)=>{d(n=>{let i=[...n];return i[e]=t,i})},[]);(0,c.useEffect)(()=>{r(a.filter(Boolean))},[a,r]);let p=(0,c.useMemo)(()=>i.map((e,i)=>e.useMenuItem?[function({documentId:e,documentType:t,index:n,setMenuItem:i,useMenuItem:r}){return(0,c.memo)(function(){let o,l,a;let d=(0,s.c)(4);d[0]===Symbol.for("react.memo_cache_sentinel")?(o={documentId:e,documentType:t},d[0]=o):o=d[0];let u=r(o),p=(0,x.BoV)(u);return d[1]!==p?(l=()=>{i(n,p)},a=[p],d[1]=p,d[2]=l,d[3]=a):(l=d[2],a=d[3]),(0,c.useEffect)(l,a),null})}({documentId:t,documentType:n,index:i,setMenuItem:u,useMenuItem:e.useMenuItem}),e.name]:[()=>null,""]),[t,n,i,u]);return(0,l.jsx)(l.Fragment,{children:p.map(([e,t])=>t&&(0,l.jsx)(e,{},t))})}function nc(){let e,t;let n=(0,s.c)(19),{connectionState:i,schemaType:r,title:o,editState:l}=t6(),a=l?.draft||l?.published,c=!!a,{t:d}=(0,x.$G7)(eP);n[0]!==a||n[1]!==r||n[2]!==c?(e={enabled:c,schemaType:r,value:a},n[0]=a,n[1]=r,n[2]=c,n[3]=e):e=n[3];let{error:u,value:p}=(0,x._2T)(e);if("connecting"===i&&!c){let e;return n[4]===Symbol.for("react.memo_cache_sentinel")?(e={error:void 0,title:void 0},n[4]=e):e=n[4],e}if(o){let e;return n[5]!==o?(e={error:void 0,title:o},n[5]=o,n[6]=e):e=n[6],e}if(!a){let e,t;let i=r?.title||r?.name;return n[7]!==d||n[8]!==i?(e=d("panes.document-header-title.new.text",{schemaType:i}),n[7]=d,n[8]=i,n[9]=e):e=n[9],n[10]!==e?(t={error:void 0,title:e},n[10]=e,n[11]=t):t=n[11],t}if(u){let e,t;return n[12]!==u.message||n[13]!==d?(e=d("panes.document-list-pane.error.text",{error:u.message}),n[12]=u.message,n[13]=d,n[14]=e):e=n[14],n[15]!==e?(t={error:e,title:void 0},n[15]=e,n[16]=t):t=n[16],t}let m=p?.title;return n[17]!==m?(t={error:void 0,title:m},n[17]=m,n[18]=t):t=n[18],t}na.displayName="DocumentInspectorMenuItemsResolver";let nd=["patch","commit"],nu=(0,c.memo)(function(){let e,t,n,i,r;let o=(0,s.c)(12),{push:d}=(0,a.pm)(),{documentId:u,documentType:p,value:m}=t6(),h=nc(),f=h.error,g=(0,x.E6V)(u,p),y=(0,c.useRef)(g),b=eK(),{t:j}=(0,x.$G7)(eP);e:{if(!h.title&&!f&&!nd.includes(g?.op)&&"string"==typeof m.title&&g?.type==="success"){e=m.title;break e}e=h.title}let v=e;o[0]!==j||o[1]!==v?(t=v||j("panes.document-operation-results.operation-undefined-title"),o[0]=j,o[1]=v,o[2]=t):t=o[2];let w=t;o[3]!==w?(n=w.length>25?`${w.slice(0,25)}...`:w,o[3]=w,o[4]=n):n=o[4];let _=n;return o[5]!==_||o[6]!==g||o[7]!==b||o[8]!==d||o[9]!==j?(i=()=>{let e;if(g&&g!==y.current)return"error"===g.type&&d({closable:!0,duration:3e4,status:"error",title:j("panes.document-operation-results.operation-error",{context:g.op}),description:(0,l.jsxs)("details",{children:[(0,l.jsx)("summary",{children:j("panes.document-operation-results.error.summary.title")}),g.error.message]})}),"success"!==g.type||nd.includes(g.op)||d({closable:!0,status:"success",title:(0,l.jsx)(x.vNl,{context:g.op,i18nKey:"panes.document-operation-results.operation-success",t:j,values:{op:g.op,title:_},components:{Strong:"strong"}})}),"success"===g.type&&"delete"===g.op&&(e=setTimeout(()=>b.closeCurrentAndAfter(),0)),y.current=g,()=>clearTimeout(e)},r=[g,b,d,j,_],o[5]=_,o[6]=g,o[7]=b,o[8]=d,o[9]=j,o[10]=i,o[11]=r):(i=o[10],r=o[11]),(0,c.useEffect)(i,r),null}),np=e=>!0===e.liveEdit,nm=(0,_.zo)(a.Zb)({position:"relative",zIndex:1,lineHeight:0});function nh(e){let t,n,i,r,c,d,p,m,h,f,g,y;let b=(0,s.c)(25);b[0]!==e?({as:i,children:t,closeButtonLabel:n,onClose:r,title:d,...c}=e,b[0]=e,b[1]=t,b[2]=n,b[3]=i,b[4]=r,b[5]=c,b[6]=d):(t=b[1],n=b[2],i=b[3],r=b[4],c=b[5],d=b[6]);let{t:j}=(0,x.$G7)(eP);return b[7]!==d?(p=(0,l.jsx)(a.xu,{flex:1,padding:3,children:(0,l.jsx)(a.xv,{as:"h1",size:1,weight:"medium",children:d})}),b[7]=d,b[8]=p):p=b[8],b[9]!==j?(m=j("document-inspector.close-button.tooltip"),b[9]=j,b[10]=m):m=b[10],b[11]!==m?(h={content:m},b[11]=m,b[12]=h):h=b[12],b[13]!==n||b[14]!==r||b[15]!==h?(f=(0,l.jsx)(a.xu,{flex:"none",padding:1,children:(0,l.jsx)(o.zx,{"aria-label":n,icon:u.Two,mode:"bleed",onClick:r,tooltipProps:h})}),b[13]=n,b[14]=r,b[15]=h,b[16]=f):f=b[16],b[17]!==p||b[18]!==f?(g=(0,l.jsxs)(a.kC,{padding:2,children:[p,f]}),b[17]=p,b[18]=f,b[19]=g):g=b[19],b[20]!==t||b[21]!==i||b[22]!==c||b[23]!==g?(y=(0,l.jsxs)(nm,{...c,as:i,children:[g,t]}),b[20]=t,b[21]=i,b[22]=c,b[23]=g,b[24]=y):y=b[24],y}let nf=_.zo.div`
  position: absolute;
  top: 0;
  left: -4px;
  bottom: 0;
  width: 9px;
  z-index: 201;
  cursor: ew-resize;

  /* Border */
  & > span:nth-child(1) {
    display: block;
    border-left: 1px solid var(--card-border-color);
    position: absolute;
    top: 0;
    left: 4px;
    bottom: 0;
    transition: opacity 200ms;
  }

  /* Hover effect */
  & > span:nth-child(2) {
    display: block;
    position: absolute;
    top: 0;
    left: 0;
    width: 9px;
    bottom: 0;
    background-color: var(--card-border-color);
    opacity: 0;
    transition: opacity 150ms;
  }

  @media (hover: hover) {
    &:hover > span:nth-child(2) {
      opacity: 0.2;
    }
  }
`;function nx(e){let t,n,i,r;let o=(0,s.c)(7),{onResize:a,onResizeStart:d}=e,u=(0,c.useRef)(0);o[0]!==a||o[1]!==d?(t=e=>{e.preventDefault(),u.current=e.pageX,d();let t=e=>{e.preventDefault(),a(e.pageX-u.current)},n=()=>{window.removeEventListener("mousemove",t),window.removeEventListener("mouseup",n)};window.addEventListener("mousemove",t),window.addEventListener("mouseup",n)},o[0]=a,o[1]=d,o[2]=t):t=o[2];let p=t;return o[3]===Symbol.for("react.memo_cache_sentinel")?(n=(0,l.jsx)("span",{}),i=(0,l.jsx)("span",{}),o[3]=n,o[4]=i):(n=o[3],i=o[4]),o[5]!==p?(r=(0,l.jsxs)(nf,{onMouseDown:p,children:[n,i]}),o[5]=p,o[6]=r):r=o[6],r}let ng=(0,_.zo)(a.xu)`
  position: relative;
  flex: 1;
  padding-left: 1px;
`;function ny(e){let t,n,i,r,o,a,d,u,p,m,h;let f=(0,s.c)(24);f[0]!==e?({as:n,children:t,minWidth:r,maxWidth:i,...o}=e,f[0]=e,f[1]=t,f[2]=n,f[3]=i,f[4]=r,f[5]=o):(t=f[1],n=f[2],i=f[3],r=f[4],o=f[5]);let[x,g]=(0,c.useState)(null),y=(0,c.useRef)(void 0),[b,j]=(0,c.useState)();f[6]!==x?.offsetWidth?(a=()=>{y.current=x?.offsetWidth},f[6]=x?.offsetWidth,f[7]=a):a=f[7];let v=a;f[8]!==i||f[9]!==r?(d=e=>{let t=y.current;t&&j(Math.min(Math.max(t-e,r),i))},f[8]=i,f[9]=r,f[10]=d):d=f[10];let w=d;return f[11]!==i||f[12]!==r||f[13]!==b?(p=b?{flex:"none",width:b}:{minWidth:r,maxWidth:i},f[11]=i,f[12]=r,f[13]=b,f[14]=p):p=f[14],u=p,f[15]!==w||f[16]!==v?(m=(0,l.jsx)(nx,{onResize:w,onResizeStart:v}),f[15]=w,f[16]=v,f[17]=m):m=f[17],f[18]!==t||f[19]!==n||f[20]!==o||f[21]!==u||f[22]!==m?(h=(0,l.jsxs)(ng,{as:n,...o,ref:g,style:u,children:[t,m]}),f[18]=t,f[19]=n,f[20]=o,f[21]=u,f[22]=m,f[23]=h):h=f[23],h}function nb(e){let t,n,i;let r=(0,s.c)(14),{documentId:o,documentType:c,flex:d}=e,{collapsed:u}=tl(),{closeInspector:p,inspector:m}=t6(),{features:h}=ni();r[0]!==p||r[1]!==m?(t=()=>{m&&p(m.name)},r[0]=p,r[1]=m,r[2]=t):t=r[2];let f=t;if(u||!m)return null;let x=m.component;r[3]!==x||r[4]!==o||r[5]!==c||r[6]!==f?(n=(0,l.jsx)(x,{onClose:f,documentId:o,documentType:c}),r[3]=x,r[4]=o,r[5]=c,r[6]=f,r[7]=n):n=r[7];let g=n;if(h.resizablePanes){let e;return r[8]!==g||r[9]!==d?(e=(0,l.jsx)(ny,{as:"aside","data-ui":"DocumentInspectorPanel",flex:d,maxWidth:540,minWidth:320,children:g}),r[8]=g,r[9]=d,r[10]=e):e=r[10],e}return r[11]!==g||r[12]!==d?(i=(0,l.jsx)(a.xu,{as:"aside","data-ui":"DocumentInspectorPanel",flex:d,children:g}),r[11]=g,r[12]=d,r[13]=i):i=r[13],i}function nj(e,t,n){let i,r,o,l,a;let c=(0,s.c)(16),d=(0,x.tJW)();c[0]!==t||c[1]!==e?(i=["studio.structure-tool",e,t].filter(Boolean),c[0]=t,c[1]=e,c[2]=i):i=c[2];let u=i.join(".");if(c[3]!==n||c[4]!==d||c[5]!==u){let e;c[7]!==n?(e=e=>null===e?n:e,c[7]=n,c[8]=e):e=c[8],o=d.getKey(u).pipe((0,P.U)(e)),c[3]=n,c[4]=d,c[5]=u,c[6]=o}else o=c[6];r=o;let p=(0,eu.m)(r,n);c[9]!==d||c[10]!==u||c[11]!==p?(l=e=>{e!==p&&d.setKey(u,e)},c[9]=d,c[10]=u,c[11]=p,c[12]=l):l=c[12];let m=l;return c[13]!==m||c[14]!==p?(a=[p,m],c[13]=m,c[14]=p,c[15]=a):a=c[15],a}let nv={id:"parsed",title:"document-inspector.view-mode.parsed"},nw={id:"raw",title:"document-inspector.view-mode.raw-json"},n_=[nv,nw],nk=new ec({maxSize:1e3});function nI(e){let{path:t}=e,n=nk.get(t);void 0!==n&&nk.set(t,!n)}function nC(e){let t=window.getSelection();if(t){let n=document.createRange();t.removeAllRanges(),n.selectNodeContents(e),t.addRange(n)}}function nS(e){nC(e.currentTarget)}function nE(e){65===e.keyCode&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),nC(e.currentTarget))}let nT=_.zo.div(({theme:e})=>{let{color:t,fonts:n,space:i}=e.sanity;return(0,_.iv)`
    & .json-inspector,
    & .json-inspector .json-inspector__selection {
      font-family: ${n.code.family};
      font-size: ${n.code.sizes[1].fontSize}px;
      line-height: ${n.code.sizes[1].lineHeight}px;
      color: var(--card-code-fg-color);
    }

    & .json-inspector .json-inspector__leaf {
      padding-left: ${(0,a.hO)(i[4])};
    }

    & .json-inspector .json-inspector__leaf.json-inspector__leaf_root {
      padding-top: ${(0,a.hO)(i[3])};
      padding-left: 0;
    }

    & .json-inspector > .json-inspector__leaf_root > .json-inspector__line > .json-inspector__key {
      display: none;
    }

    & .json-inspector .json-inspector__line {
      display: block;
      position: relative;
      cursor: default;
    }

    & .json-inspector .json-inspector__line::after {
      content: '';
      position: absolute;
      top: 0;
      left: -200px;
      right: -50px;
      bottom: 0;
      z-index: -1;
      pointer-events: none;
    }

    & .json-inspector .json-inspector__line:hover::after {
      background: var(--card-code-bg-color);
    }

    & .json-inspector .json-inspector__leaf_composite > .json-inspector__line {
      cursor: pointer;
    }

    & .json-inspector .json-inspector__leaf_composite > .json-inspector__line::before {
      content: ' ';
      margin-left: calc(0 - ${(0,a.hO)(i[4])} + 3px);
      font-size: ${n.code.sizes[1].fontSize}px;
      line-height: ${n.code.sizes[1].lineHeight}px;
    }

    &
      .json-inspector
      .json-inspector__leaf_expanded.json-inspector__leaf_composite
      > .json-inspector__line::before {
      content: ' ';
      font-size: ${n.code.sizes[1].fontSize}px;
      line-height: ${n.code.sizes[1].lineHeight}px;
    }

    & .json-inspector .json-inspector__radio,
    & .json-inspector .json-inspector__flatpath {
      display: none;
    }

    & .json-inspector .json-inspector__value {
      margin-left: ${(0,a.hO)(i[4]/2)};
    }

    &
      .json-inspector
      > .json-inspector__leaf_root
      > .json-inspector__line
      > .json-inspector__key
      + .json-inspector__value {
      margin: 0;
    }

    & .json-inspector .json-inspector__key {
      color: ${t.syntax.property};
    }

    & .json-inspector .json-inspector__value_helper,
    & .json-inspector .json-inspector__value_null {
      color: ${t.syntax.constant};
    }

    & .json-inspector .json-inspector__not-found {
      padding-top: ${(0,a.hO)(i[3])};
    }

    & .json-inspector .json-inspector__value_string {
      color: ${t.syntax.string};
    }

    & .json-inspector .json-inspector__value_boolean {
      color: ${t.syntax.boolean};
    }

    & .json-inspector .json-inspector__value_number {
      color: ${t.syntax.number};
    }

    & .json-inspector .json-inspector__show-original {
      display: inline-block;
      padding: 0 6px;
      cursor: pointer;
    }

    & .json-inspector .json-inspector__show-original:hover {
      color: inherit;
    }

    & .json-inspector .json-inspector__show-original::before {
      content: '';
    }

    & .json-inspector .json-inspector__show-original:hover::after {
      content: ' expand';
    }
  `});function nz(e){let t,n,i;let r=(0,s.c)(8),{onChange:o,query:c}=e;r[0]!==o?(t=e=>o(e.target.value),r[0]=o,r[1]=t):t=r[1];let d=t,{t:p}=(0,x.$G7)(eP);r[2]!==p?(n=p("document-inspector.search.placeholder"),r[2]=p,r[3]=n):n=r[3];let m=c||"";return r[4]!==d||r[5]!==n||r[6]!==m?(i=(0,l.jsx)(a.oi,{icon:u.W1M,onChange:d,placeholder:n,radius:2,value:m}),r[4]=d,r[5]=n,r[6]=m,r[7]=i):i=r[7],i}function n$(e){let t,n,i,r,c,d,u,p,m,h,f,g,y,b,j,v;let w=(0,s.c)(49),{value:_}=e,{onInspectClose:k,paneKey:I}=t6(),C=`${I}_inspect_`,[S,E]=nj("inspect-view-mode",null,"parsed");w[0]!==S?(t=n_.find(e=>e.id===S),w[0]=S,w[1]=t):t=w[1];let T=t;w[2]!==E?(n=()=>{E(nv.id)},w[2]=E,w[3]=n):n=w[3];let z=n;w[4]!==E?(i=()=>{E(nw.id)},w[4]=E,w[5]=i):i=w[5];let $=i,{t:D}=(0,x.$G7)(eP),P=`${C}dialog`;w[6]!==D||w[7]!==_?(r=(0,x.Uy$)(_)&&(0,x.HD0)(_._id)&&(0,x.HD0)(_._type)?(0,l.jsx)(x.vNl,{t:D,i18nKey:"document-inspector.dialog.title",components:{DocumentTitle:()=>(0,l.jsx)("em",{children:(0,l.jsx)(eL,{document:_})})}}):(0,l.jsx)("em",{children:D("document-inspector.dialog.title-no-value")}),w[6]=D,w[7]=_,w[8]=r):r=w[8],w[9]===Symbol.for("react.memo_cache_sentinel")?(c={position:"sticky",bottom:0,zIndex:3},w[9]=c):c=w[9];let R=`${C}tabpanel`,L=`${C}tab-${nv.id}`;w[10]!==D?(d=D(nv.title),w[10]=D,w[11]=d):d=w[11];let A=T===nv;w[12]!==z||w[13]!==R||w[14]!==L||w[15]!==d||w[16]!==A?(u=(0,l.jsx)(o.OK,{"aria-controls":R,id:L,label:d,onClick:z,selected:A}),w[12]=z,w[13]=R,w[14]=L,w[15]=d,w[16]=A,w[17]=u):u=w[17];let M=`${C}tabpanel`,O=`${C}tab-${nw.id}`;w[18]!==D?(p=D(nw.title),w[18]=D,w[19]=p):p=w[19];let N=T===nw;w[20]!==$||w[21]!==M||w[22]!==O||w[23]!==p||w[24]!==N?(m=(0,l.jsx)(o.OK,{"aria-controls":M,id:O,label:p,onClick:$,selected:N}),w[20]=$,w[21]=M,w[22]=O,w[23]=p,w[24]=N,w[25]=m):m=w[25],w[26]!==u||w[27]!==m?(h=(0,l.jsx)(a.Zb,{padding:3,paddingTop:0,shadow:1,style:c,children:(0,l.jsxs)(a.td,{space:1,children:[u,m]})}),w[26]=u,w[27]=m,w[28]=h):h=w[28];let U=`${C}tab-${S}`,H=`${C}tabpanel`;return w[29]===Symbol.for("react.memo_cache_sentinel")?(f={outline:"none"},w[29]=f):f=w[29],w[30]!==_||w[31]!==T?(g=T===nv&&(0,l.jsx)(nT,{children:(0,l.jsx)(ea.P,{data:_,isExpanded:function e(t,n){let i=nk.get(t);return void 0===i?(nk.set(t,Array.isArray(n)||(0,x.Uy$)(n)),e(t,n)):i},onClick:nI,search:nz,filterOptions:{ignoreCase:!0}})}),w[30]=_,w[31]=T,w[32]=g):g=w[32],w[33]!==_||w[34]!==T?(y=T===nw&&(0,l.jsx)(a.EK,{language:"json",tabIndex:0,onKeyDown:nE,onDoubleClick:nS,onFocus:nS,size:1,children:JSON.stringify(_,null,2)}),w[33]=_,w[34]=T,w[35]=y):y=w[35],w[36]!==U||w[37]!==H||w[38]!==g||w[39]!==y?(b=(0,l.jsxs)(a.x4,{"aria-labelledby":U,flex:1,id:H,overflow:"auto",padding:4,style:f,children:[g,y]}),w[36]=U,w[37]=H,w[38]=g,w[39]=y,w[40]=b):b=w[40],w[41]!==h||w[42]!==b?(j=(0,l.jsxs)(a.kC,{direction:"column",height:"fill",children:[h,b]}),w[41]=h,w[42]=b,w[43]=j):j=w[43],w[44]!==k||w[45]!==j||w[46]!==P||w[47]!==r?(v=(0,l.jsx)(o.Vq,{bodyHeight:"fill",id:P,header:r,onClose:k,onClickOutside:k,padding:!1,width:2,children:j}),w[44]=k,w[45]=j,w[46]=P,w[47]=r,w[48]=v):v=w[48],v}function nD(e){let t,n,i,r,c,d,u,p,m,h;let f=(0,s.c)(20);f[0]!==e?({action:n,content:i,icon:t,tone:c,...r}=e,f[0]=e,f[1]=t,f[2]=n,f[3]=i,f[4]=r,f[5]=c):(t=f[1],n=f[2],i=f[3],r=f[4],c=f[5]);let x=void 0===c?"transparent":c;return f[6]!==t?(d=t&&(0,l.jsx)(a.xv,{size:0,children:(0,l.jsx)(t,{})}),f[6]=t,f[7]=d):d=f[7],f[8]!==i?(u=(0,l.jsx)(a.kC,{align:"center",flex:1,gap:2,paddingY:3,children:i}),f[8]=i,f[9]=u):u=f[9],f[10]!==n?(p=n&&(0,l.jsx)(o.zx,{...n,mode:n.mode||"ghost",tone:n.tone||"default"}),f[10]=n,f[11]=p):p=f[11],f[12]!==d||f[13]!==u||f[14]!==p?(m=(0,l.jsxs)(a.kC,{align:"center",gap:3,children:[d,u,p]}),f[12]=d,f[13]=u,f[14]=p,f[15]=m):m=f[15],f[16]!==r||f[17]!==m||f[18]!==x?(h=(0,l.jsx)(a.Zb,{borderBottom:!0,paddingX:4,paddingY:2,tone:x,...r,children:m}),f[16]=r,f[17]=m,f[18]=x,f[19]=h):h=f[19],h}function nP(e){let t,n,i,r,o;let c=(0,s.c)(17),{revisionId:d}=e,{documentId:p,documentType:m}=t6(),{restore:h}=(0,x.d9t)(p,m),{navigateIntent:f}=(0,C.tv)();c[0]!==p||c[1]!==m||c[2]!==f||c[3]!==h||c[4]!==d?(t=()=>{d&&(h.execute(d),f("edit",{id:p,type:m}))},c[0]=p,c[1]=m,c[2]=f,c[3]=h,c[4]=d,c[5]=t):t=c[5];let g=t,{t:y}=(0,x.$G7)(eP);return c[6]!==g||c[7]!==d||c[8]!==y?(n=d?{onClick:g,text:y("banners.deleted-document-banner.restore-button.text")}:void 0,c[6]=g,c[7]=d,c[8]=y,c[9]=n):n=c[9],c[10]!==y?(i=y("banners.deleted-document-banner.text"),c[10]=y,c[11]=i):i=c[11],c[12]!==i?(r=(0,l.jsx)(a.xv,{size:1,weight:"medium",children:i}),c[12]=i,c[13]=r):r=c[13],c[14]!==n||c[15]!==r?(o=(0,l.jsx)(nD,{action:n,content:r,"data-testid":"deleted-document-banner",icon:u.CPA}),c[14]=n,c[15]=r,c[16]=o):o=c[16],o}function nR(){let e,t;let n=(0,s.c)(5),{schemaType:i}=t6(),{t:r}=(0,x.$G7)(eP);return(0,g.Ax)(i)?(n[0]!==r?(e=(0,l.jsx)(x.vNl,{t:r,i18nKey:"banners.deprecated-document-type-banner.text"}),n[0]=r,n[1]=e):e=n[1],n[2]!==i.deprecated.reason||n[3]!==e?(t=(0,l.jsx)(nD,{content:(0,l.jsxs)(a.xv,{size:1,weight:"medium",children:[e," ",i.deprecated.reason]}),"data-testid":"deprecated-document-type-banner",icon:u.uIy}),n[2]=i.deprecated.reason,n[3]=e,n[4]=t):t=n[4],t):null}let nL=(0,ep.dS)({name:"Ask To Edit Dialog Opened",version:1,description:'User clicked the "Ask to edit" button in the document permissions banner'}),nA=(0,ep.dS)({name:"Ask To Edit Request Sent",version:1,description:"User sent a role change request from the dialog"}),nM=(0,_.zo)(a.xu)`
  box-sizing: border-box;
`;function nO(e){let t,n,i,r,d,u,p,m,h,f,g,y,b,j,v;let w=(0,s.c)(56),{onClose:_,onRequestSubmitted:k}=e,{t:I}=(0,x.$G7)(eP),C=(0,ed.f1)(),S=`request-permissions-${(0,c.useId)()}`,E=(0,x.vpR)();w[0]===Symbol.for("react.memo_cache_sentinel")?(t={apiVersion:"2024-09-26"},w[0]=t):t=w[0];let T=(0,x.m85)(t),z=(0,a.pm)(),D=(0,x.Cnp)(),[A,M]=(0,c.useState)(!1),[O,N]=(0,c.useState)(""),[U,H]=(0,c.useState)(),[V,B]=(0,c.useState)(!1),[q,F]=(0,c.useState)(!1);e:{let e;let t="administrator";if(!E||!T){let e;w[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,$.of)(t),w[1]=e):e=w[1],n=e;break e}if(w[2]!==T.observable||w[3]!==E){let n,i;w[5]===Symbol.for("react.memo_cache_sentinel")?(n=e=>e.filter(nU).find(nN)?"editor":t,w[5]=n):n=w[5],w[6]===Symbol.for("react.memo_cache_sentinel")?(i=()=>(0,$.of)(t),w[6]=i):i=w[6],e=T.observable.request({url:`/projects/${E}/roles`}).pipe((0,P.U)(n),(0,R.O)(t),(0,L.K)(i)),w[2]=T.observable,w[3]=E,w[4]=e}else e=w[4];n=e}let G=(0,eu.m)(n);w[7]!==T||w[8]!==O||w[9]!==k||w[10]!==E||w[11]!==G||w[12]!==C||w[13]!==z?(i=()=>{M(!0),T.request({url:`/access/project/${E}/requests`,method:"post",body:{note:O,requestUrl:window?.location.href,requestedRole:G,type:"role"}}).then(e=>{e&&(k&&k(),C.log(nA),z.push({title:"Edit access requested"}))}).catch(e=>{let t=e?.response?.statusCode,n=e?.response?.body?.message;429===t&&(B(!0),H(n)),409===t?(F(!0),H(n)):z.push({title:"There was a problem submitting your request.",status:"error"})}).finally(()=>{M(!1)})},w[7]=T,w[8]=O,w[9]=k,w[10]=E,w[11]=G,w[12]=C,w[13]=z,w[14]=i):i=w[14];let W=i,K=D.fullscreen;w[15]!==I?(r=I("request-permission-dialog.header.text"),w[15]=I,w[16]=r):r=w[16],w[17]!==I?(d=I("confirm-dialog.cancel-button.fallback-text"),w[17]=I,w[18]=d):d=w[18],w[19]!==_||w[20]!==d?(u={onClick:_,text:d},w[19]=_,w[20]=d,w[21]=u):u=w[21];let X=V||q;return w[22]!==I?(p=I("request-permission-dialog.confirm-button.text"),w[22]=I,w[23]=p):p=w[23],w[24]!==A||w[25]!==W||w[26]!==X||w[27]!==p?(m={onClick:W,loading:A,disabled:X,text:p,tone:"primary",type:"submit"},w[24]=A,w[25]=W,w[26]=X,w[27]=p,w[28]=m):m=w[28],w[29]!==m||w[30]!==u?(h={cancelButton:u,confirmButton:m},w[29]=m,w[30]=u,w[31]=h):h=w[31],w[32]!==I?(f=I("request-permission-dialog.description.text"),w[32]=I,w[33]=f):f=w[33],w[34]!==f?(g=(0,l.jsx)(a.xv,{children:f}),w[34]=f,w[35]=g):g=w[35],w[36]!==q||w[37]!==V||w[38]!==A||w[39]!==U||w[40]!==O||w[41]!==W||w[42]!==I?(y=V||q?(0,l.jsx)(a.Zb,{tone:"caution",padding:3,radius:2,shadow:1,children:(0,l.jsxs)(a.xv,{size:1,children:[V&&(0,l.jsx)(l.Fragment,{children:U??I("request-permission-dialog.warning.limit-reached.text")}),q&&(0,l.jsx)(l.Fragment,{children:U??I("request-permission-dialog.warning.denied.text")})]})}):(0,l.jsxs)(a.Kq,{space:3,paddingBottom:0,children:[(0,l.jsx)(a.oi,{placeholder:I("request-permission-dialog.note-input.placeholder.text"),disabled:A,onKeyDown:e=>{"Enter"===e.key&&W()},maxLength:150,value:O,onChange:e=>{N(e.currentTarget.value)}}),(0,l.jsx)(a.xv,{align:"right",muted:!0,size:1,children:`${O.length}/150`})]}),w[36]=q,w[37]=V,w[38]=A,w[39]=U,w[40]=O,w[41]=W,w[42]=I,w[43]=y):y=w[43],w[44]!==g||w[45]!==y?(b=(0,l.jsx)(nM,{children:(0,l.jsxs)(a.Kq,{space:4,children:[g,y]})}),w[44]=g,w[45]=y,w[46]=b):b=w[46],w[47]!==S||w[48]!==_||w[49]!==h||w[50]!==b||w[51]!==r?(j=(0,l.jsx)(o.Vq,{width:1,id:S,header:r,footer:h,onClose:_,onClickOutside:_,children:b}),w[47]=S,w[48]=_,w[49]=h,w[50]=b,w[51]=r,w[52]=j):j=w[52],w[53]!==j||w[54]!==D.fullscreen?(v=(0,l.jsx)(a.Tu,{position:"fixed",zOffset:K,children:j}),w[53]=j,w[54]=D.fullscreen,w[55]=v):v=w[55],v}function nN(e){return"editor"===e.name}function nU(e){return e?.appliesToUsers}(0,_.zo)(a.kC).attrs({align:"center",direction:"column",justify:"center"})`
  height: 110px;
`;let nH={loading:!0,error:!1,status:void 0},nV={loading:!1,error:!1,status:"none"},nB={loading:!1,error:!1,status:"declined"},nq={loading:!1,error:!1,status:"pending"},nF={loading:!1,error:!1,status:"expired"},nG=()=>{let e,t,n;let i=(0,s.c)(9);i[0]===Symbol.for("react.memo_cache_sentinel")?(e={apiVersion:"2024-07-01"},i[0]=e):e=i[0];let r=(0,x.m85)(e),o=(0,x.vpR)();e:{let e;if(!r||!o){let e;i[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,$.of)(nV),i[1]=e):e=i[1],t=e;break e}i[2]!==r||i[3]!==o?(e=r.observable.request({url:"/access/requests/me",tag:"use-role-requests-status"}).pipe((0,P.U)(e=>{if(!e||0===e.length)return nV;let t=e.filter(e=>e.resourceId===o&&"role"===e.type),n=t.find(e=>"declined"===e.status);return n&&(0,em.Z)((0,eh.Z)(new Date(n.createdAt),2),new Date)?nB:t.find(e=>"pending"===e.status&&(0,em.Z)((0,eh.Z)(new Date(e.createdAt),2),new Date))?nq:t.find(e=>"pending"===e.status&&(0,ef.Z)((0,eh.Z)(new Date(e.createdAt),2),new Date))?nF:nV}),(0,L.K)(e=>(console.error("Failed to fetch access requests",e),(0,$.of)({loading:!1,error:!0,status:void 0}))),(0,R.O)(nH)),i[2]=r,i[3]=o,i[4]=e):e=i[4],t=e}let l=t,{loading:a,error:c,status:d}=(0,eu.m)(l,nH);return i[5]!==c||i[6]!==a||i[7]!==d?(n={data:d,loading:a,error:c},i[5]=c,i[6]=a,i[7]=d,i[8]=n):n=i[8],n};function nW(e){let t,n,i,r,o,d,p,m,h,f,g,y;let b=(0,s.c)(33),{requiredPermission:j}=e,v=(0,x.xJ)(),{data:w,loading:_,error:k}=nG(),[I,C]=(0,c.useState)(!1);t="pending"===w||"declined"===w||I,b[0]!==v?.roles?(n=v?.roles||[],b[0]=v?.roles,b[1]=n):n=b[1];let S=n,E=1===S.length&&"viewer"===S[0].name,[T,z]=(0,c.useState)(!1);b[2]===Symbol.for("react.memo_cache_sentinel")?(i={style:"short"},b[2]=i):i=b[2];let $=(0,x.WEl)(i),{t:D}=(0,x.$G7)(eP),P=(0,ed.f1)();b[3]!==S||b[4]!==$?(r=S.map(nX),o=$.formatToParts(r).map(nK),b[3]=S,b[4]=$,b[5]=r,b[6]=o):(r=b[5],o=b[6]);let R=o;return b[7]!==R?(d={Roles:()=>(0,l.jsx)(l.Fragment,{children:R})},b[7]=R,b[8]=d):d=b[8],b[9]!==r||b[10]!==R.length?(p={count:R.length,roles:r},b[9]=r,b[10]=R.length,b[11]=p):p=b[11],b[12]!==j||b[13]!==D||b[14]!==d||b[15]!==p?(m=(0,l.jsx)(a.xv,{size:1,weight:"medium",children:(0,l.jsx)(x.vNl,{t:D,i18nKey:"banners.permission-check-banner.missing-permission",components:d,values:p,context:j})}),b[12]=j,b[13]=D,b[14]=d,b[15]=p,b[16]=m):m=b[16],b[17]!==E||b[18]!==t||b[19]!==k||b[20]!==_||b[21]!==w||b[22]!==D||b[23]!==P?(h=E&&w&&!k&&!_?{onClick:t?void 0:()=>{z(!0),P.log(nL)},text:D(t?"banners.permission-check-banner.request-permission-button.sent":"banners.permission-check-banner.request-permission-button.text"),tone:t?"default":"primary",disabled:t,mode:t?"bleed":void 0}:void 0,b[17]=E,b[18]=t,b[19]=k,b[20]=_,b[21]=w,b[22]=D,b[23]=P,b[24]=h):h=b[24],b[25]!==m||b[26]!==h?(f=(0,l.jsx)(nD,{content:m,action:h,"data-testid":"permission-check-banner",icon:u.CPA}),b[25]=m,b[26]=h,b[27]=f):f=b[27],b[28]!==T?(g=T&&(0,l.jsx)(nO,{onClose:()=>z(!1),onRequestSubmitted:()=>{C(!0),z(!1)}}),b[28]=T,b[29]=g):g=b[29],b[30]!==g||b[31]!==f?(y=(0,l.jsxs)(l.Fragment,{children:[f,g]}),b[30]=g,b[31]=f,b[32]=y):y=b[32],y}function nK(e){return"element"===e.type?(0,l.jsx)("code",{children:e.value},e.value):e.value}function nX(e){return e.title}let nY=(0,c.memo)(()=>{let e=(0,x.rq_)(),{params:t,groupIndex:n,routerPanesState:i,replaceCurrent:r,BackLink:o}=eK(),s=i[n]?.[0].id,d=i[n-1]?.[0],p=d?.id,m=!!d?.params?.rev,h=(0,c.useMemo)(()=>t?.parentRefPath&&(0,S.mL)(t.parentRefPath)||null,[t?.parentRefPath]),{t:f}=(0,x.$G7)(eP),g=(0,c.useMemo)(()=>{let t=h?.[0];if(!p||!t||!h)return(0,$.of)({loading:!1});let n=(0,x.vsM)(p),i=(0,S.mL)(t),r=i.findIndex(e=>"object"==typeof e&&"_key"in e);return(0,A.z)((0,$.of)({loading:!0}),e.unstable_observePathsDocumentPair(n,-1===r?i:i.slice(0,r)).pipe((0,en.b)(750),(0,P.U)(({draft:e,published:t})=>({loading:!1,result:{availability:{draft:e.availability,published:t.availability},refValue:S.U2(e.snapshot||t.snapshot,h)?._ref}}))))},[e,p,h]),y=(0,eu.m)(g,{loading:!0}),b=(0,c.useCallback)(()=>{y.loading||y.result?.refValue&&r({id:y.result.refValue,params:t})},[y.loading,y.result,r,t]);return p&&h&&!m&&!y.loading&&(y.result?.availability.draft.available||y.result?.availability.published.available)&&y.result?.refValue!==s?(0,l.jsx)(nD,{action:y.result?.refValue?{onClick:b,icon:u.bnu,text:f("banners.reference-changed-banner.reason-changed.reload-button.text")}:{as:o,icon:u.Two,text:f("banners.reference-changed-banner.reason-removed.close-button.text")},"data-testid":"reference-changed-banner",content:(0,l.jsx)(a.xv,{size:1,weight:"medium",children:f(y.result?.refValue?"banners.reference-changed-banner.reason-changed.text":"banners.reference-changed-banner.reason-removed.text")}),icon:u.foC,tone:"caution"}):null});nY.displayName="Memo(ReferenceChangedBanner)";let nZ=(0,ep.dS)({name:"Resolved LiveEdit Draft",version:1,description:"User resolved a draft of a live edit document to continue editing"});function nQ(e){let t,n,i,r,d,p,m,h,f,g,y,b,j,v;let w=(0,s.c)(38),{displayed:_,documentId:k,schemaType:I}=e,{t:C}=(0,x.$G7)(eP),[S,E]=(0,c.useState)(!1),[T,z]=(0,c.useState)(!1),$=(0,ed.f1)(),{publish:D,discardChanges:P}=(0,x.d9t)(k,_?._type||"");w[0]!==D||w[1]!==$?(t=()=>{D.execute(),E(!0),$.log(nZ,{liveEditResolveType:"publish"})},w[0]=D,w[1]=$,w[2]=t):t=w[2];let R=t;w[3]!==P||w[4]!==$?(n=()=>{P.execute(),z(!0),$.log(nZ,{liveEditResolveType:"discard"})},w[3]=P,w[4]=$,w[5]=n):n=w[5];let L=n;return(w[6]===Symbol.for("react.memo_cache_sentinel")?(i=()=>()=>{E(!1),z(!1)},w[6]=i):i=w[6],(0,c.useEffect)(i),_&&_._id&&!(0,x.Cb2)(_._id))?null:(w[7]!==I.title?(r={schemaType:I.title},w[7]=I.title,w[8]=r):r=w[8],w[9]!==C||w[10]!==r?(d=(0,l.jsx)(a.xv,{size:1,weight:"medium",children:(0,l.jsx)(x.vNl,{t:C,i18nKey:"banners.live-edit-draft-banner.text",values:r})}),w[9]=C,w[10]=r,w[11]=d):d=w[11],w[12]!==C?(p=C("action.publish.live-edit.label"),w[12]=C,w[13]=p):p=w[13],w[14]!==C?(m=C("banners.live-edit-draft-banner.publish.tooltip"),w[14]=C,w[15]=m):m=w[15],w[16]!==m?(h={content:m},w[16]=m,w[17]=h):h=w[17],w[18]!==R||w[19]!==S||w[20]!==p||w[21]!==h?(f=(0,l.jsx)(o.zx,{onClick:R,text:p,tooltipProps:h,loading:S}),w[18]=R,w[19]=S,w[20]=p,w[21]=h,w[22]=f):f=w[22],w[23]!==C?(g=C("banners.live-edit-draft-banner.discard.tooltip"),w[23]=C,w[24]=g):g=w[24],w[25]!==C?(y=C("banners.live-edit-draft-banner.discard.tooltip"),w[25]=C,w[26]=y):y=w[26],w[27]!==y?(b={content:y},w[27]=y,w[28]=b):b=w[28],w[29]!==L||w[30]!==T||w[31]!==g||w[32]!==b?(j=(0,l.jsx)(o.zx,{onClick:L,text:g,tooltipProps:b,loading:T}),w[29]=L,w[30]=T,w[31]=g,w[32]=b,w[33]=j):j=w[33],w[34]!==j||w[35]!==d||w[36]!==f?(v=(0,l.jsx)(nD,{content:(0,l.jsxs)(a.kC,{align:"center",justify:"space-between",gap:1,children:[d,f,j]}),"data-testid":"live-edit-type-banner",icon:u.uIy}),w[34]=j,w[35]=d,w[36]=f,w[37]=v):v=w[37],v)}let nJ=(0,_.zo)(a.Kq)`
  ${({theme:e})=>(0,_.iv)`
      @supports not (container-type: inline-size) {
        display: none !important;
      }

      container-type: inline-size;

      [data-heading] {
        font-size: ${e.sanity.fonts.heading.sizes[4].fontSize}px;
        line-height: ${e.sanity.fonts.heading.sizes[4].lineHeight}px;
        overflow-wrap: break-word;
        text-wrap: pretty;
      }

      @container (max-width: 560px) {
        [data-heading] {
          font-size: ${e.sanity.fonts.heading.sizes[3].fontSize}px;
          line-height: ${e.sanity.fonts.heading.sizes[3].lineHeight}px;
        }
      }

      @container (max-width: 420px) {
        [data-heading] {
          font-size: ${e.sanity.fonts.heading.sizes[2].fontSize}px;
          line-height: ${e.sanity.fonts.heading.sizes[2].lineHeight}px;
        }
      }
    `}
`,n0=e=>{let t,n,i,r;let o=(0,s.c)(13),{documentId:c,schemaType:d,title:u}=e,p=c===d.name,{t:m}=(0,es.$G)(eP);if(!1===d.__experimental_formPreviewTitle)return null;o[0]!==p||o[1]!==d.name||o[2]!==d.title?(t=!p&&(0,l.jsx)(a.xv,{muted:!0,size:1,children:d.title??d.name}),o[0]=p,o[1]=d.name,o[2]=d.title,o[3]=t):t=o[3];let h=!u;return o[4]!==m||o[5]!==u?(n=u??m("document-view.form-view.form-title-fallback"),o[4]=m,o[5]=u,o[6]=n):n=o[6],o[7]!==h||o[8]!==n?(i=(0,l.jsx)(a.X6,{as:"h2","data-heading":!0,muted:h,"data-testid":"document-panel-document-title",children:n}),o[7]=h,o[8]=n,o[9]=i):i=o[9],o[10]!==t||o[11]!==i?(r=(0,l.jsxs)(nJ,{marginBottom:6,space:4,children:[t,i]}),o[10]=t,o[11]=i,o[12]=r):r=o[12],r},n1=e=>e.preventDefault(),n2=(0,c.forwardRef)(function(e,t){let n,i,r,o,d,u,p,m,h,f,g,y,b,j,v;let w=(0,s.c)(70),{hidden:_,margins:k}=e,{collapsedFieldSets:I,collapsedPaths:C,displayed:S,editState:E,documentId:T,documentType:z,fieldActions:$,onChange:D,validation:P,ready:R,formState:L,onFocus:A,connectionState:M,onBlur:O,onSetCollapsedPath:N,onPathOpen:U,onSetCollapsedFieldSet:H,onSetActiveFieldGroup:V,openPath:B}=t6(),q=(0,x.H__)(),F=(0,x.Dqo)(T),{title:G}=nc(),[W]=(0,c.useState)(n3),K=E?.transactionSyncLock?.enabled,{t:Y}=(0,x.$G7)(eP);w[0]!==Y?(n=Y("document-view.form-view.sync-lock-toast.title"),w[0]=Y,w[1]=n):n=w[1],w[2]!==Y?(i=Y("document-view.form-view.sync-lock-toast.description"),w[2]=Y,w[3]=i):i=w[3],w[4]!==K||w[5]!==n||w[6]!==i?(r={id:"sync-lock",status:"warning",enabled:K,title:n,description:i,closable:!0},w[4]=K,w[5]=n,w[6]=i,w[7]=r):r=w[7],function(e){let t,n;let i=(0,s.c)(4),r=(0,a.pm)();i[0]!==e||i[1]!==r?(t=()=>(e.enabled&&r.push({...e,duration:20736e5}),()=>{e.enabled&&r.push({...e,duration:.01})}),n=[e,r],i[0]=e,i[1]=r,i[2]=t,i[3]=n):(t=i[2],n=i[3]),(0,c.useEffect)(t,n)}(r),w[8]!==T||w[9]!==q.pair||w[10]!==z||w[11]!==W?(o=()=>{let e=q.pair.documentEvents(T,z).pipe((0,X.b)(e=>{"mutation"===e.type&&W.publish(function(e){let t=e.mutations.map(e=>e.patch).filter(Boolean);return{type:"mutation",snapshot:e.document,patches:(0,x.Sis)(e.origin,t)}}(e)),"rebase"===e.type&&W.publish(function(e){let t=e.remoteMutations.map(e=>e.patch).filter(Boolean),n=e.localMutations.map(e=>e.patch).filter(Boolean);return{type:"rebase",snapshot:e.document,patches:(0,x.Sis)("remote",t).concat((0,x.Sis)("local",n))}}(e))})).subscribe();return()=>{e.unsubscribe()}},w[8]=T,w[9]=q.pair,w[10]=z,w[11]=W,w[12]=o):o=w[12],w[13]!==T||w[14]!==q||w[15]!==z||w[16]!==W?(d=[T,q,z,W],w[13]=T,w[14]=q,w[15]=z,w[16]=W,w[17]=d):d=w[17],(0,c.useEffect)(o,d);let Z=!!S?._rev;w[18]!==W||w[19]!==S?(u=()=>{W.publish({type:"mutation",patches:[],snapshot:S})},w[18]=W,w[19]=S,w[20]=u):u=w[20];let Q=(0,eg.i)(u);w[21]!==Q||w[22]!==Z?(p=()=>{Z&&Q()},m=[Q,Z],w[21]=Q,w[22]=Z,w[23]=p,w[24]=m):(p=w[23],m=w[24]),(0,c.useEffect)(p,m);let[J,ee]=(0,c.useState)(null),[et,en]=(0,c.useState)(!1);w[25]!==et||w[26]!==J||w[27]!==L?.focusPath.length||w[28]!==R?(h=()=>{!et&&R&&!L?.focusPath.length&&J&&(en(!0),(0,a.fo)(J))},w[25]=et,w[26]=J,w[27]=L?.focusPath.length,w[28]=R,w[29]=h):h=w[29];let ei=L?.focusPath.length;w[30]!==et||w[31]!==J||w[32]!==R||w[33]!==ei?(f=[et,J,ei,R],w[30]=et,w[31]=J,w[32]=R,w[33]=ei,w[34]=f):f=w[34],(0,c.useEffect)(h,f),w[35]!==t?(g=e=>{ee(e),"function"==typeof t?t(e):t&&(t.current=e)},w[35]=t,w[36]=g):g=w[36];let er=g;return w[37]!==I||w[38]!==C||w[39]!==M||w[40]!==T||w[41]!==E?.draft||w[42]!==E?.published||w[43]!==E?.ready||w[44]!==$||w[45]!==L||w[46]!==_||w[47]!==O||w[48]!==D||w[49]!==A||w[50]!==U||w[51]!==V||w[52]!==H||w[53]!==N||w[54]!==B||w[55]!==W||w[56]!==F||w[57]!==Y||w[58]!==G||w[59]!==P?(y="connecting"!==M||E?.draft||E?.published?null===L||_?(0,l.jsx)(a.xu,{padding:2,children:(0,l.jsx)(a.xv,{children:Y("document-view.form-view.form-hidden")})}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n0,{documentId:T,schemaType:L.schemaType,title:G}),(0,l.jsx)(x.quP,{__internal_fieldActions:$,__internal_patchChannel:W,changed:L.changed,collapsedFieldSets:I,collapsedPaths:C,focused:L.focused,focusPath:L.focusPath,groups:L.groups,id:"root",members:L.members,onChange:D,onFieldGroupSelect:V,onPathBlur:O,onPathFocus:A,onPathOpen:U,onSetFieldSetCollapsed:H,onSetPathCollapsed:N,openPath:B,presence:F,readOnly:"reconnecting"===M||L.readOnly||!E?.ready,schemaType:L.schemaType,validation:P,value:L.value})]}):(0,l.jsx)(te,{ms:300,children:(0,l.jsxs)(a.kC,{align:"center",direction:"column",height:"fill",justify:"center",children:[(0,l.jsx)(a.$j,{muted:!0}),(0,l.jsx)(a.xu,{marginTop:3,children:(0,l.jsx)(a.xv,{align:"center",muted:!0,size:1,children:Y("document-view.form-view.loading")})})]})}),w[37]=I,w[38]=C,w[39]=M,w[40]=T,w[41]=E?.draft,w[42]=E?.published,w[43]=E?.ready,w[44]=$,w[45]=L,w[46]=_,w[47]=O,w[48]=D,w[49]=A,w[50]=U,w[51]=V,w[52]=H,w[53]=N,w[54]=B,w[55]=W,w[56]=F,w[57]=Y,w[58]=G,w[59]=P,w[60]=y):y=w[60],w[61]!==er||w[62]!==y?(b=(0,l.jsx)(a.xu,{as:"form",onSubmit:n1,ref:er,children:y}),w[61]=er,w[62]=y,w[63]=b):b=w[63],w[64]!==k||w[65]!==b?(j=(0,l.jsx)(x.$rW,{margins:k,children:b}),w[64]=k,w[65]=b,w[66]=j):j=w[66],w[67]!==_||w[68]!==j?(v=(0,l.jsx)(a.W2,{hidden:_,paddingX:4,paddingTop:5,paddingBottom:9,sizing:"border",width:1,children:j}),w[67]=_,w[68]=j,w[69]=v):v=w[69],v});function n3(){return(0,x.fm0)()}let n4=(0,_.zo)(a.xu)({position:"relative"}),n5=(0,_.zo)(x.l$t)(({$disabled:e})=>e?{height:"100%"}:(0,_.iv)`
    height: 100%;
    overflow: auto;
    position: relative;
    scroll-behavior: smooth;
    outline: none;
  `),n6=function(e){let t,n,i,r,o,d,u,p,m,h,f,g,y,b,j;let v=(0,s.c)(64),{footerHeight:w,headerHeight:_,isInspectOpen:k,rootElement:I,setDocumentPanelPortalElement:C}=e,{activeViewId:S,displayed:E,documentId:T,editState:z,inspector:$,value:D,views:P,ready:R,schemaType:L,permissions:A,isPermissionsLoading:M,isDeleting:O,isDeleted:N,timelineStore:U}=t6(),{collapsed:H}=eq(),{collapsed:V}=tl(),B=(0,a.vI)(),{features:q}=ni(),[F,G]=(0,c.useState)(null),[W,K]=(0,c.useState)(null),X=(0,c.useRef)(null),Y=D._createdAt?"update":"create";v[0]!==S||v[1]!==P?(n=P.find(e=>e.id===S)||P[0]||{type:"form"},v[0]=S,v[1]=P,v[2]=n):n=v[2],t=n;let Z=q.splitPanes&&F||B.element;e:{let e;if(H){let e;let t=_||0,n=w?w+2:2;v[3]!==t||v[4]!==n?(e=[t,0,n,0],v[3]=t,v[4]=n,v[5]=e):e=v[5],i=e;break e}v[6]===Symbol.for("react.memo_cache_sentinel")?(e=[0,0,2,0],v[6]=e):e=v[6],i=e}let Q=i,J="form"!==t.type;v[7]!==t.component||v[8]!==t.options||v[9]!==t.type||v[10]!==E||v[11]!==T||v[12]!==z?.draft||v[13]!==z?.published||v[14]!==L||v[15]!==D?(r=()=>{if("component"===t.type&&t.component){let e=t.component;return(0,l.jsx)(e,{document:{draft:z?.draft||null,displayed:E||D,historical:E,published:z?.published||null},documentId:T,options:t.options,schemaType:L})}return!1},v[7]=t.component,v[8]=t.options,v[9]=t.type,v[10]=E,v[11]=T,v[12]=z?.draft,v[13]=z?.published,v[14]=L,v[15]=D,v[16]=r):r=v[16],v[17]!==r?(o=r(),v[17]=r,v[18]=o):o=v[18];let ee=o,et=(0,x.P08)(U,n8);v[19]!==L?(d=np(L),v[19]=L,v[20]=d):d=v[20];let en=d;v[21]!==W?(u=()=>{W?.scrollTo&&W.scrollTo(0,0)},v[21]=W,v[22]=u):u=v[22],v[23]!==T||v[24]!==W?(p=[T,W],v[23]=T,v[24]=W,v[25]=p):p=v[25],(0,c.useEffect)(u,p),v[26]!==Z||v[27]!==C?(m=()=>{Z&&C(Z)},h=[Z,C],v[26]=Z,v[27]=C,v[28]=m,v[29]=h):(m=v[28],h=v[29]),(0,c.useEffect)(m,h),v[30]!==E||v[31]!==k||v[32]!==D?(g=k?(0,l.jsx)(n$,{value:E||D}):null,v[30]=E,v[31]=k,v[32]=D,v[33]=g):g=v[33],f=g;let ei=!!(!V&&$);return v[34]!==t.type||v[35]!==ee||v[36]!==E||v[37]!==T||v[38]!==W||v[39]!==q.resizablePanes||v[40]!==J||v[41]!==f||v[42]!==N||v[43]!==O||v[44]!==en||v[45]!==M||v[46]!==et||v[47]!==H||v[48]!==Q||v[49]!==A?.granted||v[50]!==Z||v[51]!==R||v[52]!==Y||v[53]!==L||v[54]!==ei?(y=(q.resizablePanes||!ei)&&(0,l.jsx)(n4,{flex:2,overflow:"hidden",children:(0,l.jsx)(a.Xp,{element:Z,__unstable_elements:{documentScrollElement:W},children:(0,l.jsx)(a.NM,{element:W,children:(0,l.jsxs)(x.Ahg,{scrollElement:W,containerElement:X,children:["form"===t.type&&en&&R&&(0,l.jsx)(nQ,{displayed:E,documentId:T,schemaType:L}),"form"===t.type&&!M&&R&&(0,l.jsxs)(l.Fragment,{children:[!A?.granted&&(0,l.jsx)(nW,{requiredPermission:Y}),!O&&N&&(0,l.jsx)(nP,{revisionId:et}),(0,l.jsx)(nY,{}),(0,l.jsx)(nR,{})]}),(0,l.jsxs)(n5,{$disabled:H||!1,"data-testid":"document-panel-scroller",ref:K,children:[(0,l.jsx)(n2,{hidden:J,margins:Q,ref:X}),ee]}),f,(0,l.jsx)("div",{"data-testid":"document-panel-portal",ref:G})]})})})}),v[34]=t.type,v[35]=ee,v[36]=E,v[37]=T,v[38]=W,v[39]=q.resizablePanes,v[40]=J,v[41]=f,v[42]=N,v[43]=O,v[44]=en,v[45]=M,v[46]=et,v[47]=H,v[48]=Q,v[49]=A?.granted,v[50]=Z,v[51]=R,v[52]=Y,v[53]=L,v[54]=ei,v[55]=y):y=v[55],v[56]!==T||v[57]!==I||v[58]!==L||v[59]!==ei?(b=ei&&(0,l.jsx)(a.NM,{element:I,children:(0,l.jsx)(nb,{documentId:T,documentType:L.name,flex:1})}),v[56]=T,v[57]=I,v[58]=L,v[59]=ei,v[60]=b):b=v[60],v[61]!==y||v[62]!==b?(j=(0,l.jsx)(ts,{children:(0,l.jsxs)(a.kC,{height:"fill",children:[y,b]})}),v[61]=y,v[62]=b,v[63]=j):j=v[63],j};function n8(e){return e.lastNonDeletedRevId}n6.displayName="DocumentPanel";let n7=["left","bottom"],n9={small:0,medium:1,large:2,full:"auto"};function ie(e){let t,n;let i=(0,s.c)(5),{dialog:r,referenceElement:o}=e;return i[0]!==r?(t=(0,l.jsx)(it,{dialog:r}),i[0]=r,i[1]=t):t=i[1],i[2]!==o||i[3]!==t?(n=(0,l.jsx)(a.J2,{content:t,fallbackPlacements:n7,open:!0,placement:"top",portal:!0,preventOverflow:!0,referenceElement:o}),i[2]=o,i[3]=t,i[4]=n):n=i[4],n}function it(e){let t,n,i,r,o,d,u,p,m,h,f;let g=(0,s.c)(29),{dialog:y}=e,{cancelButtonIcon:b,cancelButtonText:j,confirmButtonIcon:v,confirmButtonText:w,message:_,onCancel:k,onConfirm:I,tone:C}=y,{t:S}=(0,x.$G7)(eP),{isTopLayer:E}=(0,a.sJ)(),T=(0,c.useRef)(null);return g[0]!==E||g[1]!==k?(t=e=>{"Escape"===e.key&&E&&k()},g[0]=E,g[1]=k,g[2]=t):t=g[2],(0,a.qh)(t),g[3]===Symbol.for("react.memo_cache_sentinel")?(n=()=>[T.current],g[3]=n):n=g[3],(0,a.Of)(E&&k,n),g[4]===Symbol.for("react.memo_cache_sentinel")?(i={minWidth:304,maxWidth:400},g[4]=i):i=g[4],g[5]!==_?(r=(0,l.jsx)(a.xu,{flex:1,overflow:"auto",padding:4,children:(0,l.jsx)(a.xv,{children:_})}),g[5]=_,g[6]=r):r=g[6],g[7]===Symbol.for("react.memo_cache_sentinel")?(o={borderTop:"1px solid var(--card-border-color)"},g[7]=o):o=g[7],g[8]!==j||g[9]!==S?(d=j||S("confirm-dialog.cancel-button.fallback-text"),g[8]=j,g[9]=S,g[10]=d):d=g[10],g[11]!==b||g[12]!==k||g[13]!==d?(u=(0,l.jsx)(a.zx,{"data-testid":"confirm-dialog-cancel-button",icon:b,onClick:k,mode:"ghost",text:d}),g[11]=b,g[12]=k,g[13]=d,g[14]=u):u=g[14],g[15]!==w||g[16]!==S?(p=w||S("confirm-dialog.confirm-button.fallback-text"),g[15]=w,g[16]=S,g[17]=p):p=g[17],g[18]!==v||g[19]!==I||g[20]!==p||g[21]!==C?(m=(0,l.jsx)(a.zx,{"data-testid":"confirm-dialog-confirm-button",icon:v,onClick:I,text:p,tone:C}),g[18]=v,g[19]=I,g[20]=p,g[21]=C,g[22]=m):m=g[22],g[23]!==u||g[24]!==m?(h=(0,l.jsx)(a.xu,{paddingX:4,paddingY:3,style:o,children:(0,l.jsxs)(a.rj,{columns:2,gap:2,children:[u,m]})}),g[23]=u,g[24]=m,g[25]=h):h=g[25],g[26]!==r||g[27]!==h?(f=(0,l.jsxs)(a.kC,{direction:"column",ref:T,style:i,children:[r,h]}),g[26]=r,g[27]=h,g[28]=f):f=g[28],f}function ii(e){let t,n,i;let r=(0,s.c)(12),{dialog:o}=e,d=(0,c.useId)();r[0]!==o.footer?(t=o.footer&&(0,l.jsx)(a.xu,{paddingX:4,paddingY:3,children:o.footer}),r[0]=o.footer,r[1]=t):t=r[1];let u=t,p=!1===o.showCloseButton,m=void 0===o.width?1:n9[o.width];return r[2]!==o.content?(n=(0,l.jsx)(a.xu,{padding:4,children:o.content}),r[2]=o.content,r[3]=n):n=r[3],r[4]!==o.header||r[5]!==o.onClose||r[6]!==d||r[7]!==u||r[8]!==p||r[9]!==m||r[10]!==n?(i=(0,l.jsx)(x.jr5,{zOffset:"fullscreen",children:(0,l.jsx)(a.Vq,{animate:!0,__unstable_hideCloseButton:p,footer:u,header:o.header,id:d,onClose:o.onClose,onClickOutside:o.onClose,width:m,children:n})}),r[4]=o.header,r[5]=o.onClose,r[6]=d,r[7]=u,r[8]=p,r[9]=m,r[10]=n,r[11]=i):i=r[11],i}function ir(e){let t,n;let i=(0,s.c)(5),{dialog:r,referenceElement:o}=e;return i[0]!==r?(t=(0,l.jsx)(io,{dialog:r}),i[0]=r,i[1]=t):t=i[1],i[2]!==o||i[3]!==t?(n=(0,l.jsx)(a.J2,{content:t,fallbackPlacements:n7,open:!0,placement:"top",portal:!0,preventOverflow:!0,referenceElement:o}),i[2]=o,i[3]=t,i[4]=n):n=i[4],n}function io(e){let t,n,i;let r=(0,s.c)(6),{dialog:o}=e,{content:d,onClose:u}=o,{isTopLayer:p}=(0,a.sJ)(),m=(0,c.useRef)(null);return r[0]!==p||r[1]!==u?(t=e=>{"Escape"===e.key&&p&&u()},r[0]=p,r[1]=u,r[2]=t):t=r[2],(0,a.qh)(t),r[3]===Symbol.for("react.memo_cache_sentinel")?(n=()=>[m.current],r[3]=n):n=r[3],(0,a.Of)(p&&u,n),r[4]!==d?(i=(0,l.jsx)("div",{ref:m,children:d}),r[4]=d,r[5]=i):i=r[5],i}function il(e){let t;let n=(0,s.c)(3),{children:i}=e,{element:r,elements:o}=(0,a.vI)(),c=o?.[nn]||r;return n[0]!==i||n[1]!==c?(t=(0,l.jsx)(a.Xp,{element:c,children:i}),n[0]=i,n[1]=c,n[2]=t):t=n[2],t}function is(e){let t,n;let i=(0,s.c)(17),{dialog:r,referenceElement:d}=e,u=void 0===d?null:d,p=(0,c.useId)();if("confirm"===r.type){let e;return i[0]!==r||i[1]!==u?(e=(0,l.jsx)(ie,{dialog:r,referenceElement:u}),i[0]=r,i[1]=u,i[2]=e):e=i[2],e}if("popover"===r.type){let e;return i[3]!==r||i[4]!==u?(e=(0,l.jsx)(ir,{dialog:r,referenceElement:u}),i[3]=r,i[4]=u,i[5]=e):e=i[5],e}if("dialog"===r.type||!r.type){let e;return i[6]!==r?(e=(0,l.jsx)(il,{children:(0,l.jsx)(ii,{dialog:r})}),i[6]=r,i[7]=e):e=i[7],e}if("custom"===r.type){let e;let t=r?.component;return i[8]!==t?(e=(0,l.jsx)(il,{children:t}),i[8]=t,i[9]=e):e=i[9],e}return console.warn(`Unsupported modal type ${r.type}`),i[10]!==r.content||i[11]!==r.type?(t=r.content||(0,l.jsxs)(a.xv,{size:1,children:["Unexpected modal type (",(0,l.jsx)("code",{children:r.type}),")"]}),i[10]=r.content,i[11]=r.type,i[12]=t):t=i[12],i[13]!==p||i[14]!==t||i[15]!==r.onClose?(n=(0,l.jsx)(o.Vq,{id:p,onClose:r.onClose,onClickOutside:r.onClose,width:1,children:t}),i[13]=p,i[14]=t,i[15]=r.onClose,i[16]=n):n=i[16],n}let ia=(0,c.memo)(function(e){let t,n,i,r,o,a;let d=(0,s.c)(9),{actionStates:u,children:p,referenceElement:m}=e,[h,f]=(0,c.useState)(-1);t=u[h],d[0]===Symbol.for("react.memo_cache_sentinel")?(n=e=>{f(e)},d[0]=n):n=d[0];let g=n;return d[1]!==p?(r=p({handleAction:g}),d[1]=p,d[2]=r):r=d[2],i=r,d[3]!==t||d[4]!==m?(o=t&&t.dialog&&(0,l.jsx)(x.jr5,{zOffset:"paneFooter",children:(0,l.jsx)(is,{dialog:t.dialog,referenceElement:m})}),d[3]=t,d[4]=m,d[5]=o):o=d[5],d[6]!==i||d[7]!==o?(a=(0,l.jsxs)(l.Fragment,{children:[o,i]}),d[6]=i,d[7]=o,d[8]=a):a=d[8],a});function ic(e){let t,n,i,r;let d=(0,s.c)(10),{actionStates:u,disabled:p}=e,m=(0,c.useId)(),[h,f]=(0,c.useState)(null);d[0]===Symbol.for("react.memo_cache_sentinel")?(n={placement:"top-end",portal:!0,preventOverflow:!0},d[0]=n):n=d[0],t=n;let{t:g}=(0,x.$G7)(eP);d[1]!==u||d[2]!==p||d[3]!==m||d[4]!==g?(i=e=>{let{handleAction:n}=e;return(0,l.jsx)(o.j2,{id:`${m}-action-menu`,button:(0,l.jsx)(x.lXN,{"aria-label":g("buttons.action-menu-button.aria-label"),disabled:p,"data-testid":"action-menu-button",size:"large",tooltipProps:{content:g("buttons.action-menu-button.tooltip")}}),menu:(0,l.jsx)(a.v2,{padding:1,children:u.map((e,t)=>(0,l.jsx)(id,{actionState:e,disabled:p,index:t,onAction:n},t))}),popover:t,ref:f})},d[1]=u,d[2]=p,d[3]=m,d[4]=g,d[5]=i):i=d[5];let y=i;return d[6]!==u||d[7]!==h||d[8]!==y?(r=(0,l.jsx)(ia,{actionStates:u,referenceElement:h,children:y}),d[6]=u,d[7]=h,d[8]=y,d[9]=r):r=d[9],r}function id(e){let t,n,i,r,a;let c=(0,s.c)(18),{actionState:d,disabled:u,index:p,onAction:m}=e,{onHandle:h}=d;c[0]!==p||c[1]!==m||c[2]!==h?(t=()=>{m(p),h&&h()},c[0]=p,c[1]=m,c[2]=h,c[3]=t):t=c[3];let f=t;c[4]!==d.shortcut?(i=d.shortcut?String(d.shortcut).split("+").map(iu):void 0,c[4]=d.shortcut,c[5]=i):i=c[5],n=i;let x=`action-${d.label.replace(" ","")}`,g=u||!!d.disabled;return c[6]!==d.disabled||c[7]!==d.title?(r=d.disabled&&{tooltipProps:{content:d.title}},c[6]=d.disabled,c[7]=d.title,c[8]=r):r=c[8],c[9]!==d.icon||c[10]!==d.label||c[11]!==d.tone||c[12]!==f||c[13]!==n||c[14]!==x||c[15]!==g||c[16]!==r?(a=(0,l.jsx)(o.sN,{"data-testid":x,disabled:g,hotkeys:n,icon:d.icon,onClick:f,text:d.label,tone:d.tone,...r}),c[9]=d.icon,c[10]=d.label,c[11]=d.tone,c[12]=f,c[13]=n,c[14]=x,c[15]=g,c[16]=r,c[17]=a):a=c[17],a}function iu(e){return e.slice(0,1).toUpperCase()+e.slice(1)}let ip={NOTHING_TO_DELETE:"action.delete.disabled.nothing-to-delete",NOT_READY:"action.delete.disabled.not-ready"},im=e=>{let t,n,i,r,o;let a=(0,s.c)(35),{id:d,type:p,draft:m,onComplete:h}=e,{setIsDeleting:f}=t6(),{delete:g}=(0,x.d9t)(d,p),[y,b]=(0,c.useState)(!1),[j,v]=(0,c.useState)(!1),{t:w}=(0,x.$G7)(eP);a[0]!==h?(t=()=>{v(!1),h()},a[0]=h,a[1]=t):t=a[1];let _=t;a[2]!==g||a[3]!==h||a[4]!==f?(n=()=>{b(!0),v(!1),f(!0),g.execute(),h()},a[2]=g,a[3]=h,a[4]=f,a[5]=n):n=a[5];let k=n;a[6]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{v(!0)},a[6]=i):i=a[6];let I=i;a[7]!==d||a[8]!==p?(r={id:d,type:p,permission:"delete"},a[7]=d,a[8]=p,a[9]=r):r=a[9];let[C,S]=(0,x.hHf)(r),E=(0,x.xJ)();e:{let e,t,n,i;if(!S&&!C?.granted){let e,t,n;a[10]!==w?(e=w("action.delete.label"),a[10]=w,a[11]=e):e=a[11],a[12]!==E?(t=(0,l.jsx)(x.FMn,{context:"delete-document",currentUser:E}),a[12]=E,a[13]=t):t=a[13],a[14]!==e||a[15]!==t?(n={tone:"critical",icon:u.XHJ,disabled:!0,label:e,title:t},a[14]=e,a[15]=t,a[16]=n):n=a[16],o=n;break e}let r=y||!!g.disabled||S;a[17]!==g.disabled||a[18]!==w?(e=g.disabled&&w(ip[g.disabled])||"",a[17]=g.disabled,a[18]=w,a[19]=e):e=a[19],a[20]!==y||a[21]!==w?(t=w(y?"action.delete.running.label":"action.delete.label"),a[20]=y,a[21]=w,a[22]=t):t=a[22],a[23]!==m?._id||a[24]!==_||a[25]!==k||a[26]!==d||a[27]!==j||a[28]!==p?(n=j&&{type:"custom",component:(0,l.jsx)(e9,{action:"delete",id:m?._id||d,type:p,onCancel:_,onConfirm:k})},a[23]=m?._id,a[24]=_,a[25]=k,a[26]=d,a[27]=j,a[28]=p,a[29]=n):n=a[29],a[30]!==r||a[31]!==e||a[32]!==t||a[33]!==n?(i={tone:"critical",icon:u.XHJ,disabled:r,title:e,label:t,shortcut:"Ctrl+Alt+D",onHandle:I,dialog:n},a[30]=r,a[31]=e,a[32]=t,a[33]=n,a[34]=i):i=a[34],o=i}return o};im.action="delete",im.displayName="DeleteAction";let ih={NO_CHANGES:"action.discard-changes.disabled.no-change",NOT_PUBLISHED:"action.discard-changes.disabled.not-published",NOT_READY:"action.discard-changes.disabled.not-ready"},ix=e=>{let t,n,i,r,o,a,d;let p=(0,s.c)(23),{id:m,type:h,published:f,liveEdit:g,onComplete:y}=e,{discardChanges:b}=(0,x.d9t)(m,h),[j,v]=(0,c.useState)(!1);p[0]!==m||p[1]!==h?(t={id:m,type:h,permission:"discardDraft"},p[0]=m,p[1]=h,p[2]=t):t=p[2];let[w,_]=(0,x.hHf)(t),k=(0,x.xJ)(),{t:I}=(0,x.$G7)(eP);p[3]!==b||p[4]!==y?(n=()=>{b.execute(),y()},p[3]=b,p[4]=y,p[5]=n):n=p[5];let C=n;p[6]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{v(!0)},p[6]=i):i=p[6];let S=i;return p[7]!==C||p[8]!==j||p[9]!==y||p[10]!==I?(o=j&&{type:"confirm",tone:"critical",onCancel:y,onConfirm:C,message:I("action.discard-changes.confirm-dialog.confirm-discard-changes")},p[7]=C,p[8]=j,p[9]=y,p[10]=I,p[11]=o):o=p[11],r=o,p[12]!==k||p[13]!==r||p[14]!==b.disabled||p[15]!==_||p[16]!==g||p[17]!==w?.granted||p[18]!==f||p[19]!==I?(a=()=>!f||g?null:_||w?.granted?{tone:"critical",icon:u.X5P,disabled:!!b.disabled||_,title:b.disabled&&ih[b.disabled]||"",label:I("action.discard-changes.label"),onHandle:S,dialog:r}:{tone:"critical",icon:u.X5P,disabled:!0,label:I("action.discard-changes.label"),title:(0,l.jsx)(x.FMn,{context:"discard-changes",currentUser:k})},p[12]=k,p[13]=r,p[14]=b.disabled,p[15]=_,p[16]=g,p[17]=w?.granted,p[18]=f,p[19]=I,p[20]=a):a=p[20],p[21]!==a?(d=a(),p[21]=a,p[22]=d):d=p[22],d};ix.action="discardChanges",ix.displayName="DiscardChangesAction";let ig={NOTHING_TO_DUPLICATE:"action.duplicate.disabled.nothing-to-duplicate",NOT_READY:"action.duplicate.disabled.not-ready"},iy=e=>{let t,n,i;let r=(0,s.c)(28),{id:o,type:a,onComplete:d}=e,p=(0,x.H__)(),{duplicate:m}=(0,x.d9t)(o,a),{navigateIntent:h}=(0,C.tv)(),[f,g]=(0,c.useState)(!1);r[0]!==o||r[1]!==a?(t={id:o,type:a,permission:"duplicate"},r[0]=o,r[1]=a,r[2]=t):t=r[2];let[y,b]=(0,x.hHf)(t),{t:j}=(0,x.$G7)(eP),v=(0,x.xJ)();r[3]!==p.pair||r[4]!==m||r[5]!==o||r[6]!==h||r[7]!==d||r[8]!==a?(n=async()=>{let e=(0,w.Z)();g(!0);let t=(0,M.z)(p.pair.operationEvents(o,a).pipe((0,O.h)(ib)));m.execute(e),await t,h("edit",{id:e,type:a}),d()},r[3]=p.pair,r[4]=m,r[5]=o,r[6]=h,r[7]=d,r[8]=a,r[9]=n):n=r[9];let _=n;e:{let e,t,n;if(!b&&!y?.granted){let e,t,n;r[10]!==j?(e=j("action.duplicate.label"),r[10]=j,r[11]=e):e=r[11],r[12]!==v?(t=(0,l.jsx)(x.FMn,{context:"duplicate-document",currentUser:v}),r[12]=v,r[13]=t):t=r[13],r[14]!==e||r[15]!==t?(n={icon:u.TIy,disabled:!0,label:e,title:t},r[14]=e,r[15]=t,r[16]=n):n=r[16],i=n;break e}let o=f||!!m.disabled||b;r[17]!==f||r[18]!==j?(e=j(f?"action.duplicate.running.label":"action.duplicate.label"),r[17]=f,r[18]=j,r[19]=e):e=r[19],r[20]!==m.disabled||r[21]!==j?(t=m.disabled?j(ig[m.disabled]):"",r[20]=m.disabled,r[21]=j,r[22]=t):t=r[22],r[23]!==_||r[24]!==o||r[25]!==e||r[26]!==t?(n={icon:u.TIy,disabled:o,label:e,title:t,onHandle:_},r[23]=_,r[24]=o,r[25]=e,r[26]=t,r[27]=n):n=r[27],i=n}return i};function ib(e){return"duplicate"===e.op&&"success"===e.type}iy.action="duplicate",iy.displayName="DuplicateAction";let ij=e=>{let t,n,i,r,o,l;let a=(0,s.c)(27),{id:d,type:p,revision:m,onComplete:h}=e,{restore:f}=(0,x.d9t)(d,p),g=(0,x.E6V)(d,p),{navigateIntent:y}=(0,C.tv)(),b=(0,c.useRef)(g),[j,v]=(0,c.useState)(!1),{t:w}=(0,x.$G7)(eP);a[0]!==h||a[1]!==f||a[2]!==m?(t=()=>{f.execute(m),h()},a[0]=h,a[1]=f,a[2]=m,a[3]=t):t=a[3];let _=t;a[4]!==g||a[5]!==d||a[6]!==y||a[7]!==p?(n=()=>{g&&g!==b.current&&("success"===g.type&&"restore"===g.op&&y("edit",{id:d,type:p}),b.current=g)},i=[g,d,y,p],a[4]=g,a[5]=d,a[6]=y,a[7]=p,a[8]=n,a[9]=i):(n=a[8],i=a[9]),(0,c.useEffect)(n,i),a[10]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{v(!0)},a[10]=r):r=a[10];let k=r;e:{if(j){let e,t;a[11]!==w?(e=w("action.restore.confirm.message"),a[11]=w,a[12]=e):e=a[12],a[13]!==_||a[14]!==h||a[15]!==e?(t={type:"confirm",tone:"critical",onCancel:h,onConfirm:_,message:e},a[13]=_,a[14]=h,a[15]=e,a[16]=t):t=a[16],o=t;break e}o=null}let I=o,S="@initial"===m,E=void 0===m;t:{let e,t,n;if(E){l=null;break t}a[17]!==w?(e=w("action.restore.label"),a[17]=w,a[18]=e):e=a[18];let i=S?"action.restore.disabled.cannot-restore-initial":"action.restore.tooltip";a[19]!==w||a[20]!==i?(t=w(i),a[19]=w,a[20]=i,a[21]=t):t=a[21],a[22]!==I||a[23]!==S||a[24]!==e||a[25]!==t?(n={label:e,tone:"caution",onHandle:k,title:t,icon:u.V13,dialog:I,disabled:S},a[22]=I,a[23]=S,a[24]=e,a[25]=t,a[26]=n):n=a[26],l=n}return l};ij.action="restore",ij.displayName="HistoryRestoreAction";let iv=(0,ep.dS)({name:"Document Published",version:1,description:'User clicked the "Publish" button in the document pane'}),iw={LIVE_EDIT_ENABLED:"action.publish.live-edit.publish-disabled",ALREADY_PUBLISHED:"action.publish.already-published.no-time-ago.tooltip",NO_CHANGES:"action.publish.no-changes.tooltip",NOT_READY:"action.publish.disabled.not-ready"};function i_(e){let t,n,i;let r=(0,s.c)(6),{publishedAt:o}=e,{t:a}=(0,x.$G7)(eP);r[0]===Symbol.for("react.memo_cache_sentinel")?(t={useTemporalPhrase:!0},r[0]=t):t=r[0];let c=(0,x.ofl)(o,t);return r[1]!==a||r[2]!==c?(n=a("action.publish.already-published.tooltip",{timeSincePublished:c}),r[1]=a,r[2]=c,r[3]=n):n=r[3],r[4]!==n?(i=(0,l.jsx)("span",{children:n}),r[4]=n,r[5]=i):i=r[5],i}let ik=e=>{var t,n;let i,r,o,a,d,p,m,h,f,y,b;let j=(0,s.c)(72),{id:v,type:w,liveEdit:_,draft:k,published:I}=e,[C,S]=(0,c.useState)(null),{publish:E}=(0,x.d9t)(v,w),T=(0,x.a3k)(v,w),z=(0,x.nuD)(v,w),{changesOpen:$,documentId:D,documentType:P}=t6(),R=(0,x.iav)(D,P),{t:L}=(0,x.$G7)(eP);j[0]!==R?.draft||j[1]!==R?.published?(i=R?.draft||R?.published||{},j[0]=R?.draft,j[1]=R?.published,j[2]=i):i=j[2];let A=i._rev;j[3]!==T.validation?(r=T.validation.some(g.YN),j[3]=T.validation,j[4]=r):r=j[4];let M=r,[O,N]=(0,c.useState)(!1),U=z.isSyncing,H=T.isValidating;j[5]!==v||j[6]!==w?(o={id:v,type:w,permission:"publish"},j[5]=v,j[6]=w,j[7]=o):o=j[7];let[V,B]=(0,x.hHf)(o),q=(0,x.xJ)();j[8]!==M||j[9]!==E.disabled||j[10]!==I||j[11]!==L?(a=E.disabled?(t=E.disabled,n=(I||{})._updatedAt,("ALREADY_PUBLISHED"===t&&n?(0,l.jsx)(i_,{publishedAt:n}):L(iw[t]))||""):M?L("action.publish.validation-issues.tooltip"):"",j[8]=M,j[9]=E.disabled,j[10]=I,j[11]=L,j[12]=a):a=j[12];let F=a,G=!!k;j[13]!==E?(d=()=>{E.execute(),S("publishing")},j[13]=E,j[14]=d):d=j[14];let W=d;j[15]!==W||j[16]!==M||j[17]!==U||j[18]!==O||j[19]!==A||j[20]!==T.isValidating||j[21]!==T.revision?(p=()=>{let e=!1===T.isValidating&&T.revision!==A;O&&!U&&e&&(M||W(),N(!1))},j[15]=W,j[16]=M,j[17]=U,j[18]=O,j[19]=A,j[20]=T.isValidating,j[21]=T.revision,j[22]=p):p=j[22],j[23]!==W||j[24]!==M||j[25]!==U||j[26]!==H||j[27]!==O||j[28]!==A||j[29]!==T.isValidating||j[30]!==T.revision?(m=[U,W,M,O,T.revision,A,H,T.isValidating],j[23]=W,j[24]=M,j[25]=U,j[26]=H,j[27]=O,j[28]=A,j[29]=T.isValidating,j[30]=T.revision,j[31]=m):m=j[31],(0,c.useEffect)(p,m),j[32]!==G||j[33]!==C?(h=()=>{let e="publishing"===C&&!G,t=e?"published":null,n=setTimeout(()=>{S(t)},e?200:4e3);return()=>clearTimeout(n)},j[32]=G,j[33]=C,j[34]=h):h=j[34],j[35]!==$||j[36]!==G||j[37]!==C?(f=[$,C,G],j[35]=$,j[36]=G,j[37]=C,j[38]=f):f=j[38],(0,c.useEffect)(h,f);let K=(0,ed.f1)();j[39]!==W||j[40]!==k?._createdAt||j[41]!==I||j[42]!==A||j[43]!==z.isSyncing||j[44]!==K||j[45]!==T.isValidating||j[46]!==T.revision?(y=()=>{K.log(iv,{publishedImmediately:!k?._createdAt,previouslyPublished:!!I}),z.isSyncing||T.isValidating||T.revision!==A?N(!0):W()},j[39]=W,j[40]=k?._createdAt,j[41]=I,j[42]=A,j[43]=z.isSyncing,j[44]=K,j[45]=T.isValidating,j[46]=T.revision,j[47]=y):y=j[47];let X=y;e:{let e,t,n;if(_){let e,t,n;j[48]!==L?(e=L("action.publish.live-edit.label"),j[48]=L,j[49]=e):e=j[49],j[50]!==L?(t=L("action.publish.live-edit.tooltip"),j[50]=L,j[51]=t):t=j[51],j[52]!==e||j[53]!==t?(n={tone:"default",icon:u.EI4,label:e,title:t,disabled:!0},j[52]=e,j[53]=t,j[54]=n):n=j[54],b=n;break e}if(!B&&!V?.granted){let e;j[55]!==q?(e={tone:"default",icon:u.EI4,label:"Publish",title:(0,l.jsx)(x.FMn,{context:"publish-document",currentUser:q}),disabled:!0},j[55]=q,j[56]=e):e=j[56],b=e;break e}let i=!!(O||R?.transactionSyncLock?.enabled||"publishing"===C||"published"===C||M||E.disabled),r=i||B;j[57]!==O||j[58]!==C||j[59]!==L?(e=L("published"===C?"action.publish.published.label":O||"publishing"===C?"action.publish.running.label":"action.publish.draft.label"),j[57]=O,j[58]=C,j[59]=L,j[60]=e):e=j[60],j[61]!==O||j[62]!==C||j[63]!==L||j[64]!==F?(t=O?L("action.publish.waiting"):"published"===C||"publishing"===C?null:F,j[61]=O,j[62]=C,j[63]=L,j[64]=F,j[65]=t):t=j[65];let o=i||O?null:"Ctrl+Alt+P";j[66]!==X||j[67]!==r||j[68]!==e||j[69]!==t||j[70]!==o?(n={disabled:r,tone:"default",label:e,icon:u.EI4,title:t,shortcut:o,onHandle:X},j[66]=X,j[67]=r,j[68]=e,j[69]=t,j[70]=o,j[71]=n):n=j[71],b=n}return b};ik.action="publish",ik.displayName="PublishAction";let iI={NOT_PUBLISHED:"action.unpublish.disabled.not-published",NOT_READY:"action.unpublish.disabled.not-ready",LIVE_EDIT_ENABLED:"action.unpublish.disabled.live-edit-enabled"},iC=({id:e,type:t,draft:n,onComplete:i,liveEdit:r})=>{let{unpublish:o}=(0,x.d9t)(e,t),[s,a]=(0,c.useState)(!1),[d,p]=(0,x.hHf)({id:e,type:t,permission:"unpublish"}),m=(0,x.xJ)(),{t:h}=(0,x.$G7)(eP),f=(0,c.useCallback)(()=>{a(!1),i()},[i]),g=(0,c.useCallback)(()=>{a(!1),o.execute(),i()},[i,o]),y=(0,c.useMemo)(()=>s?{type:"dialog",onClose:i,content:(0,l.jsx)(e9,{id:n?._id||e,type:t,action:"unpublish",onCancel:f,onConfirm:g})}:null,[n,e,f,g,s,i,t]);return(0,c.useMemo)(()=>r?null:p||d?.granted?{tone:"critical",icon:u.xEY,disabled:!!o.disabled||p,label:h("action.unpublish.label"),title:o.disabled?h(iI[o.disabled]):"",onHandle:()=>a(!0),dialog:y}:{tone:"critical",icon:u.xEY,label:"Unpublish",title:(0,l.jsx)(x.FMn,{context:"unpublish-document",currentUser:m}),disabled:!0},[m,y,p,r,d?.granted,h,o.disabled])};iC.action="unpublish",iC.displayName="UnpublishAction";let iS=(0,c.memo)(function(e){let t,n,i,r,d,u,p;let m=(0,s.c)(27),{disabled:h,showMenu:f,states:x}=e,{__internal_tasks:g}=t6();m[0]!==x?([t,...n]=x,m[0]=x,m[1]=t,m[2]=n):(t=m[1],n=m[2]);let[y,b]=(0,c.useState)(null);e:{let e,n,r,s;if(!t||!t.title&&!t.shortcut){i=null;break e}m[3]===Symbol.for("react.memo_cache_sentinel")?(e={maxWidth:300},m[3]=e):e=m[3],m[4]!==t.title?(n=t.title&&(0,l.jsx)(a.xv,{size:1,children:t.title}),m[4]=t.title,m[5]=n):n=m[5],m[6]!==t.shortcut?(r=t.shortcut&&(0,l.jsx)(o.p8,{"data-testid":"document-status-bar-hotkeys",fontSize:1,style:{marginTop:-4,marginBottom:-4},keys:String(t.shortcut).split("+").map(i$)}),m[6]=t.shortcut,m[7]=r):r=m[7],m[8]!==n||m[9]!==r?(s=(0,l.jsxs)(a.kC,{style:e,align:"center",gap:3,children:[n,r]}),m[8]=n,m[9]=r,m[10]=s):s=m[10],i=s}let j=i,v=g&&g.footerAction;return m[11]!==h||m[12]!==t||m[13]!==j?(r=t&&(0,l.jsx)(a.li,{zOffset:200,children:(0,l.jsx)(o.u,{disabled:!j,content:j,placement:"top",children:(0,l.jsx)(a.Kq,{children:(0,l.jsx)(o.zx,{"data-testid":`action-${ta(t.label)}`,disabled:h||!!t.disabled,icon:t.icon,onClick:t.onHandle,ref:b,size:"large",text:t.label,tone:t.tone||"primary"})})})}),m[11]=h,m[12]=t,m[13]=j,m[14]=r):r=m[14],m[15]!==h||m[16]!==n||m[17]!==f?(d=f&&n.length>0&&(0,l.jsx)(ic,{actionStates:n,disabled:h}),m[15]=h,m[16]=n,m[17]=f,m[18]=d):d=m[18],m[19]!==y||m[20]!==t?(u=t&&t.dialog&&(0,l.jsx)(is,{dialog:t.dialog,referenceElement:y}),m[19]=y,m[20]=t,m[21]=u):u=m[21],m[22]!==v||m[23]!==r||m[24]!==d||m[25]!==u?(p=(0,l.jsxs)(a.kC,{align:"center",gap:1,children:[v,r,d,u]}),m[22]=v,m[23]=r,m[24]=d,m[25]=u,m[26]=p):p=m[26],p}),iE=(0,c.memo)(function(){let e,t,n,i,r;let o=(0,s.c)(12),{actions:a,connectionState:c,documentId:d,editState:u}=t6();o[0]!==a?(t=a??[],o[0]=a,o[1]=t):t=o[1],o[2]!==t?(n=t.filter(iD),o[2]=t,o[3]=n):n=o[3],e=n,o[4]!==e.length||o[5]!==c||o[6]!==d?(i=t=>{let{states:n}=t;return(0,l.jsx)(iS,{disabled:"connected"!==c,showMenu:e.length>1,states:n},d)},o[4]=e.length,o[5]=c,o[6]=d,o[7]=i):i=o[7];let p=i;return 0!==e.length&&u?(o[8]!==e||o[9]!==u||o[10]!==p?(r=(0,l.jsx)(t0,{actions:e,actionProps:u,group:"default",children:p}),o[8]=e,o[9]=u,o[10]=p,o[11]=r):r=o[11],r):null}),iT=(0,c.memo)(function(){let e,t,n,i,r,o,a,c;let d=(0,s.c)(16),{actions:u,connectionState:p,editState:m,timelineStore:h}=t6(),f=x.P08(h,iP)?.id||"",g=(m?.draft||m?.published||{})._rev===f;d[0]!==m?(t=m||{},d[0]=m,d[1]=t):t=d[1],d[2]!==f||d[3]!==t?(n={...t,revision:f},d[2]=f,d[3]=t,d[4]=n):n=d[4],e=n,d[5]!==u?(r=u??[],d[5]=u,d[6]=r):r=d[6],d[7]!==r?(o=r.filter(iz).slice(-1),d[7]=r,d[8]=o):o=d[8],i=o,d[9]!==p||d[10]!==g?(a=e=>{let{states:t}=e;return(0,l.jsx)(iS,{disabled:"connected"!==p||!!g,showMenu:!1,states:t})},d[9]=p,d[10]=g,d[11]=a):a=d[11];let y=a;return d[12]!==i||d[13]!==y||d[14]!==e?(c=(0,l.jsx)(t0,{actions:i,actionProps:e,group:"default",children:y}),d[12]=i,d[13]=y,d[14]=e,d[15]=c):c=d[15],c});function iz(e){return e.action===ij.action}function i$(e){return e.slice(0,1).toUpperCase()+e.slice(1).toLowerCase()}function iD(e){return!iz(e)}function iP(e){return e.revTime}function iR(){let e,t;let n=(0,s.c)(11),{activeViewId:i,paneKey:r,views:o}=t6(),c=`${r}tabpanel`;if(n[0]!==i||n[1]!==r||n[2]!==c||n[3]!==o){let t;n[5]!==i||n[6]!==r||n[7]!==c?(t=(e,t)=>(0,l.jsx)(iL,{icon:e.icon,id:`${r}tab-${e.id}`,isActive:i===e.id,label:e.title,tabPanelId:c,viewId:0===t?null:e.id??null},e.id),n[5]=i,n[6]=r,n[7]=c,n[8]=t):t=n[8],e=o.map(t),n[0]=i,n[1]=r,n[2]=c,n[3]=o,n[4]=e}else e=n[4];return n[9]!==e?(t=(0,l.jsx)(a.td,{space:1,children:e}),n[9]=e,n[10]=t):t=n[10],t}function iL(e){let t,n,i,r,a,c,d,u,p;let m=(0,s.c)(20);m[0]!==e?({icon:t,id:n,isActive:i,label:r,tabPanelId:c,viewId:d,...a}=e,m[0]=e,m[1]=t,m[2]=n,m[3]=i,m[4]=r,m[5]=a,m[6]=c,m[7]=d):(t=m[1],n=m[2],i=m[3],r=m[4],a=m[5],c=m[6],d=m[7]);let{ready:h,editState:f}=t6(),{setView:x}=eK();m[8]!==x||m[9]!==d?(u=()=>x(d),m[8]=x,m[9]=d,m[10]=u):u=m[10];let g=u,y=!h&&!f?.draft&&!f?.published;return m[11]!==g||m[12]!==t||m[13]!==n||m[14]!==i||m[15]!==r||m[16]!==a||m[17]!==y||m[18]!==c?(p=(0,l.jsx)(o.OK,{...a,"aria-controls":c,disabled:y,icon:t,id:n,label:r,onClick:g,selected:i}),m[11]=g,m[12]=t,m[13]=n,m[14]=i,m[15]=r,m[16]=a,m[17]=y,m[18]=c,m[19]=p):p=m[19],p}function iA(){let e,t,n;let i=(0,s.c)(22),{connectionState:r,schemaType:o,title:a,editState:c}=t6(),d=c?.draft||c?.published,u=!!d;i[0]!==d||i[1]!==o||i[2]!==u?(e={enabled:u,schemaType:o,value:d},i[0]=d,i[1]=o,i[2]=u,i[3]=e):e=i[3];let{error:p,value:m}=(0,x._2T)(e),{t:h}=(0,x.$G7)(eP);if("connecting"===r&&!u){let e;return i[4]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)(l.Fragment,{}),i[4]=e):e=i[4],e}if(a){let e;return i[5]!==a?(e=(0,l.jsx)(l.Fragment,{children:a}),i[5]=a,i[6]=e):e=i[6],e}if(!d){let e,t;let n=o?.title||o?.name;return i[7]!==h||i[8]!==n?(e=h("panes.document-header-title.new.text",{schemaType:n}),i[7]=h,i[8]=n,i[9]=e):e=i[9],i[10]!==e?(t=(0,l.jsx)(l.Fragment,{children:e}),i[10]=e,i[11]=t):t=i[11],t}if(p){let e,t;return i[12]!==p.message||i[13]!==h?(e=h("panes.document-header-title.error.text",{error:p.message}),i[12]=p.message,i[13]=h,i[14]=e):e=i[14],i[15]!==e?(t=(0,l.jsx)(l.Fragment,{children:e}),i[15]=e,i[16]=t):t=i[16],t}return i[17]!==h||i[18]!==m?.title?(t=m?.title||(0,l.jsx)("span",{style:{color:"var(--card-muted-fg-color)"},children:h("panes.document-header-title.untitled.text")}),i[17]=h,i[18]=m?.title,i[19]=t):t=i[19],i[20]!==t?(n=(0,l.jsx)(l.Fragment,{children:t}),i[20]=t,i[21]=n):n=i[21],n}let iM=(0,c.memo)((0,c.forwardRef)(function(e,t){let{menuItems:n}=e,{actions:i,editState:r,onMenuAction:s,onPaneClose:d,onPaneSplit:p,menuItemGroups:m,schemaType:h,connectionState:f,views:g,unstable_languageFilter:y}=t6(),{features:b}=ni(),{index:j,BackLink:v,hasGroupSiblings:w}=eK(),{actions:_}=(0,x.qGk)(),[k,I]=(0,c.useState)(null),C=(0,c.useMemo)(()=>(i??[]).filter(e=>!iz(e)),[i]),S=(0,c.useMemo)(()=>tO({actionHandler:s,fieldActions:_,menuItems:n,menuItemGroups:m}),[s,_,m,n]),E=(0,c.useMemo)(()=>S.filter(tA),[S]),T=(0,c.useMemo)(()=>S.filter(tM),[S]),z=g.length>1,{collapsed:$,isLast:D}=tl(),P=b.splitViews&&p&&g.length>1,R=P&&w,L=b.backButton&&j>0,A=!R&&!L&&!!v,{t:M}=(0,x.$G7)(eP),O=(0,c.useCallback)(({states:e})=>(0,l.jsx)(iO,{contextMenuNodes:T,setReferenceElement:I,referenceElement:k,states:e}),[T,k]),N=(0,c.useMemo)(()=>(0,l.jsx)(iA,{}),[]),U=(0,c.useMemo)(()=>z&&(0,l.jsx)(iR,{}),[z]),H=(0,c.useMemo)(()=>L&&(0,l.jsx)(o.zx,{as:v,"data-as":"a",icon:u.Y4O,mode:"bleed",tooltipProps:{content:M("pane-header.back-button.text")}}),[v,L,M]),V=(0,c.useMemo)(()=>(0,l.jsxs)(a.kC,{align:"center",gap:1,children:[y.length>0&&(0,l.jsx)(l.Fragment,{children:y.map((e,t)=>(0,l.jsx)(e,{schemaType:h},`language-filter-${t}`))}),E.map(e=>(0,l.jsx)(tE,{node:e},e.key)),r&&(0,l.jsx)(t0,{actions:C,actionProps:r,group:"paneActions",children:O}),P&&(0,l.jsx)(o.zx,{"aria-label":M("buttons.split-pane-button.aria-label"),icon:u.iro,mode:"bleed",onClick:p,tooltipProps:{content:M("buttons.split-pane-button.tooltip")}},"split-pane-button"),R&&(0,l.jsx)(o.zx,{icon:u.Two,mode:"bleed",onClick:d,tooltipProps:{content:M("buttons.split-pane-close-button.title")}},"close-view-button"),A&&(0,l.jsx)(o.zx,{icon:u.Two,mode:"bleed",tooltipProps:{content:M("buttons.split-pane-close-group-button.title")},as:v},"close-view-button")]}),[v,C,r,E,d,p,O,h,A,P,R,M,y]);return(0,l.jsx)(o.uE,{children:(0,l.jsx)(tC,{border:!0,ref:t,loading:"connecting"===f&&!r?.draft&&!r?.published,title:N,tabs:U,tabIndex:D&&!$?-1:0,backButton:H,actions:V})})})),iO=(0,c.memo)(function(e){let t;let n=(0,s.c)(5),{setReferenceElement:i,referenceElement:r,contextMenuNodes:o}=e,a=(0,c.useDeferredValue)(e.states);return n[0]!==o||n[1]!==r||n[2]!==i||n[3]!==a?(t=(0,l.jsx)(iN,{setReferenceElement:i,referenceElement:r,contextMenuNodes:o,states:a}),n[0]=o,n[1]=r,n[2]=i,n[3]=a,n[4]=t):t=n[4],t}),iN=(0,c.memo)(function(e){let t,n;let i=(0,s.c)(8),{states:r,setReferenceElement:o,contextMenuNodes:a,referenceElement:c}=e;i[0]!==a||i[1]!==o||i[2]!==r?(t=e=>{let{handleAction:t}=e;return(0,l.jsx)("div",{ref:o,children:(0,l.jsx)(tx,{nodes:a,actionsNodes:r.length>0?r.map((e,n)=>(0,l.jsx)(id,{actionState:e,disabled:!!e.disabled,index:n,onAction:t},e.label)):void 0},"context-menu")})},i[0]=a,i[1]=o,i[2]=r,i[3]=t):t=i[3];let d=t;return i[4]!==c||i[5]!==d||i[6]!==r?(n=(0,l.jsx)(ia,{actionStates:r,referenceElement:c,children:d}),i[4]=c,i[5]=d,i[6]=r,i[7]=n):n=i[7],n});function iU(e){let t,n;let i=(0,s.c)(3),{size:r}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t={pointerEvents:"none",visibility:"hidden",width:0},i[0]=t):t=i[0],i[1]!==r?(n=(0,l.jsx)(o.zx,{"aria-hidden":!0,disabled:!0,size:r,style:t,text:"-"}),i[1]=r,i[2]=n):n=i[2],n}let iH={primary:"primary",success:"positive",warning:"caution",danger:"critical"},iV=(0,c.memo)(function(e){let t,n;let i=(0,s.c)(4),{states:r}=e;return 0===r.length?null:(i[0]!==r?(t=r.map(iG),i[0]=r,i[1]=t):t=i[1],i[2]!==t?(n=(0,l.jsx)(a.gF,{space:1,children:t}),i[2]=t,i[3]=n):n=i[3],n)}),iB=(0,c.memo)(function(e){let t;let n=(0,s.c)(2),i=(0,c.useDeferredValue)(e.states);return n[0]!==i?(t=(0,l.jsx)(iV,{states:i}),n[0]=i,n[1]=t):t=n[1],t});function iq(){let e;let t=(0,s.c)(3),{badges:n,editState:i}=t6();return i&&n?(t[0]!==n||t[1]!==i?(e=(0,l.jsx)(t1,{badges:n,badgeProps:i,children:iF}),t[0]=n,t[1]=i,t[2]=e):e=t[2],e):null}function iF(e){let{states:t}=e;return(0,l.jsx)(iB,{states:t})}function iG(e,t){return(0,l.jsx)(o.u,{content:e.title,disabled:!e.title,placement:"top",portal:!0,children:(0,l.jsx)(a.Ct,{fontSize:1,mode:"outline",paddingX:2,paddingY:1,radius:4,tone:e.color?iH[e.color]:void 0,style:{whiteSpace:"nowrap"},children:e.label})},`${e.label}-${t}`)}let iW=(0,_.zo)(ey.E.path)`
  transform-origin: center;
`,iK=e=>(0,l.jsx)(ey.E.circle,{fill:"none",r:"8",cx:"12.5",cy:"12.5",strokeWidth:"1.2",...e}),iX=e=>(0,l.jsx)(iW,{fill:"none",d:"M14 17.5619L11.5 20.5L14.5 23.0619M11 7.43811L13.5 4.50001L10.5 1.93811",...e}),iY=e=>(0,l.jsx)(ey.E.path,{d:"M9.5 12.1316L11.7414 14.5L16 10",...e}),iZ=(0,_.F4)`
  0% {
    transform: rotate(0);
  }
  100% {
    transform: rotate(360deg);
  }
`,iQ=_.zo.g`
  transform-origin: center;

  &[data-rotate] {
    animation: ${iZ} 1s ease-in-out infinite;
  }
`,iJ={syncing:{scale:1,transition:{duration:0}},saved:{scale:[1,.8,1.2,.9,1.1,.95,1.05,.99,1],transition:{duration:.5,delay:.2}},changes:{transition:{duration:0}}},i0={syncing:{strokeDasharray:"0, 0, 23, 3, 23, 3",strokeDashoffset:10,opacity:1,transition:{duration:0}},saved:{strokeDasharray:"0, 0, 23, 0, 23, 0",strokeDashoffset:10,opacity:1,transition:{duration:.2}},changes:{strokeDasharray:"0, 60, 23, 0, 23, 0",strokeDashoffset:0,opacity:0,transition:{duration:.5}}},i1={syncing:{opacity:1,transition:{duration:0}},saved:{opacity:0,transition:{duration:.2}},changes:{opacity:0}},i2={syncing:{pathLength:0,transition:{duration:0}},saved:{pathLength:1,transition:{delay:.4,duration:.3}},changes:{pathLength:0,transition:{duration:.2}}};function i3(e){let t,n,i,r,o;let a=(0,s.c)(13),{status:c}=e;if(!c)return null;let d="changes"===c?void 0:"";return a[0]!==c?(t=(0,l.jsx)(iX,{variants:i1,initial:c,animate:c}),n=(0,l.jsx)(iK,{variants:i0,initial:c,animate:c}),a[0]=c,a[1]=t,a[2]=n):(t=a[1],n=a[2]),a[3]!==d||a[4]!==t||a[5]!==n?(i=(0,l.jsxs)(iQ,{"data-rotate":d,children:[t,n]}),a[3]=d,a[4]=t,a[5]=n,a[6]=i):i=a[6],a[7]!==c?(r=(0,l.jsx)(iY,{variants:i2,initial:c,animate:c}),a[7]=c,a[8]=r):r=a[8],a[9]!==c||a[10]!==i||a[11]!==r?(o=(0,l.jsx)("svg",{width:"1em",height:"1em",viewBox:"0 0 25 25",fill:"none",stroke:"currentColor",strokeWidth:"1.2","data-sanity-icon":"animated-status-icon",children:(0,l.jsxs)(ey.E.g,{variants:iJ,initial:c,animate:c,children:[i,r]})}),a[9]=c,a[10]=i,a[11]=r,a[12]=o):o=a[12],o}let i4={saved:{i18nKey:"status-bar.document-status-pulse.status.saved.text",tone:"positive"},syncing:{i18nKey:"status-bar.document-status-pulse.status.syncing.text",tone:"default"}},i5=e=>{let t,n,i,r,o;let c=(0,s.c)(13),{status:d}=e,{t:u}=(0,x.$G7)(eP);if("saved"!==d&&"syncing"!==d)return null;let p=i4[d];return c[0]!==d?(t=(0,l.jsx)(i3,{status:d}),c[0]=d,c[1]=t):t=c[1],c[2]!==p.tone||c[3]!==t?(n=(0,l.jsx)(x.LPT,{size:1,tone:p.tone,children:t}),c[2]=p.tone,c[3]=t,c[4]=n):n=c[4],c[5]!==p.i18nKey||c[6]!==u?(i=u(p.i18nKey),c[5]=p.i18nKey,c[6]=u,c[7]=i):i=c[7],c[8]!==i?(r=(0,l.jsx)(a.xv,{muted:!0,size:1,children:i}),c[8]=i,c[9]=r):r=c[9],c[10]!==n||c[11]!==r?(o=(0,l.jsxs)(a.kC,{align:"center",gap:2,"data-testid":"pane-footer-document-status-pulse",children:[n,r]}),c[10]=n,c[11]=r,c[12]=o):o=c[12],o};function i6(e){let t,n,i,r,d,u,p,m,h,f,g;let y=(0,s.c)(33),{singleLine:b}=e,{documentId:j,documentType:v,editState:w,value:_}=t6(),[k,I]=(0,c.useState)(null),C=(0,x.nuD)(j,v),S=_?._updatedAt;if(y[0]!==k||y[1]!==C.isSyncing?(t=()=>{if("syncing"===k&&!C.isSyncing){let e=setTimeout(()=>I("saved"),1e3);return()=>clearTimeout(e)}if("saved"===k){let e=setTimeout(()=>I(null),3e3);return()=>clearTimeout(e)}},y[0]=k,y[1]=C.isSyncing,y[2]=t):t=y[2],y[3]!==S||y[4]!==k||y[5]!==C.isSyncing?(n=[k,S,C.isSyncing],y[3]=S,y[4]=k,y[5]=C.isSyncing,y[6]=n):n=y[6],(0,c.useEffect)(t,n),y[7]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{I(null)},y[7]=i):i=y[7],y[8]!==j?(r=[j],y[8]=j,y[9]=r):r=y[9],(0,c.useLayoutEffect)(i,r),y[10]!==C.isSyncing?(d=()=>{C.isSyncing&&I("syncing")},y[10]=C.isSyncing,y[11]=d):d=y[11],y[12]!==S||y[13]!==C.isSyncing?(u=[C.isSyncing,S],y[12]=S,y[13]=C.isSyncing,y[14]=u):u=y[14],(0,c.useLayoutEffect)(d,u),k){let e;let t=k||void 0;return y[15]!==t?(e=(0,l.jsx)(i5,{status:t}),y[15]=t,y[16]=e):e=y[16],e}let E=w?.draft,T=w?.published;y[17]!==E||y[18]!==T?(p=(0,l.jsx)(x._mO,{absoluteDate:!0,draft:E,published:T}),y[17]=E,y[18]=T,y[19]=p):p=y[19];let z=w?.draft,$=w?.published;y[20]!==z||y[21]!==$?(m=(0,l.jsx)(x.aAo,{draft:z,published:$}),y[20]=z,y[21]=$,y[22]=m):m=y[22];let D=w?.draft,P=w?.published;return y[23]!==b||y[24]!==D||y[25]!==P?(h=(0,l.jsx)(x._mO,{draft:D,published:P,singleLine:b}),y[23]=b,y[24]=D,y[25]=P,y[26]=h):h=y[26],y[27]!==m||y[28]!==h?(f=(0,l.jsxs)(a.kC,{align:"center",gap:3,children:[m,h]}),y[27]=m,y[28]=h,y[29]=f):f=y[29],y[30]!==f||y[31]!==p?(g=(0,l.jsx)(o.u,{content:p,placement:"top",children:f}),y[30]=f,y[31]=p,y[32]=g):g=y[32],g}let i8=(0,_.zo)(a.xv)`
  color: var(--card-muted-fg-color);

  em {
    color: var(--card-fg-color);
    font-weight: 500;
    font-style: normal;
  }
`;function i7(){let e,t,n,i;let r=(0,s.c)(8),{displayed:o}=t6(),{t:c}=(0,x.$G7)(),d=o?._updatedAt||o?._createdAt;r[0]!==d||r[1]!==c?(e=d?(0,l.jsx)(x.vNl,{t:c,i18nKey:"document-status.revision-from",values:{date:(0,ex.Z)(new Date(d),"MMM d, yyyy '@' pp")}}):null,r[0]=d,r[1]=c,r[2]=e):e=r[2],r[3]!==e?(t={name:"revision",text:e,tone:"caution"},r[3]=e,r[4]=t):t=r[4];let p=t;return r[5]===Symbol.for("react.memo_cache_sentinel")?(n=(0,l.jsx)(a.xu,{flex:"none",children:(0,l.jsx)(a.xv,{size:1,children:(0,l.jsx)(u.vaD,{})})}),r[5]=n):n=r[5],r[6]!==p.text?(i=(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(a.kC,{flex:1,gap:3,padding:2,children:[n,(0,l.jsx)(a.xu,{flex:1,children:(0,l.jsx)(i8,{size:1,textOverflow:"ellipsis",children:p.text})})]})}),r[6]=p.text,r[7]=i):i=r[7],i}function i9(e){let t,n,i,r,o,d;let u=(0,s.c)(21),{actionsBoxRef:p,createLinkMetadata:m}=e,{editState:h,timelineStore:f,onChange:g}=t6(),{title:y}=nc(),b=x.opE().components?.documentLinkedActions,j=(0,x.P08)(f,re),[v,w]=(0,c.useState)(null),[_,k]=(0,c.useState)(null);u[0]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{w(e.contentRect.width<480)},u[0]=t):t=u[0];let I=t;u[1]!==_?(n={element:_,onResize:I},u[1]=_,u[2]=n):n=u[2],function(e){let t,n;let i=(0,s.c)(4),{element:r,onResize:o}=e;i[0]!==r||i[1]!==o?(t=()=>(r&&x.x$w.observe(r,o),()=>{r&&x.x$w.unobserve(r)}),n=[r,o],i[0]=r,i[1]=o,i[2]=t,i[3]=n):(t=i[2],n=i[3]),(0,c.useLayoutEffect)(t,n)}(n);let C=h?.ready&&"boolean"==typeof v;if(m&&(0,x.EM_)(m)&&b){let e;u[3]!==b||u[4]!==m||u[5]!==g||u[6]!==y?(e=(0,l.jsx)(b,{metadata:m,panelPortalElementId:nn,onDocumentChange:g,documentTitle:y}),u[3]=b,u[4]=m,u[5]=g,u[6]=y,u[7]=e):e=u[7],i=e}else if(j){let e;u[8]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)(iT,{}),u[8]=e):e=u[8],i=e}else{let e;u[9]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)(iE,{}),u[9]=e):e=u[9],i=e}let S=j?"caution":void 0;return u[10]!==i||u[11]!==p||u[12]!==v||u[13]!==C||u[14]!==j?(r=C&&(0,l.jsxs)(a.kC,{align:"stretch",gap:1,justify:"space-between",paddingY:2,paddingLeft:j?3:4,paddingRight:j?2:3,children:[(0,l.jsxs)(a.kC,{align:"center",flex:1,gap:v?2:3,wrap:"wrap",paddingRight:3,children:[(0,l.jsxs)(a.kC,{align:"center",children:[j?(0,l.jsx)(i7,{}):(0,l.jsx)(i6,{singleLine:!v}),(0,l.jsx)(iU,{size:"large"})]}),(0,l.jsx)(iq,{})]}),(0,l.jsxs)(a.kC,{align:"flex-start",justify:"flex-end",ref:p,style:{flexShrink:0,marginLeft:"auto"},children:[(0,l.jsx)(iU,{size:"large"}),i]})]}),u[10]=i,u[11]=p,u[12]=v,u[13]=C,u[14]=j,u[15]=r):r=u[15],u[16]!==r?(o=(0,l.jsx)(a.kC,{direction:"column",ref:k,sizing:"border",children:r}),u[16]=r,u[17]=o):o=u[17],u[18]!==S||u[19]!==o?(d=(0,l.jsx)(a.Zb,{tone:S,children:o}),u[18]=S,u[19]=o,u[20]=d):d=u[20],d}function re(e){return e.onOlderRevision}let rt=(0,c.memo)(function(e){let t,n,i,r,o,a,c,d,u,p,m,h,f;let g=(0,s.c)(26);g[0]!==e?({actionsBoxElement:t,activeIndex:n,as:p,children:i,id:r,onActionStart:o,onKeyDown:a,rootRef:d,states:u,...c}=e,g[0]=e,g[1]=t,g[2]=n,g[3]=i,g[4]=r,g[5]=o,g[6]=a,g[7]=c,g[8]=d,g[9]=u,g[10]=p):(t=g[1],n=g[2],i=g[3],r=g[4],o=g[5],a=g[6],c=g[7],d=g[8],u=g[9],p=g[10]);let y=void 0===p?"div":p,b=u[n];g[11]!==o||g[12]!==a||g[13]!==u?(m=e=>{let t=u.filter(t=>t.shortcut&&(0,el.P6)(t.shortcut,e)),n=t[0];if(t.length>1&&console.warn(`Keyboard shortcut conflict: More than one document action matches the shortcut "${n.shortcut}"`),n&&!n.disabled&&n.onHandle){e.preventDefault(),n.onHandle(),o(u.indexOf(n));return}a&&a(e)},g[11]=o,g[12]=a,g[13]=u,g[14]=m):m=g[14];let j=m;return g[15]!==t||g[16]!==b?(h=b&&b.dialog&&(0,l.jsx)(x.jr5,{zOffset:"paneFooter",children:(0,l.jsx)(is,{dialog:b.dialog,referenceElement:t})}),g[15]=t,g[16]=b,g[17]=h):h=g[17],g[18]!==y||g[19]!==i||g[20]!==j||g[21]!==r||g[22]!==c||g[23]!==d||g[24]!==h?(f=(0,l.jsxs)(y,{id:r,onKeyDown:j,tabIndex:-1,...c,ref:d,children:[i,h]}),g[18]=y,g[19]=i,g[20]=j,g[21]=r,g[22]=c,g[23]=d,g[24]=h,g[25]=f):f=g[25],f}),rn=(0,c.memo)(e=>{let t,n,i,r,o,a,d,u,p;let m=(0,s.c)(18);m[0]!==e?({actionsBoxElement:t,as:r,children:n,...i}=e,m[0]=e,m[1]=t,m[2]=n,m[3]=i,m[4]=r):(t=m[1],n=m[2],i=m[3],r=m[4]);let h=void 0===r?"div":r,{actions:f,editState:x}=t6(),[g,y]=(0,c.useState)(-1);m[5]===Symbol.for("react.memo_cache_sentinel")?(o=e=>{y(e)},m[5]=o):o=m[5];let b=o;m[6]!==x?(d=x&&{...x,onComplete:ri,revision:void 0},m[6]=x,m[7]=d):d=m[7],a=d,m[8]!==t||m[9]!==g||m[10]!==h||m[11]!==n||m[12]!==i?(u=e=>{let{states:r}=e;return(0,l.jsx)(rt,{...i,activeIndex:g,actionsBoxElement:t,as:h,onActionStart:b,states:r,children:n})},m[8]=t,m[9]=g,m[10]=h,m[11]=n,m[12]=i,m[13]=u):u=m[13];let j=u;return a&&f?(m[14]!==a||m[15]!==f||m[16]!==j?(p=(0,l.jsx)(t0,{actionProps:a,actions:f,children:j}),m[14]=a,m[15]=f,m[16]=j,m[17]=p):p=m[17],p):null});function ri(){}rn.displayName="Memo(DocumentActionShortcuts)";let rr=e=>(0,x.Uy$)(e)&&"string"==typeof e._id&&"string"==typeof e._type;function ro(e){let t,n,i,r,o,l;let a=(0,s.c)(6),{resolveProductionUrl:d}=(0,x.Lky)().document;return a[0]===Symbol.for("react.memo_cache_sentinel")?(n=new N.X(void 0),a[0]=n):n=a[0],t=n,a[1]!==e?(i=()=>{t.next(e)},r=[t,e],a[1]=e,a[2]=i,a[3]=r):(i=a[2],r=a[3]),(0,c.useEffect)(i,r),a[4]!==d?(l=t.asObservable().pipe((0,Z.x)(),(0,en.b)(500),(0,Q.w)(e=>rr(e)?(0,U.D)(d({document:e})):(0,$.of)(void 0)),(0,Z.x)(),(0,L.K)(rl)),a[4]=d,a[5]=l):l=a[5],o=l,(0,eu.m)(o)}function rl(e){let t=(0,x.Uy$)(e)&&"string"==typeof e.message?e.message:"Unknown error";throw Error(`An error was thrown while trying to get your preview url: ${t}`)}function rs(e){let t,n,i,r,o,c,d;let u=(0,s.c)(23),{documentType:p,value:m,currentMinWidth:h,paneKey:f,minWidth:g}=e,{t:y}=(0,x.$G7)();return u[0]!==p?(t={documentType:p},u[0]=p,u[1]=t):t=u[1],u[2]!==y||u[3]!==t?(n=(0,l.jsx)(x.vNl,{t:y,i18nKey:"panes.document-pane.document-unknown-type.title",values:t}),u[2]=y,u[3]=t,u[4]=n):n=u[4],u[5]!==p||u[6]!==y?(i=p&&(0,l.jsx)(a.xv,{as:"p",children:(0,l.jsx)(x.vNl,{t:y,i18nKey:"panes.document-pane.document-unknown-type.text",values:{documentType:p}})}),u[5]=p,u[6]=y,u[7]=i):i=u[7],u[8]!==p||u[9]!==y?(r=!p&&(0,l.jsx)(a.xv,{as:"p",children:y("panes.document-pane.document-unknown-type.without-schema.text")}),u[8]=p,u[9]=y,u[10]=r):r=u[10],u[11]!==m?(o=x.r8Q&&m&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(a.xv,{as:"p",children:"Here is the JSON representation of the document:"}),(0,l.jsx)(a.Zb,{padding:3,overflow:"auto",radius:2,shadow:1,tone:"inherit",children:(0,l.jsx)(a.EK,{language:"json",size:[1,1,2],children:JSON.stringify(m,null,2)})})]}),u[11]=m,u[12]=o):o=u[12],u[13]!==i||u[14]!==r||u[15]!==o?(c=(0,l.jsxs)(a.Kq,{space:4,children:[i,r,o]}),u[13]=i,u[14]=r,u[15]=o,u[16]=c):c=u[16],u[17]!==h||u[18]!==g||u[19]!==f||u[20]!==n||u[21]!==c?(d=(0,l.jsx)(t2,{currentMinWidth:h,flex:2.5,minWidth:g,paneKey:f,title:n,tone:"caution",children:c}),u[17]=h,u[18]=g,u[19]=f,u[20]=n,u[21]=c,u[22]=d):d=u[22],d}let ra=[],rc=["fixed","fixed","absolute"],rd=(0,_.zo)(x.jbM)`
  flex: 1;
  display: flex;
  flex-direction: column;
  min-height: 0;
  min-width: 0;
`;function ru(){let{changesOpen:e,documentId:t,documentType:n,fieldActions:i,focusPath:r,inspectOpen:s,inspector:d,inspectors:p,onFocus:m,onHistoryOpen:h,onMenuAction:f,onPathOpen:g,paneKey:y,schemaType:b,value:j,isInitialValueLoading:v,ready:w}=t6(),{params:_}=eK(),{features:k}=ni(),{t:I}=(0,es.$G)(eP),{collapsed:C}=eq(),S=(0,x.Cnp)(),E=ro(j),T=(0,x.xaJ)(j),{documentLinkedBannerContent:z,startInCreateBanner:$}=(0,x.opE)().components??{},[D,P]=(0,c.useState)(null),[R,L]=(0,c.useState)(null),[A,M]=(0,c.useState)(null),[O,N]=(0,c.useState)(null),[U,H]=(0,c.useState)(null);(0,x.LxO)({element:D,focusPath:r,value:j});let[V,B]=(0,c.useState)([]),[q,F]=(0,c.useState)([]),G=(0,a.XL)(R),W=(0,a.XL)(A),K=G?.height,X=W?.height,Y=600+(d?320:0),Z=320+(d?320:0),Q=(0,c.useMemo)(()=>p?.find(e=>e.name===d?.name),[p,d?.name]),J=!!j,ee=(0,c.useMemo)(()=>(function(e){let t=function({currentInspector:e,hasValue:t,inspectors:n,inspectorMenuItems:i}){return n.map((n,r)=>{let o=i[r];return!o||o.hidden?null:{action:`${no}${n.name}`,group:o.showAsAction?void 0:"inspectors",icon:o.icon,isDisabled:!t,selected:e?.name===n.name,shortcut:o.hotkeys?.join("+"),showAsAction:o.showAsAction,title:o.title,tone:o.tone}}).filter(Boolean)}(e),n=[function({previewUrl:e,t}){return e?{action:"production-preview",group:"links",title:t("production-preview.menu-item.title"),icon:u.YE8,shortcut:"Ctrl+Alt+O"}:null}(e)].filter(Boolean);return[{action:"copy-document-url",showAsAction:!0,title:e.t("action.copy-document-url.label"),icon:u.xPt},...t,function({hasValue:e,t}){return{action:"inspect",group:"inspectors",title:t("document-inspector.menu-item.title"),icon:u.Pr8,isDisabled:!e,shortcut:"Ctrl+Alt+I"}}(e),...n]})({currentInspector:Q,features:k,hasValue:J,inspectorMenuItems:V,inspectors:p,previewUrl:E,t:I}),[Q,k,J,V,p,E,I]),et=(0,c.useCallback)(e=>{for(let t of ee)if(t.shortcut&&(0,el.P6)(t.shortcut,e)){e.preventDefault(),e.stopPropagation(),f(t);return}},[f,ee]),en=(0,c.useCallback)(e=>{g(e),m(e)},[g,m]),ei=(0,c.useMemo)(()=>({[nn]:U}),[U]);return b?(0,l.jsxs)(x.iWf,{value:j,children:[p.length>0&&(0,l.jsx)(na,{documentId:t,documentType:n,inspectors:p,onMenuItems:B}),i.length>0&&b&&(0,l.jsx)(x.QMc,{actions:i,documentId:t,documentType:n,onActions:F,path:ra,schemaType:b}),(0,l.jsx)(x.kNp,{actions:q,path:ra,children:(0,l.jsxs)(rn,{actionsBoxElement:O,as:tr,currentMinWidth:Y,"data-testid":"document-pane",flex:2.5,id:y,minWidth:Z,onKeyUp:et,rootRef:P,children:[(0,l.jsx)(iM,{ref:M,menuItems:ee}),T&&(0,x.EM_)(T)&&z&&(0,l.jsx)(rp,{children:(0,l.jsx)(nD,{tone:"transparent","data-test-id":"sanity-create-read-only-banner",content:(0,l.jsx)(z,{metadata:T})})}),(0,l.jsx)(a.Tu,{position:rc,zOffset:S.paneDialog,children:(0,l.jsx)(a.kC,{direction:"column",flex:1,height:C?void 0:"fill",children:(0,l.jsx)(rd,{"data-testid":"change-connector-root",isReviewChangesOpen:e&&_?.changesInspectorTab==="review",onOpenReviewChanges:h,onSetFocus:en,children:(0,l.jsx)(n6,{footerHeight:K||null,headerHeight:X||null,isInspectOpen:s,rootElement:D,setDocumentPanelPortalElement:H})})})}),(0,l.jsx)(a.Xp,{__unstable_elements:ei,children:(0,l.jsxs)(a.Tu,{position:rc,zOffset:S.portal,children:[$&&(0,l.jsx)(rp,{children:(0,l.jsx)($,{document:j,documentId:t,documentType:b,documentReady:w,isInitialValueLoading:!!v,panelPortalElementId:nn})}),(0,l.jsx)(tb,{ref:L,children:(0,l.jsx)(o.uE,{children:(0,l.jsx)(i9,{actionsBoxRef:N,createLinkMetadata:T})})})]})}),(0,l.jsx)(nu,{})]})})]}):(0,l.jsx)(rs,{currentMinWidth:Y,documentType:n,minWidth:Z,paneKey:y,value:j})}function rp(e){let{collapsed:t}=tl();return t?null:e.children}function rm(e){return e.document?.components?.unstable_layout}let rh=(0,ep.dS)({name:"DocumentURLCopied",version:1,description:"User copied document URL to clipboard"}),rf=(0,ep.dS)({name:"New Draft Created",version:1,description:"User created a new draft"}),rx=(0,c.memo)(e=>{let{children:t,index:n,pane:i,paneKey:r,onFocusPath:o}=e,s=(0,x.I_y)(),u=(0,x.zEW)(),{setDocumentMeta:p}=(0,x.ooN)(),{__internal_tasks:m,document:{actions:h,badges:f,unstable_fieldActions:g,unstable_languageFilter:y,inspectors:b}}=(0,x.Lky)(),j=(0,ed.f1)(),v=(0,x.ap5)(),w=eK(),_=w.setParams,{features:k}=ni(),{push:C}=(0,a.pm)(),{options:E,menuItemGroups:T=nl,title:z=null,views:$=[]}=i,D=(0,x.BoV)(E),P=D.id,R=(0,x.vsM)(P),L=E.type,A=(0,x.BoV)(w.params)||nr,M=(0,x.BoV)(w.payload),{templateName:O,templateParams:N}=(0,c.useMemo)(()=>(function(e,t){let n=t.panePayload||{},i=t.templateName;t.urlTemplate&&i&&i!==t.urlTemplate&&console.warn(`Conflicting templates: URL says "${t.urlTemplate}", structure node says "${i}". Using "${i}".`);let r=i||t.urlTemplate,o=e.filter(e=>e.schemaType===t.documentType),l={...t.templateParams,..."object"==typeof n&&n||{}},s=r;return r||1!==o.length||(s=o[0].id),{templateName:s,templateParams:l}})(u,{documentType:L,templateName:D.template,templateParams:D.templateParameters,panePayload:M,urlTemplate:A.template}),[L,D,A,M,u]),U=(0,x.t2O)({documentId:R,documentType:L,templateName:O,templateParams:N}),H=(0,x.BoV)(U),V=H.loading,{patch:B}=(0,x.d9t)(R,L),q=(0,x.iav)(R,L),{validation:F}=(0,x.a3k)(R,L),G=(0,x.z1O)(R,L),W=s.get(L),K=q?.draft||q?.published||H.value,[X,Y]=(0,c.useState)(!1),Z=(0,c.useMemo)(()=>h({schemaType:L,documentId:R}),[h,R,L]),Q=(0,c.useMemo)(()=>f({schemaType:L,documentId:R}),[f,R,L]),J=(0,c.useMemo)(()=>y({schemaType:L,documentId:R}),[R,L,y]),ee=(0,x.BoV)(F),et=(0,x.BoV)($),[en,ei]=(0,c.useState)(()=>A.path?(0,S.mL)(A.path):x.LZ8),er=(0,c.useRef)([]),eo=A.view||et[0]&&et[0].id||null,[el,es]=(0,c.useState)("closed"),[ea,ec]=(0,c.useState)(null),eu=(0,x.Dab)({documentId:R,documentType:L,onError:ec,rev:A.rev,since:A.since}),ep=(0,x.P08)(eu,e=>e.onOlderRevision),em=(0,x.P08)(eu,e=>e.revTime),eh=(0,x.P08)(eu,e=>e.sinceAttributes),ef=(0,x.P08)(eu,e=>e.timelineDisplayed),ex=(0,x.P08)(eu,e=>e.timelineReady),eg=(0,x.P08)(eu,e=>e.isPristine),ey=(0,c.useMemo)(()=>!!ex&&!q?.draft&&!q?.published&&!eg,[q?.draft,q?.published,eg,ex]),ew=ro(K),[e_,ek]=(0,c.useState)([]);(0,c.useEffect)(()=>{let e=v.documentPresence(R).subscribe(e=>{ek(e)});return()=>{e.unsubscribe()}},[R,v]);let eI=(0,c.useMemo)(()=>b({documentId:R,documentType:L}),[R,L,b]),[eC,eS]=(0,c.useState)(()=>A.inspect||null),eE=(0,c.useRef)(A.inspect);(0,c.useEffect)(()=>{eE.current!==A.inspect&&(eE.current=A.inspect,eS(A.inspect||null))},[A.inspect]);let eT=eI?.find(e=>e.name===eC),ez=eI.find(e=>e.name===ns),e$=eT?.name===ns,{t:eD}=(0,x.$G7)(eP),eR="on"===A.inspect,eL=e$?eh:q?.published||null,eA=(0,c.useMemo)(()=>W?g({documentId:R,documentType:L,schemaType:W}):[],[R,L,g,W]),eM="connected"===G&&q.ready&&(!A.rev||ex||!!ea),eO=(0,c.useMemo)(()=>ep?ef||{_id:K._id,_type:K._type}:K,[ep,ef,K]),eN=(0,c.useCallback)((e,t)=>{_({...A,since:e,rev:t||void 0})},[A,_]),eU=(0,c.useCallback)(e=>{tx.current||(ei(x.LZ8),er.current!==x.LZ8&&(er.current=x.LZ8,o?.(x.LZ8)))},[o,ei]),eH=(0,c.useRef)(()=>{throw Error("Attempted to patch the Sanity document during initial render or in an `useInsertionEffect`. Input components should only call `onChange()` in a useEffect or an event handler.")});(0,c.useInsertionEffect)(()=>{eH.current=e=>{q.draft||q.published||j.log(rf),B.execute((0,x.GWp)(e.patches),H.value)}},[q.draft,q.published,H.value,B,j]);let eV=(0,c.useCallback)(e=>eH.current(e),[]),eB=(0,c.useCallback)(e=>{let t=e&&eI.find(t=>t.name===e);if(e&&!t){console.warn(`No inspector named "${e}"`);return}if(eT){if(t){let e=t.onClose?.({params:A})??{params:A};eS(null),eE.current=void 0,_({...e.params,inspect:void 0});return}if(eT){let e=eT.onClose?.({params:A})??{params:A};eS(null),eE.current=void 0,_({...e.params,inspect:void 0})}}},[eT,eI,A,_]),eq=(0,c.useCallback)((e,t)=>{let n=eI.find(t=>t.name===e);if(!n){console.warn(`No inspector named "${e}"`);return}if(eT?.name===n.name){_({...A,...t,inspect:n.name});return}let i=A;eT&&(i=(n.onClose?.({params:i})??{params:i}).params);let r=n.onOpen?.({params:i})??{params:i};eS(n.name),eE.current=n.name,_({...r.params,...t,inspect:n.name})},[eT,eI,A,_]),eF=(0,c.useCallback)(()=>{ez&&eB(ez.name)},[eB,ez]),eG=(0,c.useCallback)(()=>{k.reviewChanges&&ez&&eq(ez.name,{changesInspectorTab:"review"})},[k.reviewChanges,eq,ez]),eW=(0,c.useCallback)(()=>w.closeCurrent(),[w]),eX=(0,c.useCallback)(()=>w.duplicateCurrent(),[w]),eY=(0,c.useCallback)((e=!eR)=>{_(e?{...A,inspect:"on"}:I(A,"inspect"))},[eR,A,_]),eZ=(0,c.useCallback)(e=>{if("production-preview"===e.action&&ew)return window.open(ew),!0;if("copy-document-url"===e.action&&navigator)return j.log(rh),navigator.clipboard.writeText(window.location.toString()),C({id:"copy-document-url",status:"info",title:eD("panes.document-operation-results.operation-success_copy-url")}),!0;if("inspect"===e.action)return eY(!0),!0;if("reviewChanges"===e.action)return eG(),!0;if("string"==typeof e.action&&e.action.startsWith(no)){let t=e.action.slice(no.length),n=eI.find(e=>e.name===t);if(n)return n.name===eC?eB(n.name):eq(n.name),!0}return!1},[eD,eB,eG,eC,eI,eq,ew,eY,C,j]),eQ=(0,c.useCallback)(()=>eY(!1),[eY]),[eJ,e0]=(0,c.useState)([]),[e1,e2]=(0,c.useState)(),[e3,e4]=(0,c.useState)(),[e5,e6]=(0,c.useState)(),e8=(0,c.useCallback)((e,t)=>{e4(n=>(0,x.pt$)(n,e,t))},[]),e7=(0,c.useCallback)((e,t)=>{e6(n=>(0,x.pt$)(n,e,t))},[]),e9=(0,c.useCallback)((e,t)=>e2(n=>(0,x.pt$)(n,e,t)),[]),te=K._createdAt?"update":"create",tt=!!W?.liveEdit,tn=K._id?K._id:"dummy-id",ti=(0,c.useMemo)(()=>({...K,_id:tt?(0,x.vsM)(tn):(0,x.qyu)(tn)}),[tt,K,tn]),[tr,to]=(0,x.vSY)({document:ti,permission:te}),tl=(0,x.dqi)(K),ts=!K?._id,ta=(0,c.useMemo)(()=>{let e=!to&&!tr?.granted,t=!(0,eb.jA)(W,"update"),n=ts&&!(0,eb.jA)(W,"create"),i="reconnecting"===G,r=q.transactionSyncLock?.enabled,o=!!(tt&&q.draft);return!eM||null!==em||e||t||n||i||r||X||ey||o||tl},[to,tr?.granted,W,ts,G,q.transactionSyncLock?.enabled,q.draft,tt,eM,em,X,ey,tl]),tc=(0,x.clL)({schemaType:W,documentValue:eO,readOnly:ta,comparisonValue:eL,focusPath:en,openPath:eJ,collapsedPaths:e3,presence:e_,validation:ee,collapsedFieldSets:e5,fieldGroupState:e1,changesOpen:e$});(0,c.useEffect)(()=>{p({documentId:R,documentType:L,schemaType:W,onChange:eV})},[R,L,W,eV,p]);let td=(0,c.useRef)(tc);(0,c.useEffect)(()=>{td.current=tc},[tc]);let tu=(0,c.useCallback)(e=>{(0,x.C8M)(td.current,e).forEach(e=>{"expandPath"===e.type&&e4(t=>(0,x.pt$)(t,e.path,!1)),"expandFieldSet"===e.type&&e6(t=>(0,x.pt$)(t,e.path,!1)),"setSelectedGroup"===e.type&&e2(t=>(0,x.pt$)(t,e.path,e.groupName))}),e0(e)},[td]),tp=(0,c.useCallback)((e,t)=>{v.setLocation([{type:"document",documentId:R,path:e,lastActiveAt:new Date().toISOString(),selection:t?.selection}])},[R,v]),tm=(0,c.useMemo)(()=>ej(tp,1e3,{leading:!0,trailing:!0}),[tp]),th=(0,c.useCallback)((e,t)=>{let n=(0,S.s6)(e);n!==er.current&&(ei((0,S.s6)(n)),tu((0,S.s6)(n.slice(0,-1))),er.current=n,o?.(n)),tm(n,t)},[o,tu,tm]),tf=(0,c.useMemo)(()=>({actions:Z,activeViewId:eo,badges:Q,changesOpen:e$,closeInspector:eB,collapsedFieldSets:e5,collapsedPaths:e3,compareValue:eL,connectionState:G,displayed:eO,documentId:R,documentIdRaw:P,documentType:L,editState:q,fieldActions:eA,focusPath:en,inspector:eT||null,inspectors:eI,__internal_tasks:m,onBlur:eU,onChange:eV,onFocus:th,onPathOpen:tu,onHistoryClose:eF,onHistoryOpen:eG,onInspectClose:eQ,onMenuAction:eZ,onPaneClose:eW,onPaneSplit:eX,onSetActiveFieldGroup:e9,onSetCollapsedPath:e8,onSetCollapsedFieldSet:e7,openInspector:eq,openPath:eJ,index:n,inspectOpen:eR,validation:ee,menuItemGroups:T||[],paneKey:r,previewUrl:ew,ready:eM,schemaType:W,isPermissionsLoading:to,isInitialValueLoading:V,permissions:tr,setTimelineMode:es,setTimelineRange:eN,setIsDeleting:Y,isDeleting:X,isDeleted:ey,timelineError:ea,timelineMode:el,timelineStore:eu,title:z,value:K,views:et,formState:tc,unstable_languageFilter:J}),[m,Z,eo,Q,e$,eB,e5,e3,eL,G,eT,eO,R,P,L,q,eA,en,tc,eU,eV,th,eF,eG,eQ,eZ,e7,e8,eW,eX,e9,n,eR,eI,ey,X,to,V,J,T,eq,eJ,r,tr,ew,eM,W,tu,eN,ea,el,eu,z,ee,K,et]);(0,c.useEffect)(()=>{let e;return"reconnecting"===G&&(e=setTimeout(()=>{C({id:"sanity/structure/reconnecting",status:"warning",title:eD("panes.document-pane-provider.reconnecting.title")})},2e3)),()=>{e&&clearTimeout(e)}},[G,C,eD]);let tx=(0,c.useRef)(!1);return(0,c.useEffect)(()=>{if(eM&&A.path){let{path:e,...t}=A,n=(0,S.vW)(td.current?.value,(0,S.mL)(e));tx.current=!0,ev(er.current,n)||(ei(n),tu(n),er.current=n,o?.(n));let i=setTimeout(()=>{tx.current=!1},0);return w.setParams(t),()=>clearTimeout(i)}},[A,R,o,tu,eM,w]),(0,l.jsx)(d.cO.Provider,{value:tf,children:t})});rx.displayName="Memo(DocumentPaneProvider)";let rg=(0,c.memo)(function(e){let t,n;let i=(0,s.c)(5),{name:r}=(0,x.Lky)(),o=e.pane.source||r;return i[0]!==e?(t=(0,l.jsx)(x.Or8,{children:(0,l.jsx)(ry,{...e})}),i[0]=e,i[1]=t):t=i[1],i[2]!==o||i[3]!==t?(n=(0,l.jsx)(x.cWh,{name:o,children:t}),i[2]=o,i[3]=t,i[4]=n):n=i[4],n});function ry(e){let t,n,i,r,o,c,d,u,p,m,h,f;let g=(0,s.c)(53),{pane:y,paneKey:b}=e,{resolveNewDocumentOptions:j}=(0,x.Lky)().document,v=eK(),w=function(e,t){let n,i;let r=(0,s.c)(8);r[0]!==t?(n=void 0===t?{}:t,r[0]=t,r[1]=n):n=r[1];let o=n,l=(0,x.zEW)();e:{let t,n;if(e.type&&"*"!==e.type){i=e;break e}let s=e.template||o.template;r[2]!==s||r[3]!==l?(t=s?l.find(e=>e.id===s):void 0,r[2]=s,r[3]=l,r[4]=t):t=r[4];let a=t?.schemaType;if(!a){i=e;break e}r[5]!==a||r[6]!==e?(n={...e,type:a},r[5]=a,r[6]=e,r[7]=n):n=r[7],i=n}return i}(y.options,v.params),{documentType:_,isLoaded:k}=(0,x.Hdz)(w.id,w.type),I=function(){let e;let t=(0,s.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={pick:rm,defaultComponent:ru},t[0]=e):e=t[0],(0,x.uwK)(e)}();g[0]!==w.id||g[1]!==w.type||g[2]!==j?(n=j({type:"document",documentId:w.id,schemaType:w.type}),g[0]=w.id,g[1]=w.type,g[2]=j,g[3]=n):n=g[3],t=n,g[4]!==t?(i={templateItems:t},g[4]=t,g[5]=i):i=g[5];let[C,E]=(0,x.UMU)(i),T=k&&!E;g[6]!==_||g[7]!==T||g[8]!==w||g[9]!==e?(o=T&&_&&w.type!==_?{...e,pane:{...e.pane,options:{...w,type:_}}}:e,g[6]=_,g[7]=T,g[8]=w,g[9]=e,g[10]=o):o=g[10],r=o;let{ReferenceChildLink:z,handleEditReference:$,groupIndex:D,routerPanesState:P}=v;g[11]!==D||g[12]!==P?(c=P[D+1]?.[0].params||{},g[11]=D,g[12]=P,g[13]=c):c=g[13];let R=c,L=P.length,{parentRefPath:A}=R;g[14]!==D||g[15]!==A||g[16]!==L?(u=A?{path:(0,S.mL)(A),state:D>=L-1?"none":D>=L-2?"selected":"pressed"}:{path:[],state:"none"},g[14]=D,g[15]=A,g[16]=L,g[17]=u):u=g[17],d=u;let{t:M}=(0,x.$G7)(eP);if("*"===w.type&&!T){let e,t;return g[18]!==M?(e=M("panes.document-pane.document-not-found.loading"),g[18]=M,g[19]=e):e=g[19],g[20]!==b||g[21]!==e?(t=(0,l.jsx)(t5,{flex:2.5,minWidth:320,paneKey:b,title:e}),g[20]=b,g[21]=e,g[22]=t):t=g[22],t}if(!_){let e,t,n,i,r;return g[23]!==M?(e=M("panes.document-pane.document-not-found.title"),g[23]=M,g[24]=e):e=g[24],g[25]!==w.id?(t={id:w.id},g[25]=w.id,g[26]=t):t=g[26],g[27]===Symbol.for("react.memo_cache_sentinel")?(n={Code:rb},g[27]=n):n=g[27],g[28]!==M||g[29]!==t?(i=(0,l.jsx)(a.Kq,{space:4,children:(0,l.jsx)(a.xv,{as:"p",children:(0,l.jsx)(x.vNl,{t:M,i18nKey:"panes.document-pane.document-not-found.text",values:t,components:n})})}),g[28]=M,g[29]=t,g[30]=i):i=g[30],g[31]!==b||g[32]!==i||g[33]!==e?(r=(0,l.jsx)(t2,{flex:2.5,minWidth:320,paneKey:b,title:e,children:i}),g[31]=b,g[32]=i,g[33]=e,g[34]=r):r=g[34],r}let O=`${_}-${w.id}`;return g[35]!==I||g[36]!==w.id||g[37]!==w.type?(p=(0,l.jsx)(I,{documentId:w.id,documentType:w.type}),g[35]=I,g[36]=w.id,g[37]=w.type,g[38]=p):p=g[38],g[39]!==w.id||g[40]!==w.type||g[41]!==p?(m=(0,l.jsx)(t8,{documentId:w.id,documentType:w.type,children:p}),g[39]=w.id,g[40]=w.type,g[41]=p,g[42]=m):m=g[42],g[43]!==z||g[44]!==d||g[45]!==$||g[46]!==m||g[47]!==C?(h=(0,l.jsx)(x.euX,{EditReferenceLinkComponent:z,onEditReference:$,initialValueTemplateItems:C,activePath:d,children:m}),g[43]=z,g[44]=d,g[45]=$,g[46]=m,g[47]=C,g[48]=h):h=g[48],g[49]!==r||g[50]!==h||g[51]!==O?(f=(0,l.jsx)(rx,{...r,children:h},O),g[49]=r,g[50]=h,g[51]=O,g[52]=f):f=g[52],f}function rb(e){let{children:t}=e;return(0,l.jsx)("code",{children:t})}let rj={by:[{field:"_updatedAt",direction:"desc"}]},rv={},rw=(0,_.zo)(a.xu)`
  position: relative;
  opacity: ${e=>e.$opacity||1};
  transition: opacity 0.4s;
`,r_=(0,_.zo)(a.xu)`
  position: absolute;
  left: 0;
  right: 0;
  top: 0;
  bottom: 0;
`,rk=[...Array(30).keys()];function rI(e){let t,n;let i=(0,s.c)(4),{layout:r}=e;return i[0]!==r?(t=rk.map(e=>(0,l.jsx)(x.ogX,{isPlaceholder:!0,layout:r},e)),i[0]=r,i[1]=t):t=i[1],i[2]!==t?(n=(0,l.jsx)(a.Kq,{paddingX:3,paddingY:2,paddingTop:0,space:1,children:t}),i[2]=t,i[3]=n):n=i[3],n}function rC(e){let t,n,i,r,o,d,u;let p=(0,s.c)(59),{childItemId:m,error:h,filterIsSimpleTypeConstraint:f,hasMaxItems:g,hasSearchQuery:y,isActive:b,isLazyLoading:j,isLoading:v,items:w,layout:_,loadingVariant:k,onEndReached:I,onRetry:C,paneTitle:S,searchInputElement:E,showIcons:T}=e,z=(0,x.I_y)(),{collapsed:$}=eq(),{collapsed:D,index:P}=tl(),[R,L]=(0,c.useState)(!D),{t:A}=(0,x.$G7)(eP);p[0]!==I||p[1]!==R?(t=()=>{R&&I()},p[0]=I,p[1]=R,p[2]=t):t=p[2];let M=t;p[3]!==D?(n=()=>{if(D)return;let e=setTimeout(()=>{L(!0)},0);return()=>{clearTimeout(e)}},p[3]=D,p[4]=n):n=p[4],p[5]!==D||p[6]!==w?(i=[D,w],p[5]=D,p[6]=w,p[7]=i):i=p[7],(0,c.useEffect)(n,i),p[8]!==m||p[9]!==g||p[10]!==b||p[11]!==j||p[12]!==w.length||p[13]!==_||p[14]!==z||p[15]!==T||p[16]!==A?(r=(e,t)=>{let{activeIndex:n}=t,i=(0,x.vsM)(e._id),r=m===i,o=!b&&r,s=b&&r,c=n===w.length-1,d=c&&j,u=c&&g;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(tQ,{icon:!1!==T&&void 0,id:i,layout:_,marginBottom:1,pressed:o,schemaType:z.get(e._type),selected:s,value:e}),d&&(0,l.jsx)(x.Bwn,{}),u&&(0,l.jsx)(a.xu,{marginY:1,paddingX:3,paddingY:4,children:(0,l.jsx)(a.xv,{align:"center",muted:!0,size:1,children:A("panes.document-list-pane.max-items.text",{limit:2e3})})})]})},p[8]=m,p[9]=g,p[10]=b,p[11]=j,p[12]=w.length,p[13]=_,p[14]=z,p[15]=T,p[16]=A,p[17]=r):r=p[17];let O=r;e:{let e,t;if(y){let e,t;p[18]!==A?(e=A("panes.document-list-pane.no-documents.text"),p[18]=A,p[19]=e):e=p[19],p[20]!==e?(t=(0,l.jsx)(a.kC,{align:"center",direction:"column",height:"fill",justify:"center",children:(0,l.jsx)(a.W2,{width:1,children:(0,l.jsx)(a.xu,{paddingX:4,paddingY:5,children:(0,l.jsx)(a.xv,{align:"center",muted:!0,children:e})})})}),p[20]=e,p[21]=t):t=p[21],o=t;break e}p[22]!==f||p[23]!==A?(e=A(f?"panes.document-list-pane.no-documents-of-type.text":"panes.document-list-pane.no-matching-documents.text"),p[22]=f,p[23]=A,p[24]=e):e=p[24],p[25]!==e?(t=(0,l.jsx)(a.kC,{align:"center",direction:"column",height:"fill",justify:"center",children:(0,l.jsx)(a.W2,{width:1,children:(0,l.jsx)(a.xu,{paddingX:4,paddingY:5,children:(0,l.jsx)(a.xv,{align:"center",muted:!0,children:e})})})}),p[25]=e,p[26]=t):t=p[26],o=t}let N=o;t:{let e,t;if(!R){d=null;break t}if(h){let e,t,n,i,r,o,s;p[27]!==A?(e=A("panes.document-list-pane.error.title"),p[27]=A,p[28]=e):e=p[28],p[29]!==e?(t=(0,l.jsx)(a.X6,{as:"h3",children:e}),p[29]=e,p[30]=t):t=p[30],p[31]!==h.message?(n={error:h.message},p[31]=h.message,p[32]=n):n=p[32],p[33]===Symbol.for("react.memo_cache_sentinel")?(i={Code:rS},p[33]=i):i=p[33],p[34]!==A||p[35]!==n?(r=(0,l.jsx)(a.xv,{as:"p",children:(0,l.jsx)(x.vNl,{t:A,i18nKey:"panes.document-list-pane.error.text",values:n,components:i})}),p[34]=A,p[35]=n,p[36]=r):r=p[36],p[37]!==h||p[38]!==C?(o=(0,l.jsx)(x.fZm,{error:h,eventId:null,onRetry:C}),p[37]=h,p[38]=C,p[39]=o):o=p[39],p[40]!==r||p[41]!==o||p[42]!==t?(s=(0,l.jsx)(a.kC,{align:"center",direction:"column",height:"fill",justify:"center",children:(0,l.jsx)(a.W2,{width:1,children:(0,l.jsxs)(a.Kq,{paddingX:4,paddingY:5,space:4,children:[t,r,o]})})}),p[40]=r,p[41]=o,p[42]=t,p[43]=s):s=p[43],d=s;break t}if(!v&&0===w.length){d=N;break t}if("initial"===k&&v){let e;p[44]!==_?(e=(0,l.jsx)(te,{ms:300,children:(0,l.jsx)(rI,{layout:_})}),p[44]=_,p[45]=e):e=p[45],d=e;break t}if("spinner"===k&&v){d=null;break t}let n=`${P}-${D}`,i="subtle"===k?.8:1;p[46]!==M||p[47]!==w||p[48]!==n||p[49]!==S||p[50]!==O||p[51]!==E?(e=(0,l.jsx)(r_,{children:(0,l.jsx)(x.e8h,{activeItemDataAttr:"data-hovered",ariaLabel:S,canReceiveFocus:!0,inputElement:E,itemHeight:51,items:w,onEndReached:M,onlyShowSelectionWhenActive:!0,overscan:10,paddingBottom:1,paddingX:3,renderItem:O,wrapAround:!1},n)}),p[46]=M,p[47]=w,p[48]=n,p[49]=S,p[50]=O,p[51]=E,p[52]=e):e=p[52],p[53]!==i||p[54]!==e?(t=(0,l.jsx)(rw,{overflow:"hidden",height:"fill",$opacity:i,children:e}),p[53]=i,p[54]=e,p[55]=t):t=p[55],d=t}let U=d,H=$||"initial"===k?"hidden":"auto";return p[56]!==U||p[57]!==H?(u=(0,l.jsx)(ts,{"data-testid":"document-list-pane",overflow:H,children:U}),p[56]=U,p[57]=H,p[58]=u):u=p[58],u}function rS(e){let{children:t}=e;return(0,l.jsx)("code",{children:t})}function rE(e,t={}){try{let n=function e(t){switch(t.type){case"OpCall":{let{left:e,right:n}=t;switch(t.op){case"==":return"AccessAttribute"!==e.type||"_type"!==e.name||e.base?"AccessAttribute"!==n.type||"_type"!==n.name||n.base?null:"Value"!==e.type||"string"!=typeof e.value?null:new Set([e.value]):"Value"!==n.type||"string"!=typeof n.value?null:new Set([n.value]);case"in":{if("AccessAttribute"!==e.type||"_type"!==e.name||e.base||"Array"!==n.type)return null;let t=new Set;for(let e of n.elements){if(e.isSplat||"Value"!==e.value.type||"string"!=typeof e.value.value)return null;t.add(e.value.value)}return t.size?t:null}default:return null}}case"Group":return e(t.base);case"Or":{let n=e(t.left);if(!n)return null;let i=e(t.right);return i?new Set([...n,...i]):null}case"And":{let n=e(t.left),i=e(t.right);return n||i?new Set([...n||[],...i||[]]):null}default:return null}}((0,eE.Qc)(e,{params:t}));return n?Array.from(n).sort():null}catch{return null}}let rT=["_id","_type","_createdAt","_updatedAt","_rev"];function rz(e,t,n=!1){return t.map(t=>(function e(t,n,i=!1){let[r,...o]=n;if(!("fields"in t))return"";let l=t.fields.find(e=>e.name===r);if(!l){if(!rT.includes(r)){let e=`The current ordering config targeted the nonexistent field "${r}" on schema type "${t.name}". It should be one of ${t.fields.map(e=>e.name).join(", ")}`;if(i)throw Error(e);console.warn(e)}return""}if("to"in l.type&&"reference"===l.type.name){let t=l.type.to;return`${r}->{${t.map(t=>e(t,o)).join(",")}}`}let s=o.length>0&&e(l.type,o),a=s?`{${s}}`:"";return o.length>0?`${r}${a}`:r})(e,t.field.split("."),n)).join(", ")}let r$=(0,x.h40)({maxSize:100});function rD(e){let{client:t,schema:n,sort:i,limit:r,params:o,filter:l,searchQuery:s,staticTypeNames:a,maxFieldDepth:c,searchStrategy:d}=e,u=i.by,p=i?.extendedProjection,m=(0,H.P)(()=>t.listen(`*[${l}]`,o,{events:["welcome","mutation","reconnect"],includeResult:!1,visibility:"query"})).pipe((0,V.z)((e,t)=>0===t&&"welcome"!==e.type?(0,B._)(()=>Error("reconnect"===e.type?"Could not establish EventSource connection":`Received unexpected type of first event "${e.type}"`)):(0,$.of)(e)),(0,q.B)()),[h,f]=(0,F.u)(m,e=>"welcome"===e.type),g=JSON.stringify({filter:l,limit:r,params:o,searchQuery:s,sort:i,staticTypeNames:a});return(0,D.T)(h.pipe((0,G.q)(1)),f.pipe((0,W.p)(1e3,K.z,{leading:!0,trailing:!0}))).pipe((0,ez.q)(e=>(a?(0,$.of)(a):t.observable.fetch(`array::unique(*[${l}][]._type)`,o)).pipe((0,V.z)(m=>{let h=(0,x.wBu)(n,a||[]).filter(e=>!!m.includes(e.name)&&(rz(e,i.by,!0),!0)),f=(0,x.mju)(h,t,{filter:l,params:o,strategy:d,maxDepth:c}),g=()=>f({query:s||"",types:h},{__unstable_extendedProjection:p,comments:[`findability-source: ${s?"list-query":"list"}`],limit:r,skipSortByScore:!0,sort:u}).pipe((0,P.U)(e=>e.hits.map(({hit:e})=>e)));return"mutation"===e.type&&"query"!==e.visibility?(0,T.H)(1200).pipe((0,V.z)(g)):g()}))),r$(g),(0,P.U)(({fromCache:e,value:t})=>({fromCache:e,documents:t})))}let rP={error:null,isLoading:!0,isLoadingFullList:!1,fromCache:!1,items:[]},rR="[WARNING: This was thrown as a non-error. Only Error instances should be thrown]",rL=(0,_.F4)`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,rA=(0,_.F4)`
  0% {
    opacity: 0;
  }
  50% {
    opacity: 0.1;
  }
  100% {
    opacity: 0.4;
  }
`,rM=(0,_.zo)(u.L4p)`
  animation: ${rL} 500ms linear infinite;
`,rO=(0,_.zo)(u.L4p)`
  animation: ${rL} 1500ms linear infinite;
  opacity: 0.4;
`,rN=(0,_.zo)(u.L4p)`
  animation:
    ${rL} 1500ms linear infinite,
    ${rA} 1000ms linear;
  opacity: 0.4;
`,rU=(0,c.memo)(function(e){let{childItemId:t,isActive:n,pane:i,paneKey:r,sortOrder:o,layout:s}=e,d=(0,x.I_y)(),{displayOptions:p,options:m}=i,{apiVersion:h,filter:f}=m,y=ol(m.params||rv),b=(0,c.useMemo)(()=>{let e=rE(f,y);return e?.length===1?e[0]:null},[f,y]),j=p?.showIcons!==!1,{t:v}=(0,x.$G7)(eP),{title:w}=(0,x.v0Z)(i),[_,k]=(0,c.useState)(""),[I,C]=(0,c.useState)(""),[z,R]=(0,c.useState)(null),M=b&&o?function(e,t){let n=e.by.map(e=>{if(e.mapWith)return e;let n=function(e,t){let n=S.mL(t),i=e;for(let e of n){if(!i)return;if("string"==typeof e){i=function(e,t){if(!("fields"in e))return;let n=e.fields.find(e=>e.name===t);return n?n.type:void 0}(i,e);continue}if(!((0,g.Fd)(e)||(0,g.dw)(e))||"array"!==i.jsonType)return;let[t,n]=i.of||[];if(n||!t)return;if(!(0,g.dD)(t)){i=t;continue}let[r,o]=t.to||[];if(o||!r)return;i=r}return i}(t,e.field);return n?!function(e,t){let n=e.type;for(;n;){if(n.name===t||!n.type&&n.jsonType===t)return!0;n=n.type}return!1}(n,"datetime")?"string"===n.jsonType?{...e,mapWith:"lower"}:e:{...e,mapWith:"dateTime"}:e});return n.every((t,n)=>t===e.by[n])?e:{...e,by:n}}(o,d.get(b)):o,N=(0,x.BoV)(M),{error:U,isLoadingFullList:H,isLoading:B,items:F,fromCache:W,onLoadFullList:K,onRetry:Z}=function(e){let{filter:t,params:n,sortOrder:i,searchQuery:r,apiVersion:o}=e,l=(0,x.m85)({...x.Dr7,apiVersion:o||x.Dr7.apiVersion}),{strategy:s}=(0,x.cFj)().search,a=(0,x.I_y)(),d=(0,x.NFh)(),u=(0,c.useMemo)(()=>rE(t,n),[t,n]),[[p,m]]=(0,c.useState)(()=>(0,eT.E)()),[[h,f]]=(0,c.useState)(()=>(0,eT.E)()),g=(0,c.useMemo)(()=>{let e={client:l,filter:t,limit:100,params:n,schema:a,searchQuery:r||"",sort:i||rj,staticTypeNames:u,maxFieldDepth:d,searchStrategy:s},o=rD(e).pipe((0,J.d)({refCount:!0,bufferSize:1})),c=h.pipe((0,ei.M)(o),(0,O.h)(([,e])=>e?.documents.length===100),(0,G.q)(1),(0,V.z)(()=>(0,A.z)((0,$.of)({type:"loadFullList"}),rD({...e,limit:2e3}).pipe((0,P.U)(e=>({type:"result",result:e}))))),(0,q.B)());return(0,D.T)(o.pipe((0,P.U)(e=>({type:"result",result:e})),(0,er.R)(c)),c).pipe((0,L.K)((e,t)=>(0,A.z)((0,$.of)({type:"error",error:e instanceof Error?e:"object"==typeof e&&null!==e&&"message"in e&&"string"==typeof e.message?Error(`${e.message} ${rR}`):Error(`${String(e)} ${rR}`)}),(0,D.T)((0,E.R)(window,"online"),p).pipe((0,G.q)(1),(0,V.z)(()=>t)))),(0,eo.R)((e,t)=>{if("error"===t.type)return{...e,error:t.error};if("result"===t.type){var n;return{...e,error:null,fromCache:t.result.fromCache,isLoading:!1,items:(n=t.result.documents,(0,x.RgL)(n).map(e=>({...e.draft||e.published,hasPublished:!!e.published,hasDraft:!!e.draft}))),isLoadingFullList:!1}}if("loadFullList"===t.type)return{...e,error:null,isLoadingFullList:!0};throw Error("Unexpected")},rP))},[l,t,n,a,r,i,u,d,s,h,p]),{error:y,items:b,isLoading:j,fromCache:v,isLoadingFullList:w}=(0,eu.m)(g,rP);return{error:y,onRetry:m,isLoading:j,items:b,fromCache:v,onLoadFullList:f,isLoadingFullList:w}}({apiVersion:h,filter:f,params:y,searchQuery:_?.trim(),sortOrder:N}),Q=(0,eu.H)(e=>e.pipe((0,P.U)(e=>e.target.value),(0,X.b)(C),(0,Y.D)(e=>""===e?(0,$.of)(""):(0,T.H)(300)),(0,X.b)(k))),ee=(0,c.useCallback)(()=>{k(""),C("")},[]),et=(0,c.useCallback)(e=>{"Escape"===e.key&&ee()},[ee]),[en,el]=(0,c.useState)();(0,c.useEffect)(()=>{en||B||el(r)},[en,B,r]),(0,c.useEffect)(()=>{ee(),el()},[r,ee]);let es=(0,c.useMemo)(()=>B&&en===r?"spinner":W?"subtle":"initial",[en,W,B,r]),ea=(0,c.useMemo)(()=>"spinner"===es?rM:I&&"subtle"===es?rO:u.W1M,[es,I]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(a.xu,{paddingX:3,paddingBottom:3,children:(0,l.jsx)(a.oi,{"aria-label":v("panes.document-list-pane.search-input.aria-label"),autoComplete:"off",border:!1,clearButton:!!_,disabled:!!U,fontSize:[2,2,1],icon:ea,iconRight:"subtle"!==es||I?null:rN,onChange:Q,onClear:ee,onKeyDown:et,padding:2,placeholder:v("panes.document-list-pane.search-input.placeholder"),radius:2,ref:R,spellCheck:!1,value:I})}),(0,l.jsx)(rC,{childItemId:t,error:U,filterIsSimpleTypeConstraint:!!b,hasMaxItems:2e3===F.length,hasSearchQuery:!!_,isActive:n,isLazyLoading:H,isLoading:B,items:F,layout:s,loadingVariant:es,onEndReached:K,onRetry:Z,paneTitle:w,searchInputElement:z,showIcons:j},r)]})}),rH=(0,c.memo)(e=>{let t,n,i,r,a,c,d,p,m,h;let f=(0,s.c)(27),{contentAfter:x,index:g,initialValueTemplates:y,menuItemGroups:b,menuItems:j,setLayout:v,setSortOrder:w,title:_}=e;f[0]!==y?(t=void 0===y?[]:y,f[0]=y,f[1]=t):t=f[1];let k=t;f[2]!==b?(n=void 0===b?[]:b,f[2]=b,f[3]=n):n=f[3];let I=n;f[4]!==j?(i=void 0===j?[]:j,f[4]=j,f[5]=i):i=f[5];let C=i,{features:S}=ni(),{collapsed:E,isLast:T}=tl(),z=T&&!E?-1:0;return f[6]!==v?(a=e=>{let{layout:t}=e;v(t)},f[6]=v,f[7]=a):a=f[7],f[8]!==w?(c=e=>{w(e)},f[8]=w,f[9]=c):c=f[9],f[10]!==a||f[11]!==c?(d={setLayout:a,setSortOrder:c},f[10]=a,f[11]=c,f[12]=d):d=f[12],r=d,f[13]!==r||f[14]!==k||f[15]!==I||f[16]!==C?(p=(0,l.jsx)(tK,{initialValueTemplateItems:k,actionHandlers:r,menuItemGroups:I,menuItems:C}),f[13]=r,f[14]=k,f[15]=I,f[16]=C,f[17]=p):p=f[17],f[18]!==S.backButton||f[19]!==g?(m=S.backButton&&g>0&&(0,l.jsx)(o.zx,{as:eB,"data-as":"a",icon:u.Y4O,mode:"bleed",tooltipProps:{content:"Back"}}),f[18]=S.backButton,f[19]=g,f[20]=m):m=f[20],f[21]!==x||f[22]!==p||f[23]!==m||f[24]!==z||f[25]!==_?(h=(0,l.jsx)(o.uE,{children:(0,l.jsx)(tC,{actions:p,backButton:m,contentAfter:x,tabIndex:z,title:_})}),f[21]=x,f[22]=p,f[23]=m,f[24]=z,f[25]=_,f[26]=h):h=f[26],h});function rV(e){let{row:t,table:n}=e,{selectedAnchor:i,setSelectedAnchor:r}=n.options.meta||{},o=(0,c.useCallback)(e=>{if(e.shiftKey&&null!=i){let e=t.index,r=e<i?e:i,o=e<i?i:e,l=n.getRowModel().flatRows.slice(r,o+1).map(({id:e})=>e),s=n.getSelectedRowModel().rows.map(({id:e})=>e);n.setRowSelection(()=>[...l,...s].reduce((e,t)=>({...e,[t]:!0}),{}))}else r&&(r(t.getIsSelected()?null:t.index),t.toggleSelected())},[i,t,r,n]);return(0,l.jsx)(a.XZ,{style:{paddingLeft:4},checked:e.row.getIsSelected(),disabled:!e.row.getCanSelect(),onChange:()=>null,onClick:o})}rH.displayName="Memo(PaneHeader)";let rB=()=>{let e=(0,c.useContext)(d.Q2);if(void 0===e)throw Error("useDocumentSheetListContext must be used within an DocumentSheetListProvider");return e};function rq({children:e,table:t}){let[n,i]=(0,c.useState)(null),[r,o]=(0,c.useState)([]),s=(0,c.useCallback)((e=null)=>{n?.state==="focused"&&document.activeElement instanceof HTMLElement&&document.activeElement.blur(),i(e),o([])},[n]),a=(0,c.useCallback)(()=>s(),[s]),u=(0,c.useCallback)(e=>{if(!n)return;let i=t.getVisibleLeafColumns(),r=i.findIndex(e=>e.id===n.colId)+("left"===e?-1:1);r<0||r>=i.length||s({colId:i[r].id,rowIndex:n.rowIndex,state:"selected"})},[s,n,t]),p=(0,c.useCallback)(e=>{n&&o(t=>{let{rowIndex:i}=n,r=t=>t+("down"===e?1:-1);if(!t.length){let e=r(i);return e<0?[]:[e]}let o=r(t[t.length-1]);return o<0?t:o===i?[]:t.includes(o)?t.slice(0,-1):[...t,o]})},[n]),m=(0,c.useCallback)((e,t)=>{s({colId:e,rowIndex:t,state:"selected"})},[s]),h=(0,c.useCallback)(()=>{n&&(r.length?o([]):s("selected"===n.state?null:{...n,state:"selected"}))},[s,n,r.length]),f=(0,c.useCallback)((e,t)=>{if(!n)return;let i="ArrowDown"===t?"down":"up",r="down"===i?1:-1;if(e)p(i);else{let e=n.rowIndex+r;if(e<0)return;m(n.colId,e)}},[p,n,m]),x=(0,c.useCallback)(e=>{if(!n)return;let{key:t,shiftKey:i}=e;switch(t){case"Shift":break;case"Escape":h();break;case"ArrowDown":case"ArrowUp":e.preventDefault(),f(i,t);break;case"ArrowLeft":case"ArrowRight":"selected"===n.state&&(e.preventDefault(),u("ArrowLeft"===t?"left":"right"))}},[n,h,f,u]),g=(0,c.useCallback)(e=>{n&&(document.getElementById(`cell-${n.colId}-${n.rowIndex}`)?.contains(e.target)||a())},[a,n]);(0,c.useEffect)(()=>(n&&(document.addEventListener("keydown",x),document.addEventListener("click",g)),()=>{n&&(document.removeEventListener("keydown",x),document.removeEventListener("click",g))}),[g,x,n]);let y=(0,c.useCallback)(()=>i(e=>e?{...e,state:"focused"}:null),[]),b=(0,c.useCallback)((e,t)=>n?.colId!==e?null:n.rowIndex===t?"focused"===n.state?"focused":"selectedAnchor":r.includes(t)?"selectedRange":null,[n,r]),j=(0,c.useCallback)(()=>{n&&s({colId:n.colId,rowIndex:n.rowIndex+1,state:"selected"})},[s,n]),v=(0,c.useMemo)(()=>({focusAnchorCell:y,resetFocusSelection:a,setSelectedAnchorCell:m,getStateByCellId:b,submitFocusedCell:j}),[y,a,m,b,j]);return(0,l.jsx)(d.Q2.Provider,{value:v,children:e})}let rF=_.zo.td`
  display: flex;
  overflow: hidden;
  box-sizing: border-box;
  width: ${({width:e})=>e}px;
  border-top: 1px solid var(--card-border-color);
  background-color: var(--card-bg-color);
`,rG=(0,_.zo)(rF)`
  position: sticky;
  z-index: 2;
`;function rW(e){let{getValue:t,column:n,row:i,fieldType:r}=e,o=`cell-${n.id}-${i.index}`,[s,d]=(0,c.useState)(t()),[u,p]=(0,c.useState)(!1),m=(0,c.useRef)(null),{focusAnchorCell:h,resetFocusSelection:f,setSelectedAnchorCell:x,getStateByCellId:g,submitFocusedCell:y}=rB(),b=g(n.id,i.index),j=(0,c.useCallback)(()=>{x(n.id,i.index),h()},[n.id,h,i.index,x]),{patchDocument:v}=e.table.options.meta||{},w=()=>{m.current?.focus(),m.current instanceof HTMLInputElement&&m.current.select()},_=(0,c.useCallback)(e=>{let{key:t}=e;"Enter"===t&&("selectedAnchor"===b&&w(),"focused"===b&&y())},[b,y]),k=(0,c.useCallback)(e=>{let t=e.clipboardData?.getData("Text");("string"==typeof t||"number"==typeof t)&&(d(t),v?.(i.id,n.id,t))},[n.id,v,i.id]),I=(0,c.useCallback)(()=>{navigator.clipboard.writeText(s.toString())},[s]);(0,c.useEffect)(()=>(("selectedAnchor"===b||"focused"===b)&&document.addEventListener("keydown",_),("selectedAnchor"===b||"selectedRange"===b)&&document.addEventListener("paste",k),"selectedAnchor"===b&&document.addEventListener("copy",I),()=>{("selectedAnchor"===b||"focused"===b)&&document.removeEventListener("keydown",_),("selectedAnchor"===b||"selectedRange"===b)&&document.removeEventListener("paste",k),"selectedAnchor"===b&&document.removeEventListener("copy",I)}),[o,b,n.id,g,I,_,k,i.index]);let C=()=>"focused"===b?"2px solid blue":"selectedRange"===b?"1px solid green":"selectedAnchor"===b?"1px solid blue":"1px solid transparent",S={onFocus:j,onBlur:()=>{u&&(v?.(i.id,n.id,s),p(!1)),f()},onMouseDown:e=>{2===e.detail?w():(e.preventDefault(),x(n.id,i.index))},"aria-selected":!!b,"data-testid":o,id:o,ref:e=>{m.current=e}};return"boolean"===r.name?(0,l.jsxs)(a.Ph,{...S,onChange:()=>null,radius:0,style:{boxShadow:"none",border:C(),padding:0},value:JSON.stringify(s),children:[(0,l.jsx)("option",{value:"True",children:"True"}),(0,l.jsx)("option",{value:"False",children:"False"})]}):(0,l.jsx)(a.oi,{...S,size:0,radius:0,border:!1,style:{border:C(),padding:"22px 16px"},value:"string"==typeof s||"number"==typeof s?s:JSON.stringify(s),onChange:e=>{p(!0),d(e.target.value)}})}function rK(e){let t=e.column.getIsPinned(),n=t&&e.column.getIsLastColumn("left")?2:1;return(0,l.jsx)(t?rG:rF,{style:{left:e.column.getStart("left")??void 0,borderRight:`${n}px solid var(--card-border-color)`},width:e.column.getSize(),children:(0,e$.ie)(e.column.columnDef.cell,e.getContext?.())},e.row.original._id+e.id)}let rX=e=>{let{documentPreviewStore:t,row:n,schemaType:i}=e,r=(0,c.useMemo)(()=>(0,x.eLL)(t,i,n.original._id,"Document title"),[t,n.original._id,i]),{draft:o,published:s,isLoading:d}=(0,eu.m)(r,{draft:null,isLoading:!0,published:null});if(d)return(0,l.jsx)(a.xv,{size:1,muted:!0,children:"Loading..."});let u=o?.title??s?.title??"Untitled";return(0,l.jsxs)(a.kC,{align:"center",gap:3,children:[(0,l.jsx)(x.aAo,{draft:o,published:s}),(0,l.jsx)(a.xv,{size:1,children:u})]})},rY=(0,eD.Cl)(),rZ=["string","number","boolean"],rQ=(e,t)=>e.fields.reduce((e,n)=>{let{type:i,name:r}=n;return rZ.includes(i.name)?[...e,rY.accessor(t?`${t}.${n.name}`:n.name,{id:t?`${t}_${n.name}`:n.name,header:n.type.title,enableHiding:!0,cell:e=>(0,l.jsx)(rW,{...e,fieldType:i})})]:"object"===i.name&&(0,g.m$)(i)&&!t?[...e,rY.group({header:r,columns:rQ(i,n.name)})]:e},[]),rJ=e=>e.flatMap(e=>"accessorKey"in e?e:"columns"in e&&e.columns?rJ(e.columns):[]);function r0({table:e}){let{t}=(0,x.$G7)(),n=e.getVisibleLeafColumns().filter(e=>e.getCanHide()).length>=5,i=(0,c.useCallback)(()=>{e.resetColumnVisibility()},[e]),r=e=>()=>{e.toggleVisibility()},s=t=>{let i=t.getIsVisible(),r=1===e.getVisibleLeafColumns().filter(e=>e.getCanHide()).length;return n&&!i||r&&i};return(0,l.jsx)(o.j2,{button:(0,l.jsx)(o.zx,{mode:"bleed",text:t("sheet-list.edit-columns")}),id:"columns-control",menu:(0,l.jsx)(a.v2,{padding:3,paddingTop:4,style:{width:240},children:(0,l.jsxs)(a.kC,{direction:"column",height:"fill",gap:3,children:[(0,l.jsx)(a.xv,{weight:"semibold",size:1,children:t("sheet-list.select-fields")}),(0,l.jsx)(a.kC,{style:{flex:"1 1 auto",maxHeight:320,overflowY:"scroll"},children:(0,l.jsx)(a.Kq,{children:e.getAllLeafColumns().filter(e=>e.getCanHide()).map(e=>(0,l.jsxs)(a.kC,{marginY:2,align:"center",children:[(0,l.jsx)(a.XZ,{readOnly:s(e),checked:e.getIsVisible(),onChange:r(e),id:`col-visibility-${e.id}`,style:{display:"block"}}),(0,l.jsx)(a.xu,{flex:1,paddingLeft:3,children:(0,l.jsx)(a.xv,{size:1,children:(0,l.jsx)("label",{htmlFor:`col-visibility-${e.id}`,children:e.columnDef.header?.toString()})})})]},e.id))})}),(0,l.jsx)(o.zx,{width:"fill",mode:"ghost",text:t("sheet-list.reset-columns"),onClick:i})]})}),placement:"bottom",popover:{portal:!0}})}let r1=(0,_.zo)(a.kC)`
  flex-shrink: 0;
`;function r2(){let e,t,n;let i=(0,s.c)(5),{state:r}=(0,x.XNc)(),{filtersVisible:o}=r;return i[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)(x.s8v,{}),i[0]=e):e=i[0],i[1]!==o?(t=o&&(0,l.jsx)(x.x$p,{showTypeFilter:!1}),i[1]=o,i[2]=t):t=i[2],i[3]!==t?(n=(0,l.jsxs)(r1,{children:[e,t]}),i[3]=t,i[4]=n):n=i[4],n}let r3=_.zo.th`
  margin: 16px;
  z-index: 1;
  padding: 22px 0px;
  border-top: 1px solid var(--card-border-color);
  background-color: var(--card-badge-default-bg-color);
  box-sizing: border-box;
  text-align: left;
  width: ${({width:e})=>e}px;
  max-width: ${({width:e})=>e}px;
`,r4=(0,_.zo)(r3)`
  position: sticky;
  z-index: 2;
`,r5=_.zo.div`
  visibility: hidden;

  ${r3}:hover & {
    visibility: visible;
  }
`;function r6(e){let{header:t,headerGroup:n}=e,{t:i}=(0,x.$G7)(),r=t.column.getIsPinned(),s=n.depth>0&&!t.column.parent?null:(0,l.jsx)(a.xv,{size:1,weight:"semibold",textOverflow:"ellipsis",children:(0,e$.ie)(t.column.columnDef.header,t.getContext())}),c=t.column.getCanHide()&&(0===n.depth?!t.column.columns.length:t.column.parent),d=r&&t.column.getIsLastColumn("left")?2:1;return(0,l.jsx)(r?r4:r3,{style:{left:t.column.getStart("left")??void 0,borderRight:`${d}px solid var(--card-border-color)`},"data-testid":`header-${t.id}`,width:t.getSize(),children:(0,l.jsxs)(a.kC,{justify:"space-between",marginX:2,align:"baseline",children:[(0,l.jsx)(o.u,{delay:500,content:s,children:(0,l.jsx)(a.xu,{style:{boxSizing:"border-box"},marginLeft:3,marginRight:3,children:s})}),c&&(0,l.jsx)(r5,{children:(0,l.jsx)(o.j2,{button:(0,l.jsx)(o.zx,{tooltipProps:{content:"Open field menu"},mode:"bleed",icon:u.xXb,"data-testid":"field-menu-button"}),id:"field menu",popover:{placement:"bottom-end"},menu:(0,l.jsx)(a.v2,{children:(0,l.jsx)(o.sN,{text:i("sheet-list.hide-field"),icon:u.Two,onClick:()=>t.column.toggleVisibility()})})})})]})},t.id)}function r8({table:e}){return(0,l.jsx)(o.uE,{children:(0,l.jsxs)(a.kC,{gap:3,align:"center",children:[(0,l.jsx)(o.zx,{onClick:()=>e.setPageIndex(0),disabled:!e.getCanPreviousPage(),icon:u.TwJ,tooltipProps:{content:"Go to first page"}}),(0,l.jsx)(o.zx,{onClick:()=>e.previousPage(),disabled:!e.getCanPreviousPage(),icon:u.wyc,tooltipProps:{content:"Go to previous page"}}),(0,l.jsxs)(a.xv,{style:{whiteSpace:"nowrap"},children:[e.getState().pagination.pageIndex+1," of ",e.getPageCount()]}),(0,l.jsx)(o.zx,{onClick:()=>e.nextPage(),disabled:!e.getCanNextPage(),icon:u.XCv,tooltipProps:{content:"Go to next page"}}),(0,l.jsx)(o.zx,{onClick:()=>e.setPageIndex(e.getPageCount()-1),disabled:!e.getCanNextPage(),icon:u.hZl,tooltipProps:{content:"Go to last page"}}),(0,l.jsx)("select",{value:e.getState().pagination.pageSize,onChange:t=>{e.setPageSize(Number(t.target.value))},children:[25,50,100].map(e=>(0,l.jsx)("option",{value:e,children:e},e))})]})})}function r7(e,t){switch(t.type){case"DOCUMENTS_SET":{let n=t.documents.reduce((e,t)=>({...e,[t._id]:t}),{});return{...e,documents:n}}case"DOCUMENT_RECEIVED":{let n=t.payload;return{...e,documents:{...e.documents,[n._id]:n}}}case"DOCUMENT_DELETED":{let{[t.id]:n,...i}=e.documents;return{...e,documents:i}}case"DOCUMENT_UPDATED":{let n=t.payload,i=n._id,r={...e.documents[i],...n};return{...e,documents:{...e.documents,[i]:r}}}default:return e}}let r9={events:["welcome","mutation","reconnect"],includeResult:!0,visibility:"query"},oe=(0,_.zo)(a.kC)`
  height: 100%;
`,ot=_.zo.div`
  overflow: auto; //our scrollable table container
  position: relative; //needed for sticky header
`,on=_.zo.table`
  border-collapse: separate;
  border-spacing: 0;
  font-family: arial, sans-serif;
  white-space: nowrap;
  width: 100%;
  border: 1px solid lightgray;

  thead {
    display: grid;
    position: sticky;
    top: 0;
    z-index: 10;
  }
  tr {
    padding: 0;
  }
  tr:last-child {
    border-bottom: none;
  }
`;function oi({documentSchemaType:e}){let{dispatch:t,state:n}=(0,x.XNc)(),{columns:i,initialColumnsVisibility:r}=function(e){let t=(0,x.rq_)(),n=(0,c.useMemo)(()=>e?[rY.display({id:"selected",enableHiding:!1,header:e=>(0,l.jsxs)(a.xu,{children:[(0,l.jsx)(a.XZ,{style:{paddingLeft:4},indeterminate:e.table.getIsSomeRowsSelected(),onChange:e.table.getToggleAllPageRowsSelectedHandler()}),e.table.getSelectedRowModel().rows.length," selected"]}),cell:rV}),rY.accessor("Preview",{enableHiding:!1,id:"Preview",cell:n=>(0,l.jsx)(rX,{...n,documentPreviewStore:t,schemaType:e})}),...rQ(e)]:[],[t,e]),[i]=(0,c.useMemo)(()=>rJ(n).reduce(([e,t],n)=>{if(!n.id)throw Error("Column must have an id");let i=n.id;return n.enableHiding?5===t?[{...e,[i]:!1},t]:[{...e,[i]:!0},t+1]:[{...e,[i]:!0},t]},[{},0]),[n]);return{columns:n,initialColumnsVisibility:i}}(e),{data:o}=function({typeName:e}){let{state:t}=(0,x.XNc)(),n=(0,c.useMemo)(()=>{let e=new Map;return t.result.hits.forEach(t=>e.set((0,x.vsM)(t.hit._id),t.hit)),e},[t.result.hits]),{data:i,isLoading:r}=function(e){let t,n,i,r,o,l,a,d,u,p;let m=(0,s.c)(25),{filter:h,params:f,apiVersion:g}=e,y=`*[${h}][0...2000]`,b=g||x.Dr7.apiVersion;m[0]!==b?(t={...x.Dr7,apiVersion:b},m[0]=b,m[1]=t):t=m[1];let j=(0,x.m85)(t);m[2]===Symbol.for("react.memo_cache_sentinel")?(n={documents:{}},m[2]=n):n=m[2];let[v,w]=(0,c.useReducer)(r7,n),[_,k]=(0,c.useState)(null!==j),[I,C]=(0,c.useState)(null);m[3]!==y||m[4]!==j||m[5]!==f?(i=async()=>{if(!j){k(!1);return}try{let e=await j.fetch(y,f);w({type:"DOCUMENTS_SET",documents:e}),k(!1)}catch(e){C(e)}},m[3]=y,m[4]=j,m[5]=f,m[6]=i):i=m[6];let S=i;m[7]!==S?(r=async e=>{if("welcome"===e.type&&(k(!0),await S(),k(!1)),"reconnect"===e.type&&k(!0),"mutation"===e.type){if("appear"===e.transition){let t=e.result;t&&w({type:"DOCUMENT_RECEIVED",payload:t})}if("disappear"===e.transition&&w({type:"DOCUMENT_DELETED",id:e.documentId}),"update"===e.transition){let t=e.result;t&&w({type:"DOCUMENT_UPDATED",payload:t})}}},m[7]=S,m[8]=r):r=m[8];let E=r;e:{let e;if(!j){let e;m[9]===Symbol.for("react.memo_cache_sentinel")?(e=(0,$.of)(),m[9]=e):e=m[9],o=e;break e}if(m[10]!==y||m[11]!==j.observable||m[12]!==f){let t;m[14]===Symbol.for("react.memo_cache_sentinel")?(t=e=>(C(e),(0,$.of)(e)),m[14]=t):t=m[14],e=j.observable.listen(y,f,r9).pipe((0,L.K)(t)),m[10]=y,m[11]=j.observable,m[12]=f,m[13]=e}else e=m[13];o=e}let T=o;return m[15]!==E||m[16]!==T?(l=()=>{let e=T.subscribe(E);return()=>{e?.unsubscribe()}},a=[E,T],m[15]=E,m[16]=T,m[17]=l,m[18]=a):(l=m[17],a=m[18]),(0,c.useEffect)(l,a),m[19]!==v.documents?(u=Object.values(Object.keys(v.documents).reduce((e,t)=>{let n=v.documents[t],i=n._id===(0,x.qyu)(n._id),r=i?n._id:(0,x.qyu)(n._id);return e[r]&&!i||(e[r]=n),e},{})),m[19]=v.documents,m[20]=u):u=m[20],d=u,m[21]!==d||m[22]!==I||m[23]!==_?(p={data:d,isLoading:_,error:I},m[21]=d,m[22]=I,m[23]=_,m[24]=p):p=m[24],p}({filter:`_type == "${e}"`});return{data:(0,c.useMemo)(()=>i.filter(e=>n.has((0,x.vsM)(e._id))),[i,n]),isLoading:r}}({typeName:e.name}),[d,u]=(0,c.useState)(null),p=n.result.hits.length,m=(0,e$.b7)({data:o,columns:i,getCoreRowModel:(0,eD.sC)(),getFilteredRowModel:(0,eD.vL)(),getPaginationRowModel:(0,eD.G_)(),autoResetPageIndex:!1,initialState:{columnPinning:{left:["selected","Preview"]},pagination:{pageSize:25},columnVisibility:r},getRowId:e=>e._id,meta:{selectedAnchor:d,setSelectedAnchor:u,patchDocument:(e,t,n)=>null}}),{rows:h}=m.getRowModel();(0,c.useEffect)(()=>(t({type:"TERMS_TYPE_ADD",schemaType:e}),()=>{t({type:"TERMS_TYPE_REMOVE",schemaType:e})}),[e,t]);let f=(0,c.useCallback)(e=>(0,l.jsx)(a.xu,{as:"tr",paddingY:2,style:{display:"flex",width:"100%"},children:e.getVisibleCells().map(t=>(0,c.createElement)(rK,{...t,key:e.original._id+t.id}))},e.original._id+e.id),[]),g=`Total: ${p} rows, showing ${h.length} rows`;return(0,l.jsxs)(oe,{direction:"column",paddingX:3,"data-testid":"document-sheet-list-pane",children:[(0,l.jsxs)(a.kC,{direction:"row",align:"center",paddingY:3,paddingX:1,justify:"space-between",children:[(0,l.jsxs)(a.kC,{direction:"row",align:"center",children:[(0,l.jsx)(r2,{}),(0,l.jsx)(a.xv,{size:0,muted:!0,children:g})]}),(0,l.jsx)(r0,{table:m})]}),(0,l.jsx)(ot,{children:(0,l.jsx)(rq,{table:m,children:(0,l.jsxs)(on,{children:[(0,l.jsx)("thead",{children:m.getHeaderGroups().map(e=>(0,l.jsx)(a.xu,{as:"tr",children:e.headers.map(t=>(0,l.jsx)(r6,{header:t,headerGroup:e},t.id))},e.id))}),(0,l.jsx)("tbody",{children:m.getRowModel().rows.map(f)})]})})}),(0,l.jsx)(a.kC,{justify:"flex-end",padding:3,gap:4,paddingY:5,children:(0,l.jsx)(r8,{table:m})})]})}function or(e){let t=(0,x.I_y)(),n=e.pane.schemaTypeName,i=t.get(n);if(!i||!(0,g.em)(i))throw Error(`Schema type "${n}" not found or not a document schema`);return(0,l.jsx)(x.X$R,{children:(0,l.jsx)(oi,{...e,documentSchemaType:i})})}let oo=e=>{let{menuItems:t,sortOrderRaw:n,layout:i}=e;return t?.map(e=>e.params?.layout?{...e,selected:i===e.params?.layout}:e?.params?.by?{...e,selected:ew(n?.by,e?.params?.by||x.LZ8)}:{...e,selected:!1})};function ol(e){let[t,n]=(0,c.useState)(e);return e_(t,e)?t:(n(e),e)}let os=(0,c.memo)(function(e){let t,n,i,r,o,a,d,u,p,m,h;let f=(0,s.c)(36),{index:g,isSelected:y,pane:b,paneKey:j}=e,{name:v}=(0,x.Lky)(),{defaultLayout:w,initialValueTemplates:_,menuItemGroups:k,menuItems:I,options:C}=b,S=void 0===_?x.LZ8:_,{defaultOrdering:E,filter:T}=C,z=void 0===E?x.LZ8:E,$=ol(C.params||rv),D=b.source;e:{let e;f[0]!==T||f[1]!==$?(e=rE(T,$),f[0]=T,f[1]=$,f[2]=e):e=f[2];let n=e;if(n?.length===1){t=n[0];break e}t=null}let P=t,[R,L]=nj("layout",P??b.id,void 0===w?"default":w),{title:A}=(0,x.v0Z)(b);f[3]!==z?(i=z?.length>0?{by:z}:rj,f[3]=z,f[4]=i):i=f[4],n=i;let[M,O]=nj("sort-order",P??b.id,n);f[5]!==R||f[6]!==I||f[7]!==M?(o=oo({menuItems:I,sortOrderRaw:M,layout:R}),f[5]=R,f[6]=I,f[7]=M,f[8]=o):o=f[8],r=o;let N="sheetList"===R;f[9]!==N||f[10]!==R||f[11]!==e||f[12]!==M?(a=N?(0,c.createElement)(or,{...e,key:e.pane.id}):(0,l.jsx)(rU,{...e,sortOrder:M,layout:R}),f[9]=N,f[10]=R,f[11]=e,f[12]=M,f[13]=a):a=f[13];let U=a,H=D||v;return f[14]!==N?(d=N?{}:{currentMaxWidth:350,maxWidth:640},f[14]=N,f[15]=d):d=f[15],f[16]!==b.source?(u=t9,f[16]=b.source,f[17]=u):u=f[17],f[18]!==g||f[19]!==S||f[20]!==k||f[21]!==r||f[22]!==L||f[23]!==O||f[24]!==A?(p=(0,l.jsx)(rH,{index:g,initialValueTemplates:S,menuItemGroups:k,menuItems:r,setLayout:L,setSortOrder:O,title:A}),f[18]=g,f[19]=S,f[20]=k,f[21]=r,f[22]=L,f[23]=O,f[24]=A,f[25]=p):p=f[25],f[26]!==y||f[27]!==j||f[28]!==U||f[29]!==d||f[30]!==u||f[31]!==p?(m=(0,l.jsxs)(tr,{"data-ui":"DocumentListPane",id:j,minWidth:320,...d,selected:y,children:[u,p,U]}),f[26]=y,f[27]=j,f[28]=U,f[29]=d,f[30]=u,f[31]=p,f[32]=m):m=f[32],f[33]!==m||f[34]!==H?(h=(0,l.jsx)(x.cWh,{name:H,children:m}),f[33]=m,f[34]=H,f[35]=h):h=f[35],h});os.displayName="Memo(PaneContainer)";class oa extends Error{constructor(e,t,n,i){super(e),this.name="SerializeError";let r=typeof n>"u"?"<unknown>":`${n}`;this.path=(t||[]).concat(i?`${r} (${i})`:r)}withHelpUrl(e){return this.helpId=e,this}}let oc=((r={}).ID_REQUIRED="structure-node-id-required",r.TITLE_REQUIRED="structure-title-required",r.FILTER_REQUIRED="structure-filter-required",r.INVALID_LIST_ITEM="structure-invalid-list-item",r.COMPONENT_REQUIRED="structure-view-component-required",r.DOCUMENT_ID_REQUIRED="structure-document-id-required",r.DOCUMENT_TYPE_REQUIRED="structure-document-type-required",r.SCHEMA_TYPE_REQUIRED="structure-schema-type-required",r.SCHEMA_TYPE_NOT_FOUND="structure-schema-type-not-found",r.LIST_ITEMS_MUST_BE_ARRAY="structure-list-items-must-be-array",r.QUERY_PROVIDED_FOR_FILTER="structure-query-provided-for-filter",r.ACTION_OR_INTENT_REQUIRED="structure-action-or-intent-required",r.LIST_ITEM_IDS_MUST_BE_UNIQUE="structure-list-item-ids-must-be-unique",r.ACTION_AND_INTENT_MUTUALLY_EXCLUSIVE="structure-action-and-intent-mutually-exclusive",r.API_VERSION_REQUIRED_FOR_CUSTOM_FILTER="structure-api-version-required-for-custom-filter",r),od={title:"Last edited",i18n:{title:{key:"menu-items.sort-by.last-edited",ns:eP}},name:"lastEditedDesc",by:[{field:"_updatedAt",direction:"desc"}]},ou=[od,{title:"Created",i18n:{title:{key:"menu-items.sort-by.created",ns:eP}},name:"lastCreatedDesc",by:[{field:"_createdAt",direction:"desc"}]}];function op(e,t,n){return e instanceof om?e.serialize({path:n,index:t}):e}class om{constructor(e,t){this._context=e,this.spec=t||{}}action(e){return this.clone({action:e})}getAction(){return this.spec.action}intent(e){return this.clone({intent:e})}getIntent(){return this.spec.intent}title(e){return this.clone({title:e})}getTitle(){return this.spec.title}i18n(e){return this.clone({i18n:e})}getI18n(){return this.spec.i18n}group(e){return this.clone({group:e})}getGroup(){return this.spec.group}icon(e){return this.clone({icon:e})}getIcon(){return this.spec.icon}params(e){return this.clone({params:e})}getParams(){return this.spec.params}showAsAction(e=!0){return this.clone({showAsAction:!!e})}getShowAsAction(){return this.spec.showAsAction}serialize(e={path:[]}){let{title:t,action:n,intent:i}=this.spec;if(!t){let t="string"==typeof n?`action: "${n}"`:void 0;throw new oa("`title` is required for menu item",e.path,e.index,t).withHelpUrl(oc.TITLE_REQUIRED)}if(!n&&!i)throw new oa(`\`action\` or \`intent\` required for menu item with title ${this.spec.title}`,e.path,e.index,`"${t}"`).withHelpUrl(oc.ACTION_OR_INTENT_REQUIRED);if(i&&n)throw new oa("cannot set both `action` AND `intent`",e.path,e.index,`"${t}"`).withHelpUrl(oc.ACTION_AND_INTENT_MUTUALLY_EXCLUSIVE);return{...this.spec,title:t}}clone(e){let t=new om(this._context);return t.spec={...this.spec,...e||{}},t}}function oh(e,{by:t,title:n,i18n:i},r){let o=new om(e).group("sorting").title(e.i18n.t("default-menu-item.fallback-title",{ns:"studio",replace:{title:n}})).icon(u.fzI).action("setSortOrder").params({by:t,extendedProjection:r});return i&&(o=o.i18n(i)),o}function of(e,t){let{schema:n}=e,i="string"==typeof t?n.get(t):t;return i&&"orderings"in i?(i.orderings?i.orderings.concat(ou):ou).map(t=>oh(e,t,rz(i,t.by))):[]}function ox(e,t,n){return e instanceof og?e.serialize({path:n,index:t}):e}class og{constructor(e,t){this._context=e,this._id=t?t.id:"",this._title=t?t.title:"",this._i18n=t?t.i18n:void 0}id(e){return new og(this._context,{id:e,title:this._title,i18n:this._i18n})}getId(){return this._id}title(e){return new og(this._context,{title:e,id:this._id,i18n:this._i18n})}getTitle(){return this._title}i18n(e){return new og(this._context,{i18n:e,id:this._id,title:this._title})}getI18n(){return this._i18n}serialize(e={path:[]}){let{_id:t,_title:n,_i18n:i}=this;if(!t)throw new oa("`id` is required for a menu item group",e.path,e.index,n).withHelpUrl(oc.ID_REQUIRED);if(!n)throw new oa("`title` is required for a menu item group",e.path,t).withHelpUrl(oc.TITLE_REQUIRED);return{id:t,title:n,i18n:i}}}let oy=/([^A-Za-z0-9-_.])/;function ob(e,t,n){if("string"!=typeof e)throw new oa(`Structure node id must be of type string, got ${typeof e}`,t,n);let[i]=e.match(oy)||[];if(i)throw new oa(`Structure node id cannot contain character "${i}"`,t,n);if(e.startsWith("__edit__"))throw new oa("Structure node id cannot start with __edit__",t,n);return e}function oj(e,t){if(t)return t;let n=p(e);return oy.test(n)?p(m(e)):n}class ov{constructor(e){this.spec={options:{},...e||{}}}id(e){return this.clone({id:e})}getId(){return this.spec.id}title(e){return this.clone({title:e,id:oj(e,this.spec.id)})}getTitle(){return this.spec.title}i18n(e){return this.clone({i18n:e})}getI18n(){return this.spec.i18n}child(e){return this.clone({child:e})}getChild(){return this.spec.child}component(e){return this.clone({component:e})}getComponent(){return this.spec.component}options(e){return this.clone({options:e})}getOptions(){return this.spec.options||{}}menuItems(e){return this.clone({menuItems:e})}getMenuItems(){return this.spec.menuItems}menuItemGroups(e){return this.clone({menuItemGroups:e})}getMenuItemGroups(){return this.spec.menuItemGroups}canHandleIntent(e){return this.clone({canHandleIntent:e})}serialize(e={path:[]}){let{id:t,title:n,child:i,options:r,component:o}=this.spec;if(!t)throw new oa("`id` is required for `component` structure item",e.path,e.index).withHelpUrl(oc.ID_REQUIRED);if(!o)throw new oa("`component` is required for `component` structure item",e.path,e.index).withHelpUrl(oc.ID_REQUIRED);return{id:ob(t,e.path,e.index),title:n,type:"component",child:i,component:o,canHandleIntent:this.spec.canHandleIntent,options:r||{},menuItems:(this.spec.menuItems||[]).map((t,n)=>op(t,n,e.path)),menuItemGroups:(this.spec.menuItemGroups||[]).map((t,n)=>ox(t,n,e.path))}}clone(e){let t=new ov;return t.spec={...this.spec,...e||{}},t}}async function ow(e,t){let n=(0,x.vsM)(t),i=(0,x.qyu)(t);return(await e(x.Dr7).fetch("*[_id in [$documentId, $draftId]]._type",{documentId:n,draftId:i},{tag:"structure.resolve-type"}))[0]}class o_{spec={};id(e){return this.clone({id:e})}getId(){return this.spec.id}title(e){return this.clone({title:e,id:this.spec.id||b(e)})}getTitle(){return this.spec.title}icon(e){return this.clone({icon:e})}getIcon(){return this.spec.icon}serialize(e={path:[]}){let{id:t,title:n,icon:i}=this.spec;if(!t)throw new oa("`id` is required for view item",e.path,e.index).withHelpUrl(oc.ID_REQUIRED);if(!n)throw new oa("`title` is required for view item",e.path,e.index).withHelpUrl(oc.TITLE_REQUIRED);return{id:ob(t,e.path,e.index),title:n,icon:i}}}function ok(e,t,n){return"function"==typeof e.serialize?e.serialize({path:n,index:t}):e}let oI=e=>(0,x.Uy$)(e)&&"component"===e.type;class oC extends o_{constructor(e){let t=oI(e)?{...e}:{options:{}};super(),this.spec=t;let n="function"==typeof e?e:this.spec.component;n&&(this.spec=this.component(n).spec)}component(e){return this.clone({component:e})}getComponent(){return this.spec.component}options(e){return this.clone({options:e})}getOptions(){return this.spec.options||{}}serialize(e={path:[]}){let t=super.serialize(e),n=this.spec.component;if("function"!=typeof n)throw new oa("`component` is required and must be a function for `component()` view item",e.path,e.index).withHelpUrl(oc.COMPONENT_REQUIRED);return{...t,component:n,options:this.spec.options||{},type:"component"}}clone(e){let t=new oC;return t.spec={...this.spec,...e||{}},t}}class oS extends o_{constructor(e){super(),this.spec={id:"editor",title:"Editor",...e||{}}}serialize(e={path:[]}){return{...super.serialize(e),type:"form"}}clone(e){let t=new oS;return t.spec={...this.spec,...e||{}},t}}let oE=e=>new oS(e),oT=e=>new oC(e);var oz=Object.freeze({__proto__:null,ComponentViewBuilder:oC,FormViewBuilder:oS,GenericViewBuilder:o_,component:oT,form:oE,maybeSerializeView:ok});let o$=({resolveDocumentNode:e,getClient:t})=>async(n,{params:i,path:r})=>{let o=i.type,l=r.slice(0,r.length-1),s=r[r.length-1];if(o||(o=await ow(t,n)),!o)throw new oa("Failed to resolve document, and no type provided in parameters.",l,s);return e({documentId:n,schemaType:o})};class oD{constructor(e,t){this._context=e,this.spec=t||{}}id(e){return this.clone({id:e})}getId(){return this.spec.id}title(e){return this.clone({title:e,id:oj(e,this.spec.id)})}getTitle(){return this.spec.title}i18n(e){return this.clone({i18n:e})}getI18n(){return this.spec.i18n}child(e){return this.clone({child:e})}getChild(){return this.spec.child}documentId(e){let t=this.spec.id||e;return this.clone({id:t,options:{...this.spec.options||{},id:e}})}getDocumentId(){return this.spec.options?.id}schemaType(e){return this.clone({options:{...this.spec.options||{},type:"string"==typeof e?e:e.name}})}getSchemaType(){return this.spec.options?.type}initialValueTemplate(e,t){return this.clone({options:{...this.spec.options||{},template:e,templateParameters:t}})}getInitialValueTemplate(){return this.spec.options?.template}getInitialValueTemplateParameters(){return this.spec.options?.templateParameters}views(e){return this.clone({views:e})}getViews(){return this.spec.views||[]}serialize({path:e=[],index:t,hint:n}={path:[]}){let i=e[t||e.length-1],r=this.spec.id||i&&`${i}`||"",o={id:r,type:void 0,template:void 0,templateParameters:void 0,...this.spec.options};if("string"!=typeof r||!r)throw new oa("`id` is required for document nodes",e,t,n).withHelpUrl(oc.ID_REQUIRED);if(!o||!o.id)throw new oa("document id (`id`) is required for document nodes",e,r,n).withHelpUrl(oc.DOCUMENT_ID_REQUIRED);if(!o||!o.type)throw new oa("document type (`schemaType`) is required for document nodes",e,r,n);let l=(this.spec.views&&this.spec.views.length>0?this.spec.views:[oE()]).map((t,n)=>ok(t,n,e)),s=l.map(e=>e.id),a=y(s.filter((e,t)=>s.includes(e,t+1)));if(a.length>0)throw new oa(`document node has views with duplicate IDs: ${a.join(",  ")}`,e,r,n);return{...this.spec,child:this.spec.child||o$(this._context),id:ob(r,e,t),type:"document",options:function(e){let t={id:e.id||"",type:e.type||"*"};return e.template&&(t.template=e.template),e.templateParameters&&(t.templateParameters=e.templateParameters),t}(o),views:l}}clone(e={}){let t=new oD(this._context),n={...this.spec.options||{},...e.options||{}};return t.spec={...this.spec,...e,options:n},t}}function oP(e,t){let n=t?.type?e.resolveDocumentNode({schemaType:t.type}):new oD(e);if(!t)return n;let{id:i,type:r,template:o,templateParameters:l}=t.options;return n=n.id(t.id).documentId(i),r&&(n=n.schemaType(r)),o&&(n=n.initialValueTemplate(o,l)),t.child&&(n=n.child(t.child)),n}function oR({resolveDocumentNode:e,templates:t},n,i){let r=t.find(e=>e.id===n);if(!r)throw Error(`Template with ID "${n}" not defined`);return e({schemaType:r.schemaType}).initialValueTemplate(n,i)}class oL{constructor(e,t){this._context=e,this.spec=t||{}}id(e){return this.clone({id:e})}getId(){return this.spec.id}title(e){return this.clone({title:e})}getTitle(){return this.spec.title}description(e){return this.clone({description:e})}getDescription(){return this.spec.description}templateId(e){let t=this.spec.id||e;return this.clone({id:t,templateId:e})}getTemplateId(){return this.spec.templateId}parameters(e){return this.clone({parameters:e})}getParameters(){return this.spec.parameters}serialize({path:e=[],index:t,hint:n}={path:[]}){let{spec:i,_context:r}=this,{templates:o}=r;if("string"!=typeof i.id||!i.id)throw new oa("`id` is required for initial value template item nodes",e,t,n).withHelpUrl(oc.ID_REQUIRED);if(!i.templateId)throw new oa("template id (`templateId`) is required for initial value template item nodes",e,i.id,n).withHelpUrl(oc.ID_REQUIRED);let l=o.find(e=>e.id===i.templateId);if(!l)throw new oa("template id (`templateId`) is required for initial value template item nodes",e,i.id,n).withHelpUrl(oc.ID_REQUIRED);return{id:i.id,templateId:i.id,schemaType:l.schemaType,type:"initialValueTemplateItem",description:i.description||l.description,title:i.title||l.title,subtitle:i.subtitle,icon:i.icon||l.icon,initialDocumentId:i.initialDocumentId,parameters:i.parameters}}clone(e={}){let t=new oL(this._context);return t.spec={...this.spec,...e},t}}function oA(e){let{schema:t,getStructureBuilder:n,templates:i}=e,r=t.getTypeNames();return i.filter(e=>!e.parameters?.length).sort((e,t)=>r.indexOf(e.schemaType)-r.indexOf(t.schemaType)).map(e=>n().initialValueTemplateItem(e.id))}function oM(e,t,n){return e instanceof oL?e.serialize({path:n,index:t}):e}function oO(e,t){let{schema:n,templates:i}=e;return t.map(t=>{let r=i.find(e=>e.id===t.templateId),o=t.title||r?.title||"Create",l={};r&&r.schemaType&&(l.type=r.schemaType),t.templateId&&(l.template=t.templateId);let s=t.parameters?[l,t.parameters]:l,a=r&&n.get(r.schemaType),c=t.i18n||r?.i18n,d=new om(e).title(o).icon(r&&r.icon||a?.icon||u.dtP).intent({type:"create",params:s});return c&&(d=d.i18n(c)),d.serialize()})}let oN=Symbol("Document type list canHandleIntent"),oU=(e,t,{pane:n})=>{let i="create"===e,r=n.options?.filter||"",o=n.options?.params||{},l=n.schemaTypeName?[n.schemaTypeName]:oK(r,o),s=n.initialValueTemplates||[];return i&&t.template?s.some(e=>e.templateId===t.template):"edit"===e&&t.id&&l.includes(t.type)||i&&l.includes(t.type)};oU.identity=oN;let oH=["default","card","media","detail","block"];function oV(){}let oB=(e,t,{pane:n,index:i})=>i<=1&&oU(e,t,{pane:n,index:i});class oq{initialValueTemplatesSpecified=!1;spec={};id(e){return this.clone({id:e})}getId(){return this.spec.id}title(e){return this.clone({title:e,id:oj(e,this.spec.id)})}getTitle(){return this.spec.title}i18n(e){return this.clone({i18n:e})}getI18n(){return this.spec.i18n}defaultLayout(e){return this.clone({defaultLayout:e})}getDefaultLayout(){return this.spec.defaultLayout}menuItems(e){return this.clone({menuItems:e})}getMenuItems(){return this.spec.menuItems}menuItemGroups(e){return this.clone({menuItemGroups:e})}getMenuItemGroups(){return this.spec.menuItemGroups}child(e){return this.clone({child:e})}getChild(){return this.spec.child}canHandleIntent(e){return this.clone({canHandleIntent:e})}getCanHandleIntent(){return this.spec.canHandleIntent}showIcons(e=!0){return this.clone({displayOptions:{...this.spec.displayOptions||{},showIcons:e}})}getShowIcons(){return this.spec.displayOptions?this.spec.displayOptions.showIcons:void 0}initialValueTemplates(e){return this.initialValueTemplatesSpecified=!0,this.clone({initialValueTemplates:Array.isArray(e)?e:[e]})}getInitialValueTemplates(){return this.spec.initialValueTemplates}serialize(e={path:[]}){let t=this.spec.id||"",n=e.path,i=this.spec.defaultLayout;if(i&&!oH.includes(i))throw new oa(`\`layout\` must be one of ${oH.map(e=>`"${e}"`).join(", ")}`,n,t||e.index,this.spec.title);let r=(this.spec.initialValueTemplates||[]).map((e,t)=>oM(e,t,n));return{id:ob(t,e.path,t||e.index),title:this.spec.title,i18n:this.spec.i18n,type:"genericList",defaultLayout:i,child:this.spec.child||oV,canHandleIntent:this.spec.canHandleIntent||oB,displayOptions:this.spec.displayOptions,initialValueTemplates:r,menuItems:(this.spec.menuItems||[]).map((e,t)=>op(e,t,n)),menuItemGroups:(this.spec.menuItemGroups||[]).map((e,t)=>ox(e,t,n))}}}let oF=(e,t)=>{let n=e.options?.filter.trim()||"";if(["*","{"].includes(n[0]))throw new oa(`\`filter\` cannot start with \`${n[0]}\` - looks like you are providing a query, not a filter`,t.path,e.id,e.title).withHelpUrl(oc.QUERY_PROVIDED_FOR_FILTER);return n},oG=e=>(t,n)=>{let i=n.parent,r=n.params?.template?e.templates.find(e=>e.id===n.params.template):void 0;return Promise.resolve(r?r.schemaType:i.schemaTypeName||ow(e.getClient,t)).then(n=>n?e.resolveDocumentNode({schemaType:n,documentId:t}):new oD(e).id("editor").documentId(t).schemaType(""))};class oW extends oq{constructor(e,t){super(),this._context=e,this.spec=t||{},this.initialValueTemplatesSpecified=!!t?.initialValueTemplates}apiVersion(e){return this.clone({options:{...this.spec.options||{filter:""},apiVersion:e}})}getApiVersion(){return this.spec.options?.apiVersion}filter(e){return this.clone({options:{...this.spec.options||{},filter:e}})}getFilter(){return this.spec.options?.filter}schemaType(e){let t="string"==typeof e?e:e.name;return this.clone({schemaTypeName:t})}getSchemaType(){return this.spec.schemaTypeName}params(e){return this.clone({options:{...this.spec.options||{filter:""},params:e}})}getParams(){return this.spec.options?.params}defaultOrdering(e){if(!Array.isArray(e))throw Error("`defaultOrdering` must be an array of order clauses");return this.clone({options:{...this.spec.options||{filter:""},defaultOrdering:e}})}getDefaultOrdering(){return this.spec.options?.defaultOrdering}serialize(e={path:[]}){if("string"!=typeof this.spec.id||!this.spec.id)throw new oa("`id` is required for document lists",e.path,e.index,this.spec.title).withHelpUrl(oc.ID_REQUIRED);if(!this.spec.options||!this.spec.options.filter)throw new oa("`filter` is required for document lists",e.path,this.spec.id,this.spec.title).withHelpUrl(oc.FILTER_REQUIRED);return this.spec.options?.filter!=="_type == $type"&&this.spec.options.filter&&!this.spec.options.apiVersion&&console.warn(`No apiVersion specified for document type list with custom filter: \`${this.spec.options.filter}\`. This will be required in the future. See %s for more info.`,(0,o.h0)(oc.API_VERSION_REQUIRED_FOR_CUSTOM_FILTER)),{...super.serialize(e),type:"documentList",schemaTypeName:this.spec.schemaTypeName,child:this.spec.child||oG(this._context),options:{...this.spec.options,apiVersion:this.spec.options.apiVersion||x.Dr7.apiVersion,filter:oF(this.spec,e)}}}clone(e){let t=new oW(this._context);return t.spec={...this.spec,...e||{}},this.initialValueTemplatesSpecified||(t.spec.initialValueTemplates=function(e,t){let{document:n}=e,{schemaTypeName:i,options:r}=t,{filter:o,params:l}=r||{filter:"",params:{}},s=i?[i]:Array.from(new Set(oK(o,l)));if(0!==s.length)return s.flatMap(e=>n.resolveNewDocumentOptions({type:"structure",schemaType:e})).map(e=>({...e,icon:u.dtP}))}(this._context,t.spec)),t.spec.schemaTypeName||(t.spec.schemaTypeName=function(e){let{options:t}=e,{filter:n,params:i}=t||{filter:"",params:{}},r=oK(n,i);return 1===r.length?r[0]:void 0}(t.spec)),t}getSpec(){return this.spec}}function oK(e,t={}){let n=function(e,t={}){let n;let i=/\b_type\s*==\s*(['"].*?['"]|\$.*?(?:\s|$))|\B(['"].*?['"]|\$.*?(?:\s|$))\s*==\s*_type/g,r=[];for(;null!==(n=i.exec(e));)r.push(n[1]||n[2]);return r.map(e=>(("$"===e[0]?t[e.slice(1)]:e)||"").trim().replace(/^["']|["']$/g,"")).filter(Boolean)}(e,t);return 0===n.length&&(n=function(e,t={}){let n=e.match(/\b_type\s+in\s+\[(.*?)\]/);return n?n[1].split(/,\s*/).map(e=>e.trim().replace(/^["']+|["']+$/g,"")).map(e=>"$"===e[0]?t[e.slice(1)]:e).filter(Boolean):[]}(e,t)),n}let oX=e=>e instanceof oJ?"ListBuilder":(0,x.Uy$)(e)&&"function"==typeof e.then?"Promise":Array.isArray(e)?"array":typeof e,oY=e=>"listItem"===e.type,oZ=(e,t,n)=>(n.pane.items||[]).filter(o3).some(e=>e.schemaType.name===t.type&&e._id===t.id)||oB(e,t,n),oQ=(e,t)=>{let n=(t.parent.items.filter(oY).find(t=>t.id===e)||{child:void 0}).child;return n&&"function"==typeof n&&"function"==typeof n?n(e,t):n};class oJ extends oq{constructor(e,t){super(),this._context=e,this.spec=t||{},this.initialValueTemplatesSpecified=!!(t&&t.initialValueTemplates)}items(e){return this.clone({items:e})}getItems(){return this.spec.items}serialize(e={path:[]}){let t=this.spec.id;if("string"!=typeof t||!t)throw new oa("`id` is required for lists",e.path,e.index).withHelpUrl(oc.ID_REQUIRED);let n=typeof this.spec.items>"u"?[]:this.spec.items;if(!Array.isArray(n))throw new oa("`items` must be an array of items",e.path,e.index).withHelpUrl(oc.LIST_ITEMS_MUST_BE_ARRAY);let i=(e.path||[]).concat(t),r=n.map((e,t)=>(function(e,t,n){if(e instanceof o0)return e.serialize({path:n,index:t});if(e&&"divider"===e.type)return e;if(!e||"listItem"!==e.type){let i=e&&e.type||oX(e);throw new oa(`List items must be of type "listItem", got "${i}"${"array"===i?" - did you forget to spread (...moreItems)?":""}`,n,t).withHelpUrl(oc.INVALID_LIST_ITEM)}return e})(e,t,i)),o=r.filter((e,t)=>j(r,{id:e.id},t+1));if(o.length>0){let t=o.map(e=>e.id).slice(0,5),n=o.length>5?`${t.join(", ")}...`:t.join(", ");throw new oa(`List items with same ID found (${n})`,e.path,e.index).withHelpUrl(oc.LIST_ITEM_IDS_MUST_BE_UNIQUE)}return{...super.serialize(e),type:"list",canHandleIntent:this.spec.canHandleIntent||oZ,child:this.spec.child||oQ,items:r}}clone(e){let t=new oJ(this._context);return t.spec={...this.spec,...e||{}},t}}class o0{constructor(e,t){this._context=e,this.spec=t||{}}id(e){return this.clone({id:e})}getId(){return this.spec.id}title(e){return this.clone({title:e,id:oj(e,this.spec.id)})}getTitle(){return this.spec.title}i18n(e){return this.clone({i18n:e})}getI18n(){return this.spec.i18n}icon(e){return this.clone({icon:e})}showIcon(e=!0){return this.clone({displayOptions:{...this.spec.displayOptions||{},showIcon:e}})}getShowIcon(){return this.spec.displayOptions?this.spec.displayOptions.showIcon:void 0}getIcon(){return this.spec.icon}child(e){return this.clone({child:e})}getChild(){return this.spec.child}schemaType(e){return this.clone({schemaType:e})}getSchemaType(){let e=this.spec.schemaType;return"string"==typeof e?this._context.schema.get(e):this.spec.schemaType}serialize(e={path:[]}){let{id:t,title:n,child:i}=this.spec;if("string"!=typeof t||!t)throw new oa("`id` is required for list items",e.path,e.index).withHelpUrl(oc.ID_REQUIRED);if(!e.titleIsOptional&&("string"!=typeof n||!n))throw new oa("`title` is required for list items",e.path,t).withHelpUrl(oc.TITLE_REQUIRED);let r=this.spec.schemaType;if("string"==typeof r){let n=this._context.schema.get(r);if(!n)throw new oa(`Could not find type "${r}" in schema`,e.path,t).withHelpUrl(oc.SCHEMA_TYPE_NOT_FOUND);r=n}let o={path:e.path.concat(t),hint:"child"},l=i instanceof ov||i instanceof oW||i instanceof oD||i instanceof oJ?i.serialize(o):i;if("function"==typeof l){let e=l;l=(t,n)=>e(t,{...n,serializeOptions:o})}return{...this.spec,id:ob(t,e.path,e.index),schemaType:r,child:l,title:n,type:"listItem"}}clone(e){let t=new o0(this._context);return t.spec={...this.spec,...e||{}},t}}let o1=(e,t)=>n=>{let i=t.schemaType&&("string"==typeof t.schemaType?t.schemaType:t.schemaType.name);return i?e.resolveDocumentNode({schemaType:i,documentId:n}):new oD(e).id("documentEditor").documentId(n)};class o2 extends o0{constructor(e,t){super(e,t),this._context=e,this.spec=t||{}}serialize(e={path:[]}){let t=super.serialize({...e,titleIsOptional:!0});if(!t.schemaType)throw new oa("`schemaType` is required for document list items",e.path,e.index).withHelpUrl(oc.SCHEMA_TYPE_REQUIRED);let n=t.child||o1(this._context,t);return{...t,child:n,schemaType:t.schemaType,_id:t.id}}clone(e){let t=new o2(this._context);return t.spec={...this.spec,...e||{}},t}}function o3(e){return(0,x.Uy$)(e)&&"u">typeof e.schemaType&&"string"==typeof e._id}class o4 extends oW{constructor(e,t){super(e),this._context=e,this.spec=t||{}}child(e){return this.cloneWithoutDefaultIntentHandler({child:e})}clone(e){let t=super.clone(e),n=new o4(this._context);return n.spec={...this.spec,...t.getSpec(),...e||{}},n}cloneWithoutDefaultIntentHandler(e){let t=super.clone(e),n=new o4(this._context),i=this.spec.canHandleIntent,r=i&&i.identity===oN?{canHandleIntent:void 0}:{};return n.spec={...t.getSpec(),...this.spec,...e||{},...r},n}}let o5=["sanity.imageAsset","sanity.fileAsset"];function o6(e){return(function({schema:e}){return e.getTypeNames().filter(t=>{let n=e.get(t);return n&&n.type?.name==="document"}).filter(e=>!o5.includes(e))})(e).map(t=>o8(e,t))}function o8(e,t){let{schema:n}=e,i=n.get(t);if(!i)throw Error(`Schema type with name "${t}" not found`);let r=i.title||v(t);return new o0(e).id(t).title(r).schemaType(i).child((n,i)=>{let r=i.parent,o="list"===r.type?r.items.find(e=>e.id===n):null,l=o7(e,t);return o&&o.title&&(l=l.title(o.title)),l})}function o7(e,t){let{schema:n,resolveDocumentNode:i}=e,r="string"==typeof t?t:t.schemaType,o="string"==typeof r?r:r.name,l="string"==typeof t?{schemaType:r}:t,s=n.get(o);if(!s)throw Error(`Schema type with name "${o}" not found`);let a=s.title||v(o);return new o4(e).id(l.id||o).title(l.title||a).filter("_type == $type").params({type:o}).schemaType(s).defaultOrdering(od.by).menuItemGroups(l.menuItemGroups||[{id:"sorting",title:"Sort",i18n:{title:{key:"menu-item-groups.actions-group",ns:eP}}},{id:"layout",title:"Layout",i18n:{title:{key:"menu-item-groups.layout-group",ns:eP}}},{id:"actions",title:"Actions",i18n:{title:{key:"menu-item-groups.sorting-group",ns:eP}}}]).child(l.child||(e=>i({schemaType:o,documentId:e}))).canHandleIntent(l.canHandleIntent||oU).menuItems(l.menuItems||[...of(e,s),new om(e).group("layout").i18n({title:{key:"menu-items.layout.compact-view",ns:eP}}).title("Compact view").icon(u.reJ).action("setLayout").params({layout:"default"}),new om(e).group("layout").i18n({title:{key:"menu-items.layout.detailed-view",ns:eP}}).title("Detailed view").icon(u.cMY).action("setLayout").params({layout:"detail"})])}function o9({defaultDocumentNode:e,source:t}){let n=(0,x.nqf)(t),i={...t,getStructureBuilder:()=>r,resolveDocumentNode:t=>{let o=e?.(r,{...t,...n})||new oD(i);return o.getId()||(o=o.id("documentEditor")),t.documentId&&(o=o.documentId((0,x.vsM)(t.documentId))),o.schemaType(t.schemaType)}},r={defaults:()=>(function(e){let t=o6(e);return new oJ(e).id("__root__").title("Content").i18n({title:{key:"default-definition.content-title",ns:eP}}).items(t).showIcons(t.some(e=>{var t;return!!(t=e.getSchemaType())&&"string"!=typeof t&&!!t.icon}))})(i),documentTypeList:(...e)=>o7(i,...e),documentTypeListItem:(...e)=>o8(i,...e),documentTypeListItems:(...e)=>o6(i,...e),document:(...e)=>new oD(i,...e),documentWithInitialValueTemplate:(...e)=>oR(i,...e),defaultDocument:i.resolveDocumentNode,list:(...e)=>new oJ(i,...e),listItem:(...e)=>new o0(i,...e),menuItem:(...e)=>new om(i,...e),menuItemGroup:(...e)=>new og(i,...e),menuItemsFromInitialValueTemplateItems:(...e)=>oO(i,...e),documentList:(...e)=>new oW(i,...e),documentListItem:(...e)=>new o2(i,...e),orderingMenuItem:(...e)=>oh(i,...e),orderingMenuItemsForType:(...e)=>of(i,...e),editor:(...e)=>oP(i,...e),defaultInitialValueTemplateItems:(...e)=>oA(i,...e),initialValueTemplateItem:(e,t)=>new oL(i,{id:e,parameters:t,templateId:e}),component:e=>(0,f.isValidElementType)(e)?new ov().component(e):new ov(e),divider:()=>({id:h("__divider__"),type:"divider"}),view:oz,context:i};return r}let le=e=>{let{liveEdit:t}=e;return t?{label:"Live",color:"danger"}:null};le.displayName="LiveEditBadge";let lt={activePanes:[]};function ln(e){lt.activePanes=e}function li(e,t,n,i){let r=n?.panes||[],o=lt.activePanes||[],l=t.id||(0,w.Z)(),s="create"===e&&t.template;for(let n=o.length-1;n>=0;n--){let a=o[n];if("object"==typeof a&&(a.canHandleIntent?.(e,t,{pane:a,index:n})||"documentList"===a.type&&a.schemaTypeName===t.type&&"_type == $type"===a.options.filter)){let e=s?{template:t.template}:ne;return{panes:r.slice(0,n).concat([[{id:l,params:e,payload:i}]])}}}return{intent:e,params:t,payload:i}}let lr={create:u.dtP,delete:u.XHJ,discardDraft:u.Two,initial:u.dtP,editDraft:u.dY8,editLive:u.dY8,publish:u.EI4,unpublish:u.xEY},lo=(0,_.zo)(u.wyc)`
  transition: transform 200ms;
  &[data-expanded='true'] {
    transform: rotate(-90deg);
  }
`;function ll(e){let t,n,i,r,a;let c=(0,s.c)(14),{isExpanded:d,onExpand:u}=e,{t:p}=(0,x.$G7)(eP);c[0]!==d||c[1]!==u?(t=e=>{e.stopPropagation(),function(e){if(e)return;let t=document.getElementById(l_);if(t){let e=t.children[0];if(!(e.scrollHeight>e.clientHeight)){let t=getComputedStyle(e).overflowY;e.style.overflowY="hidden",setTimeout(()=>{e.style.overflowY=t},0)}}}(d),u()},c[0]=d,c[1]=u,c[2]=t):t=c[2];let m=t;return c[3]!==d?(n=(0,l.jsx)(lo,{"data-expanded":d}),c[3]=d,c[4]=n):n=c[4],c[5]!==d||c[6]!==p?(i=p(d?"timeline-item.menu.action-collapse":"timeline-item.menu.action-expand"),c[5]=d,c[6]=p,c[7]=i):i=c[7],c[8]!==i?(r={content:i},c[8]=i,c[9]=r):r=c[9],c[10]!==m||c[11]!==n||c[12]!==r?(a=(0,l.jsx)(o.zx,{mode:"bleed",icon:n,tooltipProps:r,onClick:m}),c[10]=m,c[11]=n,c[12]=r,c[13]=a):a=c[13],a}let ls=(0,_.zo)(a.Kq)`
  max-width: 200px;
`,la=(0,_.zo)(a.kC)`
  max-height: ${e=>e.$maxHeight};
  min-width: 244px;
`,lc=(0,_.zo)(a.xu)(({$visible:e})=>(0,_.iv)`
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.2s;

    ${e&&(0,_.iv)`
      opacity: 1;
      pointer-events: auto;
    `}
  `),ld={initial:"timeline.operation.created-initial",create:"timeline.operation.created",publish:"timeline.operation.published",editLive:"timeline.operation.edited-live",editDraft:"timeline.operation.edited-draft",unpublish:"timeline.operation.unpublished",discardDraft:"timeline.operation.draft-discarded",delete:"timeline.operation.deleted"};function lu(e){let t,n;let i=(0,s.c)(9),{maxLength:r,userIds:o,size:c,withTooltip:d}=e,u=void 0===d||d;if(i[0]!==o||i[1]!==u){let e;i[3]!==u?(e=e=>(0,l.jsx)(x.YtX,{user:e,withTooltip:u},e),i[3]=u,i[4]=e):e=i[4],t=o.map(e),i[0]=o,i[1]=u,i[2]=t}else t=i[2];return i[5]!==r||i[6]!==c||i[7]!==t?(n=(0,l.jsx)(a.Jh,{maxLength:r,size:c,children:t}),i[5]=r,i[6]=c,i[7]=t,i[8]=n):n=i[8],n}let lp=(0,_.zo)(a.kC)(e=>{let t=(0,k.aQ)(e.theme),n=e.$color;return(0,_.iv)`
    --card-icon-color: ${t.color.avatar[n].fg};
    background-color: ${t.color.avatar[n].bg};
    box-shadow: 0 0 0 1px var(--card-bg-color);

    position: absolute;
    width: ${t.avatar.sizes[0].size}px;
    height: ${t.avatar.sizes[0].size}px;
    right: -3px;
    bottom: -3px;
    border-radius: 50%;
  `}),lm={initial:"blue",create:"blue",publish:"green",editLive:"green",editDraft:"yellow",unpublish:"orange",discardDraft:"orange",delete:"red",withinSelection:"magenta"},lh={minimal:!0,useTemporalPhrase:!0},lf=(0,_.zo)(a.Od)(e=>{let t=(0,k.aQ)(e.theme);return(0,_.iv)`
    border-radius: 50%;
    width: ${t.avatar.sizes[1].size}px;
    height: ${t.avatar.sizes[1].size}px;
  `}),lx=(0,_.zo)(a.Od)(e=>{let t=(0,k.aQ)(e.theme);return(0,_.iv)`
    width: 6ch;
    height: ${t.font.text.sizes[0].lineHeight}px;
  `}),lg=e=>{let t,n,i;let r=(0,s.c)(10),{userId:o}=e,[c,d]=(0,x.aFb)(o);return r[0]!==d||r[1]!==c?(t=(0,l.jsx)(a.xu,{children:d||!c?(0,l.jsx)(lf,{animated:!0}):(0,l.jsx)(x.YtX,{user:c})}),r[0]=d,r[1]=c,r[2]=t):t=r[2],r[3]!==d||r[4]!==c?(n=(0,l.jsx)(a.xu,{children:d||!c?.displayName?(0,l.jsx)(a.xv,{size:1,children:(0,l.jsx)(lx,{animated:!0})}):(0,l.jsx)(a.xv,{muted:!0,size:1,children:c.displayName})}),r[3]=d,r[4]=c,r[5]=n):n=r[5],r[6]!==t||r[7]!==n||r[8]!==o?(i=(0,l.jsxs)(a.kC,{align:"center",gap:2,padding:1,children:[t,n]},o),r[6]=t,r[7]=n,r[8]=o,r[9]=i):i=r[9],i},ly=e=>{let t,n,i,r;let o=(0,s.c)(9),{collaborators:c}=e,{t:d}=(0,x.$G7)("studio");return o[0]!==d?(t=d("timeline.changes.title"),o[0]=d,o[1]=t):t=o[1],o[2]!==t?(n=(0,l.jsx)(a.xu,{padding:1,paddingBottom:2,children:(0,l.jsx)(a.xv,{size:1,weight:"medium",children:t})}),o[2]=t,o[3]=n):n=o[3],o[4]!==c?(i=c.map(lj),o[4]=c,o[5]=i):i=o[5],o[6]!==n||o[7]!==i?(r=(0,l.jsxs)(a.Kq,{paddingBottom:1,children:[n,i]}),o[6]=n,o[7]=i,o[8]=r):r=o[8],r};function lb(e){let t,n,i,r,c,d,u,p,m,h,f,g,y,b,j,v,w,_,k,I,C,S;let E=(0,s.c)(55),{chunk:T,isSelected:z,onSelect:$,collaborators:D,optionsMenu:P}=e,{t:R}=(0,x.$G7)("studio"),{type:L,endTimestamp:A}=T;E[0]!==L?(t=lr[L],E[0]=L,E[1]=t):t=E[1];let M=t;E[2]!==T.authors?(n=Array.from(T.authors),E[2]=T.authors,E[3]=n):n=E[3];let O=n;E[4]!==D?(i=D?Array.from(D):[],E[4]=D,E[5]=i):i=E[5];let N=i,U="delete"!==L;E[6]===Symbol.for("react.memo_cache_sentinel")?(r={dateStyle:"medium",timeStyle:"short"},E[6]=r):r=E[6];let H=(0,x.P9l)(r);E[7]!==A?(c=new Date(A),E[7]=A,E[8]=c):c=E[8];let V=(0,x.ofl)(c||"",lh);if(E[9]!==H||E[10]!==A){let e=new Date(A);u=H.format(e),E[9]=H,E[10]=A,E[11]=u}else u=E[11];d=u,E[12]!==T||E[13]!==U||E[14]!==$?(p=e=>{e.preventDefault(),e.stopPropagation(),U&&$(T)},E[12]=T,E[13]=U,E[14]=$,E[15]=p):p=E[15];let B=p;E[16]===Symbol.for("react.memo_cache_sentinel")?(m={position:"relative"},E[16]=m):m=E[16],E[17]!==O?(h=(0,l.jsx)(lu,{maxLength:3,userIds:O,size:2}),E[17]=O,E[18]=h):h=E[18];let q=lm[L];return E[19]!==M?(f=M&&(0,l.jsx)(M,{}),E[19]=M,E[20]=f):f=E[20],E[21]!==f?(g=(0,l.jsx)(a.xv,{size:0,children:f}),E[21]=f,E[22]=g):g=E[22],E[23]!==q||E[24]!==g?(y=(0,l.jsx)(lp,{align:"center",justify:"center",$color:q,children:g}),E[23]=q,E[24]=g,E[25]=y):y=E[25],E[26]!==h||E[27]!==y?(b=(0,l.jsxs)("div",{style:m,children:[h,y]}),E[26]=h,E[27]=y,E[28]=b):b=E[28],E[29]!==R||E[30]!==L?(j=R(ld[L])||(0,l.jsx)("code",{children:L}),E[29]=R,E[30]=L,E[31]=j):j=E[31],E[32]!==j?(v=(0,l.jsx)(a.xv,{size:1,weight:"medium",children:j}),E[32]=j,E[33]=v):v=E[33],E[34]!==d||E[35]!==A||E[36]!==V?(w=(0,l.jsx)(a.xv,{as:"time",size:1,muted:!0,dateTime:A,title:d,children:V}),E[34]=d,E[35]=A,E[36]=V,E[37]=w):w=E[37],E[38]!==v||E[39]!==w?(_=(0,l.jsxs)(a.Kq,{space:2,children:[v,w]}),E[38]=v,E[39]=w,E[40]=_):_=E[40],E[41]!==N?(k=N.length>0&&(0,l.jsx)(a.kC,{flex:1,justify:"flex-end",align:"center",children:(0,l.jsx)(o.u,{placement:"top",content:(0,l.jsx)(ly,{collaborators:N}),portal:!0,children:(0,l.jsx)(a.xu,{paddingLeft:2,paddingY:2,children:(0,l.jsx)(lu,{maxLength:3,userIds:N,size:0,withTooltip:!1})})})}),E[41]=N,E[42]=k):k=E[42],E[43]!==b||E[44]!==_||E[45]!==k?(I=(0,l.jsxs)(a.kC,{align:"center",gap:3,children:[b,_,k]}),E[43]=b,E[44]=_,E[45]=k,E[46]=I):I=E[46],E[47]!==T.id||E[48]!==B||E[49]!==z||E[50]!==I?(C=(0,l.jsx)(a.Zb,{as:"button",onClick:B,padding:2,pressed:z,radius:2,"data-ui":"timelineItem","data-testid":"timeline-item-button","data-chunk-id":T.id,children:I}),E[47]=T.id,E[48]=B,E[49]=z,E[50]=I,E[51]=C):C=E[51],E[52]!==P||E[53]!==C?(S=(0,l.jsxs)(a.kC,{align:"center",gap:1,children:[C,P]}),E[52]=P,E[53]=C,E[54]=S):S=E[54],S}function lj(e){return(0,l.jsx)(lg,{userId:e},e)}let lv=e=>"publish"!==e.type,lw=e=>"publish"===e.type,l_="timeline-list-wrapper",lk=({chunks:e,hasMoreChunks:t,lastChunk:n,onLoadMore:i,onSelect:r,listMaxHeight:o="calc(100vh - 280px)"})=>{let[s,d]=(0,c.useState)(!1),{t:u}=(0,x.$G7)("studio"),p=n?.id,m=(0,c.useMemo)(()=>(function(e){let t=[];for(let n of e){if(lw(n)){t.push({...n,type:"publish",children:[],collaborators:new Set});continue}if(lv(n)){let e=function(e){let t=null;for(let n=e.length-1;n>=0;n--){let i=e[n];if(lw(i)){t=i;break}if("editDraft"!==i.type)break}return t}(t);if("editDraft"===n.type&&e?.type==="publish"){Array.from(n.authors).forEach(t=>{e.collaborators.add(t)}),e.children.push(n.id),t.push({...n,parentId:e.id});continue}}lv(n)&&t.push(n)}return t})(e),[e]),[h,f]=(0,c.useState)(()=>{if(p){let e=m.find(e=>e.id===p);if(e&&lv(e)&&e.parentId)return new Set([e.parentId])}return new Set});(0,c.useEffect)(()=>{if(p){let e=m.find(e=>e.id===p);if(e&&lv(e)&&e.parentId){let t=e.parentId;f(e=>{if(e.has(t))return e;let n=new Set(e);return n.add(t),n})}}},[m,p]);let g=(0,c.useMemo)(()=>m.filter(e=>!!lw(e)||!e.parentId||h.has(e.parentId)),[m,h]);(0,c.useEffect)(()=>{g.length<16&&t&&i()},[g,t,i]);let y=(0,c.useCallback)(e=>()=>f(t=>{let n=new Set(t);return t.has(e)?n.delete(e):n.add(e),n}),[]),b=(0,c.useMemo)(()=>p?g.findIndex(e=>e.id===p):-1,[p,g]),j=(0,c.useCallback)(t=>{let n=e.find(e=>e.id===t.id);n?r(n):(console.error("TimelineItem: chunk not found"),r(t))},[e,r]),v=(0,c.useCallback)((e,{activeIndex:n})=>(0,l.jsxs)(a.xu,{paddingBottom:1,paddingTop:0===n?1:0,paddingRight:1,paddingLeft:lv(e)&&e.parentId?4:1,children:[(0,l.jsx)(lb,{chunk:e,isSelected:p===e.id,onSelect:j,collaborators:lw(e)?e.collaborators:void 0,optionsMenu:lw(e)&&e.children.length>0?(0,l.jsx)(ll,{isExpanded:h.has(e.id),onExpand:y(e.id)}):null}),n===g.length-1&&t&&(0,l.jsx)(x.Bwn,{})]}),[h,g.length,y,j,t,p]);return(0,c.useEffect)(()=>d(!0),[]),(0,l.jsxs)(lc,{$visible:!b||s,"data-ui":"timeline",children:[0===g.length&&(0,l.jsxs)(ls,{padding:3,space:3,children:[(0,l.jsx)(a.xv,{size:1,weight:"medium",children:u("timeline.error.no-document-history-title")}),(0,l.jsx)(a.xv,{muted:!0,size:1,children:u("timeline.error.no-document-history-description")})]}),g.length>0&&(0,l.jsx)(la,{direction:"column",$maxHeight:o,id:l_,children:(0,l.jsx)(x.e8h,{activeItemDataAttr:"data-hovered",ariaLabel:u("timeline.list.aria-label"),autoFocus:"list",initialIndex:b,initialScrollAlign:"center",itemHeight:57,items:g,onEndReached:i,onEndReachedIndexOffset:20,overscan:5,renderItem:v,wrapAround:!1})})]})};function lI(){let e,t,n,i,r,o;let c=(0,s.c)(12),{t:d}=(0,x.$G7)("studio");return c[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)(x.LPT,{tone:"critical",children:(0,l.jsx)(u.uIy,{})}),c[0]=e):e=c[0],c[1]!==d?(t=d("timeline.error.load-document-changes-title"),c[1]=d,c[2]=t):t=c[2],c[3]!==t?(n=(0,l.jsx)(x.LPT,{size:1,tone:"critical",weight:"medium",children:t}),c[3]=t,c[4]=n):n=c[4],c[5]!==d?(i=d("timeline.error.load-document-changes-description"),c[5]=d,c[6]=i):i=c[6],c[7]!==i?(r=(0,l.jsx)(x.LPT,{size:1,tone:"critical",children:i}),c[7]=i,c[8]=r):r=c[8],c[9]!==n||c[10]!==r?(o=(0,l.jsxs)(a.kC,{align:"flex-start",gap:3,padding:4,children:[e,(0,l.jsxs)(a.Kq,{space:4,children:[n,r]})]}),c[9]=n,c[10]=r,c[11]=o):o=c[11],o}lk.displayName="Timeline";let lC=(0,_.zo)(o.J2)`
  overflow: hidden;
  overflow: clip;
`;function lS(e){let t,n,i,r,d,p,m,h,f,g,y,b,j,v,w,_;let k=(0,s.c)(68),{chunk:I,mode:C,placement:S}=e,{setTimelineRange:E,setTimelineMode:T,timelineError:z,ready:$,timelineStore:D}=t6(),[P,R]=(0,c.useState)(!1),[L,A]=(0,c.useState)(null),[M,O]=(0,c.useState)(null),N=(0,a.pm)(),U=(0,x.P08)(D,lD),H=(0,x.P08)(D,l$),V=(0,x.P08)(D,lz),B=(0,x.P08)(D,lT),q=(0,x.P08)(D,lE),{t:F}=(0,x.$G7)("studio");k[0]!==C||k[1]!==T?(t=()=>{T(C),R(!0)},k[0]=C,k[1]=T,k[2]=t):t=k[2];let G=t;k[3]!==T?(n=()=>{T("closed"),R(!1)},k[3]=T,k[4]=n):n=k[4];let W=n;k[5]!==L||k[6]!==W||k[7]!==P?(i=e=>{P&&("Escape"===e.key||"Tab"===e.key)&&(W(),L?.focus())},k[5]=L,k[6]=W,k[7]=P,k[8]=i):i=k[8],(0,a.qh)(i),k[9]!==L||k[10]!==M?(r=()=>[L,M],k[9]=L,k[10]=M,k[11]=r):r=k[11],(0,a.Of)(P&&W,r),k[12]!==T||k[13]!==E||k[14]!==F||k[15]!==D||k[16]!==N?(d=e=>{try{let[t,n]=D.findRangeForRev(e);T("closed"),E(t,n)}catch(e){N.push({closable:!0,description:e.message,status:"error",title:F("timeline.error.unable-to-load-revision")})}},k[12]=T,k[13]=E,k[14]=F,k[15]=D,k[16]=N,k[17]=d):d=k[17];let K=d;k[18]!==T||k[19]!==E||k[20]!==F||k[21]!==D||k[22]!==N?(p=e=>{try{let[t,n]=D.findRangeForSince(e);T("closed"),E(t,n)}catch(e){N.push({closable:!0,description:e.message,status:"error",title:F("timeline.error.unable-to-load-revision")})}},k[18]=T,k[19]=E,k[20]=F,k[21]=D,k[22]=N,k[23]=p):p=k[23];let X=p;k[24]!==H||k[25]!==D?(m=()=>{H||D.loadMore()},k[24]=H,k[25]=D,k[26]=m):m=k[26];let Y=m;e:{let e,t;if(z){let e;k[27]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)(lI,{}),k[27]=e):e=k[27],h=e;break e}if("rev"===C){let e;k[28]!==U||k[29]!==Y||k[30]!==V||k[31]!==B||k[32]!==K?(e=(0,l.jsx)(lk,{chunks:U,hasMoreChunks:V,lastChunk:B,onLoadMore:Y,onSelect:K}),k[28]=U,k[29]=Y,k[30]=V,k[31]=B,k[32]=K,k[33]=e):e=k[33],h=e;break e}k[34]!==U||k[35]!==B?(e=B?U.filter(e=>e.index<B.index):U,k[34]=U,k[35]=B,k[36]=e):e=k[36];let n=e;k[37]!==n||k[38]!==Y||k[39]!==V||k[40]!==X||k[41]!==q?(t=(0,l.jsx)(lk,{chunks:n,hasMoreChunks:V,lastChunk:q,onLoadMore:Y,onSelect:X}),k[37]=n,k[38]=Y,k[39]=V,k[40]=X,k[41]=q,k[42]=t):t=k[42],h=t}let Z=h;if(k[43]!==I||k[44]!==F){let e={timestamp:{dateStyle:"medium",timeStyle:"short"}};f=I?F(ld[I.type],{context:"timestamp",timestamp:new Date(I?.endTimestamp),formatParams:e}):F("timeline.latest-revision"),g=I?F("timeline.since",{timestamp:new Date(I?.endTimestamp),formatParams:e}):F("timeline.since-version-missing"),k[43]=I,k[44]=F,k[45]=f,k[46]=g}else f=k[45],g=k[46];let Q="rev"===C?f:g;k[47]!==M?(y={"timeline-menu":M},k[47]=M,k[48]=y):y=k[48];let J=P&&Z,ee=P?"timeline-menu-close-button":"timeline-menu-open-button",et=!$,en=P?W:G;return k[49]===Symbol.for("react.memo_cache_sentinel")?(b={maxWidth:"100%"},k[49]=b):b=k[49],k[50]!==Q||k[51]!==$||k[52]!==F?(j=$?Q:F("timeline.loading-history"),k[50]=Q,k[51]=$,k[52]=F,k[53]=j):j=k[53],k[54]!==P||k[55]!==ee||k[56]!==et||k[57]!==en||k[58]!==j?(v=(0,l.jsx)(a.kC,{width:"fill",children:(0,l.jsx)(o.zx,{"data-testid":ee,disabled:et,mode:"ghost",onClick:en,ref:A,selected:P,width:"fill",tooltipProps:null,justify:"space-between",style:b,iconRight:u.v4q,text:j})}),k[54]=P,k[55]=ee,k[56]=et,k[57]=en,k[58]=j,k[59]=v):v=k[59],k[60]!==P||k[61]!==S||k[62]!==J||k[63]!==v?(w=(0,l.jsx)(lC,{"data-testid":"timeline-menu",constrainSize:!0,content:J,"data-ui":"versionMenu",open:P,placement:S,matchReferenceWidth:!0,portal:!0,ref:O,children:v}),k[60]=P,k[61]=S,k[62]=J,k[63]=v,k[64]=w):w=k[64],k[65]!==y||k[66]!==w?(_=(0,l.jsx)(a.Xp,{__unstable_elements:y,children:w}),k[65]=y,k[66]=w,k[67]=_):_=k[67],_}function lE(e){return e.sinceTime}function lT(e){return e.realRevChunk}function lz(e){return e.hasMoreChunks}function l$(e){return e.isLoading}function lD(e){return e.chunks}let lP=(0,_.zo)(x.l$t)`
  height: 100%;
  overflow: auto;
  position: relative;
  scroll-behavior: smooth;
`,lR=(0,_.zo)(a.xu)`
  &:not([hidden]) {
    display: grid;
  }
  grid-template-columns: 48px 1fr;
  align-items: center;
  gap: 0.25em;
`;function lL(e){let t,n,i,r,o,d,u,p,m,h,f,g,y;let b=(0,s.c)(38),{showChanges:j}=e,{documentId:v,schemaType:w,timelineError:_,timelineStore:k,value:I}=t6(),[C,S]=(0,c.useState)(null),E=(0,x.P08)(k,lU),T=(0,x.P08)(k,lN),z=(0,x.P08)(k,lO),$=(0,x.P08)(k,lM),D=(0,x.P08)(k,lA),P="loading"===$,R=!z,{t:L}=(0,x.$G7)(eP);return b[0]!==T||b[1]!==v||b[2]!==R||b[3]!==w||b[4]!==I?(n={documentId:v,schemaType:w,FieldWrapper:x.MUX,rootDiff:T,isComparingCurrent:R,value:I,showFromValue:!0},b[0]=T,b[1]=v,b[2]=R,b[3]=w,b[4]=I,b[5]=n):n=b[5],t=n,b[6]!==L?(i=L("changes.from.label"),b[6]=L,b[7]=i):i=b[7],b[8]!==i?(r=(0,l.jsx)(a.xv,{size:1,muted:!0,children:i}),b[8]=i,b[9]=r):r=b[9],b[10]!==D?(o=(0,l.jsx)(lS,{mode:"since",chunk:D,placement:"bottom-start"}),b[10]=D,b[11]=o):o=b[11],b[12]!==L?(d=L("changes.to.label"),b[12]=L,b[13]=d):d=b[13],b[14]!==d?(u=(0,l.jsx)(a.xv,{size:1,muted:!0,children:d}),b[14]=d,b[15]=u):u=b[15],b[16]!==E?(p=(0,l.jsx)(lS,{chunk:E,mode:"rev",placement:"bottom-end"}),b[16]=E,b[17]=p):p=b[17],b[18]!==r||b[19]!==o||b[20]!==u||b[21]!==p?(m=(0,l.jsx)(a.xu,{padding:3,children:(0,l.jsxs)(lR,{paddingX:2,paddingBottom:2,children:[r,o,u,p]})}),b[18]=r,b[19]=o,b[20]=u,b[21]=p,b[22]=m):m=b[22],b[23]!==T||b[24]!==t||b[25]!==P||b[26]!==w||b[27]!==j||b[28]!==_?(h=j&&(0,l.jsx)(lH,{diff:T,documentContext:t,error:_,loading:P,schemaType:w}),b[23]=T,b[24]=t,b[25]=P,b[26]=w,b[27]=j,b[28]=_,b[29]=h):h=b[29],b[30]!==h?(f=(0,l.jsx)(lP,{"data-ui":"Scroller",ref:S,children:(0,l.jsx)(a.xu,{flex:1,paddingX:3,height:"fill",children:h})}),b[30]=h,b[31]=f):f=b[31],b[32]!==C||b[33]!==f?(g=(0,l.jsx)(a.Zb,{flex:1,paddingX:2,paddingY:2,children:(0,l.jsx)(a.NM,{element:C,children:f})}),b[32]=C,b[33]=f,b[34]=g):g=b[34],b[35]!==g||b[36]!==m?(y=(0,l.jsxs)(a.kC,{"data-testid":"review-changes-pane",direction:"column",height:"fill",overflow:"hidden",children:[m,g]}),b[35]=g,b[36]=m,b[37]=y):y=b[37],y}function lA(e){return e.sinceTime}function lM(e){return e.selectionState}function lO(e){return e.onOlderRevision}function lN(e){return e.diff}function lU(e){return e.revTime}function lH(e){let t,n;let i=(0,s.c)(9),{error:r,diff:o,documentContext:a,loading:c,schemaType:u}=e;if(r){let e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)(x.kwM,{}),i[0]=e):e=i[0],e}if(c){let e;return i[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)(x.Bwn,{showText:!0}),i[1]=e):e=i[1],e}if(!o){let e;return i[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)(x.kwM,{}),i[2]=e):e=i[2],e}return i[3]!==o||i[4]!==u?(t=(0,l.jsx)(x.EyJ,{diff:o,schemaType:u}),i[3]=o,i[4]=u,i[5]=t):t=i[5],i[6]!==a||i[7]!==t?(n=(0,l.jsx)(d.H7.Provider,{value:a,children:t}),i[6]=a,i[7]=t,i[8]=n):n=i[8],n}let lV=(0,_.zo)(x.l$t)`
  height: 100%;
  overflow: auto;
  position: relative;
  scroll-behavior: smooth;
`;function lB(e){let t,n,i,r;let o=(0,s.c)(20),{showList:d}=e,{timelineError:u,setTimelineMode:p,setTimelineRange:m,timelineStore:h}=t6(),[f,g]=(0,c.useState)(null),[y,b]=(0,c.useState)(0);o[0]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{b(e?.clientHeight?e.clientHeight-1:0),g(e)},o[0]=t):t=o[0];let j=t,v=(0,x.P08)(h,lW),w=(0,x.P08)(h,lG),_=(0,x.P08)(h,lF),k=(0,x.P08)(h,lq),{t:I}=(0,x.$G7)("studio"),C=(0,a.pm)();o[1]!==p||o[2]!==m||o[3]!==I||o[4]!==h||o[5]!==C?(n=e=>{try{let[t,n]=h.findRangeForRev(e);p("closed"),m(t,n)}catch(e){C.push({closable:!0,description:e.message,status:"error",title:I("timeline.error.unable-to-load-revision")})}},o[1]=p,o[2]=m,o[3]=I,o[4]=h,o[5]=C,o[6]=n):n=o[6];let S=n;o[7]!==k||o[8]!==h?(i=()=>{k||h.loadMore()},o[7]=k,o[8]=h,o[9]=i):i=o[9];let E=i;return o[10]!==v||o[11]!==E||o[12]!==_||o[13]!==y||o[14]!==w||o[15]!==f||o[16]!==S||o[17]!==d||o[18]!==u?(r=(0,l.jsx)(a.kC,{"data-testid":"review-changes-pane",direction:"column",height:"fill",children:(0,l.jsx)(a.Zb,{flex:1,padding:2,paddingTop:0,children:u?(0,l.jsx)(lI,{}):(0,l.jsx)(a.NM,{element:f,children:(0,l.jsx)(lV,{"data-ui":"Scroller",ref:j,children:y&&d?(0,l.jsx)(lk,{chunks:v,hasMoreChunks:_,lastChunk:w,onLoadMore:E,onSelect:S,listMaxHeight:`${y}px`}):null})})})}),o[10]=v,o[11]=E,o[12]=_,o[13]=y,o[14]=w,o[15]=f,o[16]=S,o[17]=d,o[18]=u,o[19]=r):r=o[19],r}function lq(e){return e.isLoading}function lF(e){return e.hasMoreChunks}function lG(e){return e.realRevChunk}function lW(e){return e.chunks}let lK=(0,_.zo)(a.kC)`
  opacity: 0;
  transition: opacity 200ms;
  &[data-ready] {
    opacity: 1;
  }
`,lX=["history","review"],lY=e=>e&&lX.includes(e),lZ={error:u.uIy,warning:u.foC,info:u.hQ6},lQ={error:"critical",warning:"caution",info:"primary"};function lJ(e){let t,n,i,r;let d=(0,s.c)(17),{marker:u,onOpen:p,schemaType:m,value:h}=e;d[0]!==u.path||d[1]!==p?(t=()=>p(u.path),d[0]=u.path,d[1]=p,d[2]=t):t=d[2];let f=t,[x,g]=(0,c.useState)(null),y=lZ[u.level];return d[3]!==x?(n=x&&(0,l.jsx)(a.Zb,{padding:3,radius:2,tone:"critical",children:(0,l.jsx)(a.xv,{size:1,children:x.error.message})}),d[3]=x,d[4]=n):n=d[4],d[5]!==y||d[6]!==x||d[7]!==f||d[8]!==u.level||d[9]!==u.message||d[10]!==u.path||d[11]!==m||d[12]!==h?(i=!x&&(0,l.jsx)(a.Zb,{__unstable_focusRing:!0,as:"button",onClick:f,padding:3,radius:2,tone:lQ[u.level],children:(0,l.jsxs)(a.kC,{align:"flex-start",gap:3,children:[(0,l.jsx)(a.xu,{flex:"none",children:(0,l.jsx)(a.xv,{size:1,children:(0,l.jsx)(y,{})})}),(0,l.jsxs)(a.Kq,{flex:1,space:2,children:[(0,l.jsx)(l0,{path:u.path,schemaType:m,value:h}),(0,l.jsx)(a.xv,{muted:!0,size:1,children:u.message})]})]})}),d[5]=y,d[6]=x,d[7]=f,d[8]=u.level,d[9]=u.message,d[10]=u.path,d[11]=m,d[12]=h,d[13]=i):i=d[13],d[14]!==n||d[15]!==i?(r=(0,l.jsxs)(o.SV,{onCatch:g,children:[n,i]}),d[14]=n,d[15]=i,d[16]=r):r=d[16],r}function l0(e){let{path:t,schemaType:n,value:i}=e,r=(0,c.useMemo)(()=>{try{return function(e){let{path:t,schemaType:n,value:i}=e,r=[],o=n,l=i;for(let e of t){if("string"==typeof e){if(!(0,x.Uy$)(l)&&void 0!==l)throw Error(`Parent value is not an object, cannot get path segment: .${e}`);if("object"!==o.jsonType)throw Error(`Parent type is not an object schema type, cannot get path segment: .${e}`);l=l?.[e];let t=o.fields.find(t=>t.name===e);if(!t)return r.push({name:e}),r;o=t.type,r.push(o);continue}if("number"==typeof e){if(!(0,x.kJL)(l)&&void 0!==l)throw Error(`Parent value is not an array, cannot get path segment: [${e}]`);if("array"!==o.jsonType)throw Error(`Parent type is not an array schema type, cannot get path segment: [${e}]`);l=l?.[e];let t=o.of.find(e=>"string"==typeof l?"string"===e.jsonType:"number"==typeof l?"number"===e.jsonType:"boolean"==typeof l?"boolean"===e.jsonType:!!(0,x.Uy$)(l)&&e.name===l?._type);if(!t)throw Error(`Item type not found: [${e}]`);o=t,r.push(o);continue}if((0,x.Uy$)(e)&&e._key){if(!(0,x.kJL)(l))throw Error(`Parent value is not an array, cannot get path segment: [_key == ${e}]`);if("array"!==o.jsonType)throw Error(`Parent type is not an array schema type, cannot get path segment: .${e}`);if(l=(l??[]).find(t=>(0,x.Uy$)(t)&&t._key===e._key),!(0,x.Uy$)(l))throw Error(`Array item not found: [_key == ${e._key}]`);let t=o.of.find(e=>(0,x.Uy$)(l)&&e.name===l?._type);if(!t)throw Error(`Array item type not found: .${l?._type}`);o=t,r.push(o);continue}throw Error(`Invalid path segment: ${JSON.stringify(e)}`)}return r}({path:t,schemaType:n,value:i})}catch(e){console.error(e)}return null},[t,n,i]);return r?.length?(0,l.jsx)(a.xv,{size:1,children:r.map((e,t)=>(0,l.jsxs)(c.Fragment,{children:[t>0&&(0,l.jsx)("span",{style:{color:"var(--card-muted-fg-color)",opacity:.5},children:" / "}),(0,l.jsx)("span",{style:{fontWeight:500},children:e.title||e.name})]},t))}):null}let l1={},l2=C.BC.create("/",[C.BC.intents("/intent"),C.BC.create("/edit/:type/:editDocumentId",[C.BC.create({path:"/:params",transform:{params:{toState:function(e){try{return JSON.parse(decodeURIComponent(e))}catch{return console.warn("Failed to parse JSON parameters"),{}}},toPath:function(e){return JSON.stringify(e)}}}})]),C.BC.create({path:"/:panes",children:[C.BC.create("/:action",C.BC.create("/:legacyEditDocumentId"))],transform:{panes:{toState:function(e){var t;return -1!==(t=decodeURIComponent(e)).indexOf(",{")?function(e){let t=[],n=e;for(;n.length;){let[e,i,r]=n.match(l3)||[];if(!e){n=n.slice(1);continue}let o=r&&function(e){try{return JSON.parse(e)}catch(e){console.warn(`Failed to parse parameters: ${e.message}`);return}}(r);t.push({id:i,payload:o}),n=n.slice(e.length)}return[t]}(t):t.split(";").map(e=>{let[t,...n]=e.split("|").map(e=>{let[t,...n]=e.split(",");return function(e,t){let n={...t,params:l1,payload:void 0};return e.reduce((e,t)=>{if(l4(t)){let n=t.slice(0,t.indexOf("=")),i=t.slice(n.length+1);e.params={...e.params,[decodeURIComponent(n)]:decodeURIComponent(i)}}else l5(t)?e.payload=function(e){try{return e?(0,C.ZB)(e):void 0}catch(e){console.warn(`Failed to parse parameters: ${e.message}`);return}}(t):console.warn("Unknown pane segment: %s - skipping",t);return e},n)}(n,{id:t})});return[t,...n.map(e=>({...t,...e,id:e.id||t.id,params:{...I(t.params,l6),...e.params},payload:e.payload||t.payload}))]}).filter(e=>e.length>0)},toPath:function(e){return(e||[]).map(e=>e.map(l7).join("|")).map(encodeURIComponent).join(";")}}}})]),l3=/^([.a-z0-9_-]+),?({.*?})?(?:(;|$))/i,l4=e=>/^[a-z0-9]+=[^=]+/i.test(e),l5=e=>/^[A-Za-z0-9\-_]+(?:={0,2})$/.test(e),l6=["view","since","rev","inspect","comment"],l8=Boolean;function l7(e,t,n){let{payload:i,params:r={},id:o}=e,[l]=n,s=e===l,a=0!==t&&o===l.id,c=typeof i>"u"?void 0:(0,C.B8)(i),d=Object.entries(r).filter(e=>{let[t,n]=e;return!!n&&(!!s||!(n===l.params?.[t]&&!l6.includes(t)))}).map(([e,t])=>`${encodeURIComponent(e)}=${encodeURIComponent(t)}`);return[a?"":o].concat([d.length>0&&d,c].filter(l8).flat()).join(",")||","}let l9=[ik,iC,ix,iy,im,ij],se=[le],st=[{name:"sanity/structure/validation",component:function(e){let t,n,i,r,o,c,d,u;let p=(0,s.c)(25),{onClose:m}=e,{onFocus:h,onPathOpen:f,schemaType:g,validation:y,value:b}=t6(),{t:j}=(0,x.$G7)("validation");p[0]!==h||p[1]!==f?(t=e=>{f(e),h(e)},p[0]=h,p[1]=f,p[2]=t):t=p[2];let v=t;return p[3]!==j?(n=j("panel.close-button-aria-label"),p[3]=j,p[4]=n):n=p[4],p[5]!==j?(i=j("panel.title"),p[5]=j,p[6]=i):i=p[6],p[7]!==m||p[8]!==n||p[9]!==i?(r=(0,l.jsx)(nh,{as:"header",closeButtonLabel:n,flex:"none",onClose:m,title:i}),p[7]=m,p[8]=n,p[9]=i,p[10]=r):r=p[10],p[11]!==j||p[12]!==y.length?(o=0===y.length&&(0,l.jsx)(a.xu,{padding:2,children:(0,l.jsx)(a.xv,{muted:!0,size:1,children:j("panel.no-errors-message")})}),p[11]=j,p[12]=y.length,p[13]=o):o=p[13],p[14]!==v||p[15]!==g||p[16]!==y||p[17]!==b?(c=y.length>0&&(0,l.jsx)(a.Kq,{space:2,children:y.map((e,t)=>(0,l.jsx)(lJ,{marker:e,onOpen:v,schemaType:g,value:b},t))}),p[14]=v,p[15]=g,p[16]=y,p[17]=b,p[18]=c):c=p[18],p[19]!==o||p[20]!==c?(d=(0,l.jsxs)(a.Zb,{flex:1,overflow:"auto",padding:3,children:[o,c]}),p[19]=o,p[20]=c,p[21]=d):d=p[21],p[22]!==r||p[23]!==d?(u=(0,l.jsxs)(a.kC,{direction:"column",height:"fill",overflow:"hidden",children:[r,d]}),p[22]=r,p[23]=d,p[24]=u):u=p[24],u},useMenuItem:function(e){let{documentId:t,documentType:n}=e,{t:i}=(0,x.$G7)("validation"),{validation:r}=(0,x.a3k)(t,n),o=(0,c.useMemo)(()=>r.map(e=>({level:e.level,message:e.message,path:e.path})),[r]),l=o.some(g.z1),s=o.some(g.AY),a=(0,c.useMemo)(()=>l?u.uIy:s?u.foC:u.nSX,[l,s]),d=(0,c.useMemo)(()=>l?"critical":s?"caution":"positive",[l,s]);return{hidden:0===o.length,icon:a,title:i("panel.title"),tone:d,showAsAction:!0}}},{name:ns,useMenuItem:()=>{let{features:e}=ni(),{t}=(0,x.$G7)();return{hidden:!e.reviewChanges,icon:u.vaD,title:t("changes.title")}},component:function(e){let t,n,i,r,c,d,p,m,h,f,g,y,b,j,v,w,_,k;let I=(0,s.c)(50),{params:C,setParams:S}=eK(),{t:E}=(0,x.$G7)(eP),T=C?.inspect===ns,z=lY(C?.changesInspectorTab)?C.changesInspectorTab:lX[0];I[0]!==C||I[1]!==S?(t=e=>S({...C,changesInspectorTab:e}),I[0]=C,I[1]=S,I[2]=t):t=I[2];let $=t,D=T?"":void 0;I[3]!==E?(n=E("changes.tab.history"),I[3]=E,I[4]=n):n=I[4],I[5]!==$?(i=()=>$("history"),I[5]=$,I[6]=i):i=I[6];let P="history"===z;I[7]!==n||I[8]!==i||I[9]!==P?(r=(0,l.jsx)(o.OK,{"aria-controls":"history-panel",id:"history-tab",label:n,onClick:i,selected:P}),I[7]=n,I[8]=i,I[9]=P,I[10]=r):r=I[10],I[11]!==E?(c=E("changes.tab.review-changes"),I[11]=E,I[12]=c):c=I[12],I[13]!==$?(d=()=>$("review"),I[13]=$,I[14]=d):d=I[14];let R="review"===z;I[15]!==c||I[16]!==d||I[17]!==R?(p=(0,l.jsx)(o.OK,{"aria-controls":"review-changes-panel",id:"changes-tab",label:c,onClick:d,selected:R}),I[15]=c,I[16]=d,I[17]=R,I[18]=p):p=I[18],I[19]!==r||I[20]!==p?(m=(0,l.jsxs)(a.td,{space:1,flex:1,children:[r,p]}),I[19]=r,I[20]=p,I[21]=m):m=I[21],I[22]!==E?(h=E("changes.action.close-label"),I[22]=E,I[23]=h):h=I[23];let L=e.onClose;I[24]!==E?(f=E("document-inspector.close-button.tooltip"),I[24]=E,I[25]=f):f=I[25],I[26]!==f?(g={content:f},I[26]=f,I[27]=g):g=I[27],I[28]!==e.onClose||I[29]!==h||I[30]!==g?(y=(0,l.jsx)(a.xu,{flex:"none",children:(0,l.jsx)(o.zx,{"aria-label":h,icon:u.Two,mode:"bleed",onClick:L,tooltipProps:g})}),I[28]=e.onClose,I[29]=h,I[30]=g,I[31]=y):y=I[31],I[32]!==m||I[33]!==y?(b=(0,l.jsxs)(a.kC,{align:"center",padding:3,gap:2,children:[m,y]}),I[32]=m,I[33]=y,I[34]=b):b=I[34];let A="history"!==z,M="history"===z;I[35]!==M?(j=(0,l.jsx)(lB,{showList:M}),I[35]=M,I[36]=j):j=I[36],I[37]!==A||I[38]!==j?(v=(0,l.jsx)(a.x4,{"aria-labelledby":"history-tab",height:"fill",hidden:A,id:"history-panel",children:j}),I[37]=A,I[38]=j,I[39]=v):v=I[39];let O="review"!==z,N="review"===z;return I[40]!==N?(w=(0,l.jsx)(lL,{showChanges:N}),I[40]=N,I[41]=w):w=I[41],I[42]!==O||I[43]!==w?(_=(0,l.jsx)(a.x4,{"aria-labelledby":"review-tab",hidden:O,id:"review-panel",height:"fill",children:w}),I[42]=O,I[43]=w,I[44]=_):_=I[44],I[45]!==D||I[46]!==b||I[47]!==v||I[48]!==_?(k=(0,l.jsxs)(lK,{direction:"column",padding:0,height:"fill","data-ready":D,children:[b,v,_]}),I[45]=D,I[46]=b,I[47]=v,I[48]=_,I[49]=k):k=I[49],k},onClose:({params:e})=>({params:{...e,since:void 0,rev:void 0,changesInspectorTab:void 0}}),onOpen:({params:e})=>({params:{...e,since:"@lastPublished"}})}],sn=(0,x.Cw0)(e=>{let t=e?.icon||u.kLv;return{name:"sanity/structure",document:{actions:e=>Array.from(new Set([...e,...l9])),badges:e=>Array.from(new Set([...e,...se])),inspectors:e=>Array.from(new Set([...e,...st]))},tools:[{name:e?.name||"structure",title:e?.title||"Structure",icon:t,component:(0,c.lazy)(()=>n.e(845).then(n.bind(n,59845))),canHandleIntent:(e,t)=>{var n;return"create"===e?"type"in t&&(!("template"in t)||{template:!0}):"edit"===e&&"id"in(n=t)&&(!("mode"in n)||{mode:"structure"===n.mode})},getIntentState:li,controlsDocumentTitle:!0,options:e,router:l2,__internalApplicationType:"sanity/structure"}],i18n:{bundles:[eR]}}});function si({defaultDocumentNode:e,structure:t,children:n}){let[i,r]=(0,c.useState)(!1),o=(0,x.Lky)(),s=(0,x.Q3k)(o),a=(0,x.H__)(),u=(0,c.useMemo)(()=>o9({defaultDocumentNode:e,source:o}),[e,o]),p=(0,c.useMemo)(()=>t?t(u,{...s,documentStore:a}):u.defaults(),[u,t,s,a]),m=(0,c.useMemo)(()=>({backButton:i,resizablePanes:!i,reviewChanges:!i,splitPanes:!i,splitViews:!i}),[i]),h=(0,c.useMemo)(()=>({features:m,layoutCollapsed:i,setLayoutCollapsed:r,rootPaneNode:p,structureContext:u.context}),[m,i,p,u.context]);return(0,l.jsx)(d.r1.Provider,{value:h,children:n})}var sr=Object.freeze({__proto__:null,default:rg}),so=Object.freeze({__proto__:null,default:os})}}]);